var Vc=e=>{throw TypeError(e)};var ql=(e,s,r)=>s.has(e)||Vc("Cannot "+r);var b=(e,s,r)=>(ql(e,s,"read from private field"),r?r.call(e):s.get(e)),O=(e,s,r)=>s.has(e)?Vc("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(e):s.set(e,r),M=(e,s,r,n)=>(ql(e,s,"write to private field"),n?n.call(e,r):s.set(e,r),r),B=(e,s,r)=>(ql(e,s,"access private method"),r);var ca=(e,s,r,n)=>({set _(a){M(e,s,a,r)},get _(){return b(e,s,n)}});function ep(e,s){for(var r=0;r<s.length;r++){const n=s[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function tp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bu={exports:{}},wl={},Hu={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ea=Symbol.for("react.element"),sp=Symbol.for("react.portal"),rp=Symbol.for("react.fragment"),np=Symbol.for("react.strict_mode"),ap=Symbol.for("react.profiler"),lp=Symbol.for("react.provider"),ip=Symbol.for("react.context"),op=Symbol.for("react.forward_ref"),cp=Symbol.for("react.suspense"),dp=Symbol.for("react.memo"),up=Symbol.for("react.lazy"),Qc=Symbol.iterator;function hp(e){return e===null||typeof e!="object"?null:(e=Qc&&e[Qc]||e["@@iterator"],typeof e=="function"?e:null)}var Wu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vu=Object.assign,Qu={};function Zr(e,s,r){this.props=e,this.context=s,this.refs=Qu,this.updater=r||Wu}Zr.prototype.isReactComponent={};Zr.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};Zr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ku(){}Ku.prototype=Zr.prototype;function $o(e,s,r){this.props=e,this.context=s,this.refs=Qu,this.updater=r||Wu}var Uo=$o.prototype=new Ku;Uo.constructor=$o;Vu(Uo,Zr.prototype);Uo.isPureReactComponent=!0;var Kc=Array.isArray,qu=Object.prototype.hasOwnProperty,Bo={current:null},Gu={key:!0,ref:!0,__self:!0,__source:!0};function Xu(e,s,r){var n,a={},l=null,i=null;if(s!=null)for(n in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)qu.call(s,n)&&!Gu.hasOwnProperty(n)&&(a[n]=s[n]);var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){for(var o=Array(c),d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)a[n]===void 0&&(a[n]=c[n]);return{$$typeof:ea,type:e,key:l,ref:i,props:a,_owner:Bo.current}}function mp(e,s){return{$$typeof:ea,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function Ho(e){return typeof e=="object"&&e!==null&&e.$$typeof===ea}function xp(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return s[r]})}var qc=/\/+/g;function Gl(e,s){return typeof e=="object"&&e!==null&&e.key!=null?xp(""+e.key):s.toString(36)}function Ra(e,s,r,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case ea:case sp:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+Gl(i,0):n,Kc(a)?(r="",e!=null&&(r=e.replace(qc,"$&/")+"/"),Ra(a,s,r,"",function(d){return d})):a!=null&&(Ho(a)&&(a=mp(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(qc,"$&/")+"/")+e)),s.push(a)),1;if(i=0,n=n===""?".":n+":",Kc(e))for(var c=0;c<e.length;c++){l=e[c];var o=n+Gl(l,c);i+=Ra(l,s,r,o,a)}else if(o=hp(e),typeof o=="function")for(e=o.call(e),c=0;!(l=e.next()).done;)l=l.value,o=n+Gl(l,c++),i+=Ra(l,s,r,o,a);else if(l==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function da(e,s,r){if(e==null)return e;var n=[],a=0;return Ra(e,n,"","",function(l){return s.call(r,l,a++)}),n}function pp(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var Be={current:null},Ma={transition:null},fp={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:Ma,ReactCurrentOwner:Bo};function Yu(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:da,forEach:function(e,s,r){da(e,function(){s.apply(this,arguments)},r)},count:function(e){var s=0;return da(e,function(){s++}),s},toArray:function(e){return da(e,function(s){return s})||[]},only:function(e){if(!Ho(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};V.Component=Zr;V.Fragment=rp;V.Profiler=ap;V.PureComponent=$o;V.StrictMode=np;V.Suspense=cp;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fp;V.act=Yu;V.cloneElement=function(e,s,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Vu({},e.props),a=e.key,l=e.ref,i=e._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=Bo.current),s.key!==void 0&&(a=""+s.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(o in s)qu.call(s,o)&&!Gu.hasOwnProperty(o)&&(n[o]=s[o]===void 0&&c!==void 0?c[o]:s[o])}var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){c=Array(o);for(var d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}return{$$typeof:ea,type:e.type,key:a,ref:l,props:n,_owner:i}};V.createContext=function(e){return e={$$typeof:ip,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lp,_context:e},e.Consumer=e};V.createElement=Xu;V.createFactory=function(e){var s=Xu.bind(null,e);return s.type=e,s};V.createRef=function(){return{current:null}};V.forwardRef=function(e){return{$$typeof:op,render:e}};V.isValidElement=Ho;V.lazy=function(e){return{$$typeof:up,_payload:{_status:-1,_result:e},_init:pp}};V.memo=function(e,s){return{$$typeof:dp,type:e,compare:s===void 0?null:s}};V.startTransition=function(e){var s=Ma.transition;Ma.transition={};try{e()}finally{Ma.transition=s}};V.unstable_act=Yu;V.useCallback=function(e,s){return Be.current.useCallback(e,s)};V.useContext=function(e){return Be.current.useContext(e)};V.useDebugValue=function(){};V.useDeferredValue=function(e){return Be.current.useDeferredValue(e)};V.useEffect=function(e,s){return Be.current.useEffect(e,s)};V.useId=function(){return Be.current.useId()};V.useImperativeHandle=function(e,s,r){return Be.current.useImperativeHandle(e,s,r)};V.useInsertionEffect=function(e,s){return Be.current.useInsertionEffect(e,s)};V.useLayoutEffect=function(e,s){return Be.current.useLayoutEffect(e,s)};V.useMemo=function(e,s){return Be.current.useMemo(e,s)};V.useReducer=function(e,s,r){return Be.current.useReducer(e,s,r)};V.useRef=function(e){return Be.current.useRef(e)};V.useState=function(e){return Be.current.useState(e)};V.useSyncExternalStore=function(e,s,r){return Be.current.useSyncExternalStore(e,s,r)};V.useTransition=function(){return Be.current.useTransition()};V.version="18.3.1";Hu.exports=V;var v=Hu.exports;const ne=tp(v),gp=ep({__proto__:null,default:ne},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp=v,vp=Symbol.for("react.element"),jp=Symbol.for("react.fragment"),bp=Object.prototype.hasOwnProperty,Np=yp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wp={key:!0,ref:!0,__self:!0,__source:!0};function Ju(e,s,r){var n,a={},l=null,i=null;r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(n in s)bp.call(s,n)&&!wp.hasOwnProperty(n)&&(a[n]=s[n]);if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:vp,type:e,key:l,ref:i,props:a,_owner:Np.current}}wl.Fragment=jp;wl.jsx=Ju;wl.jsxs=Ju;Bu.exports=wl;var t=Bu.exports,wi={},Zu={exports:{}},st={},eh={exports:{}},th={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s(T,z){var $=T.length;T.push(z);e:for(;0<$;){var re=$-1>>>1,xe=T[re];if(0<a(xe,z))T[re]=z,T[$]=xe,$=re;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var z=T[0],$=T.pop();if($!==z){T[0]=$;e:for(var re=0,xe=T.length,ur=xe>>>1;re<ur;){var Mt=2*(re+1)-1,Kl=T[Mt],Is=Mt+1,oa=T[Is];if(0>a(Kl,$))Is<xe&&0>a(oa,Kl)?(T[re]=oa,T[Is]=$,re=Is):(T[re]=Kl,T[Mt]=$,re=Mt);else if(Is<xe&&0>a(oa,$))T[re]=oa,T[Is]=$,re=Is;else break e}}return z}function a(T,z){var $=T.sortIndex-z.sortIndex;return $!==0?$:T.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,c=i.now();e.unstable_now=function(){return i.now()-c}}var o=[],d=[],u=1,h=null,m=3,g=!1,p=!1,j=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(T){for(var z=r(d);z!==null;){if(z.callback===null)n(d);else if(z.startTime<=T)n(d),z.sortIndex=z.expirationTime,s(o,z);else break;z=r(d)}}function N(T){if(j=!1,y(T),!p)if(r(o)!==null)p=!0,Jt(k);else{var z=r(d);z!==null&&Ie(N,z.startTime-T)}}function k(T,z){p=!1,j&&(j=!1,x(_),_=-1),g=!0;var $=m;try{for(y(z),h=r(o);h!==null&&(!(h.expirationTime>z)||T&&!D());){var re=h.callback;if(typeof re=="function"){h.callback=null,m=h.priorityLevel;var xe=re(h.expirationTime<=z);z=e.unstable_now(),typeof xe=="function"?h.callback=xe:h===r(o)&&n(o),y(z)}else n(o);h=r(o)}if(h!==null)var ur=!0;else{var Mt=r(d);Mt!==null&&Ie(N,Mt.startTime-z),ur=!1}return ur}finally{h=null,m=$,g=!1}}var S=!1,C=null,_=-1,R=5,L=-1;function D(){return!(e.unstable_now()-L<R)}function F(){if(C!==null){var T=e.unstable_now();L=T;var z=!0;try{z=C(!0,T)}finally{z?E():(S=!1,C=null)}}else S=!1}var E;if(typeof f=="function")E=function(){f(F)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,te=U.port2;U.port1.onmessage=F,E=function(){te.postMessage(null)}}else E=function(){w(F,0)};function Jt(T){C=T,S||(S=!0,E())}function Ie(T,z){_=w(function(){T(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){p||g||(p=!0,Jt(k))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(T){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var $=m;m=z;try{return T()}finally{m=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,z){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var $=m;m=T;try{return z()}finally{m=$}},e.unstable_scheduleCallback=function(T,z,$){var re=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?re+$:re):$=re,T){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=$+xe,T={id:u++,callback:z,priorityLevel:T,startTime:$,expirationTime:xe,sortIndex:-1},$>re?(T.sortIndex=$,s(d,T),r(o)===null&&T===r(d)&&(j?(x(_),_=-1):j=!0,Ie(N,$-re))):(T.sortIndex=xe,s(o,T),p||g||(p=!0,Jt(k))),T},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(T){var z=m;return function(){var $=m;m=z;try{return T.apply(this,arguments)}finally{m=$}}}})(th);eh.exports=th;var kp=eh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp=v,tt=kp;function A(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sh=new Set,En={};function or(e,s){Vr(e,s),Vr(e+"Capture",s)}function Vr(e,s){for(En[e]=s,e=0;e<s.length;e++)sh.add(s[e])}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ki=Object.prototype.hasOwnProperty,Sp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gc={},Xc={};function _p(e){return ki.call(Xc,e)?!0:ki.call(Gc,e)?!1:Sp.test(e)?Xc[e]=!0:(Gc[e]=!0,!1)}function Pp(e,s,r,n){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ep(e,s,r,n){if(s===null||typeof s>"u"||Pp(e,s,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function He(e,s,r,n,a,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pe[e]=new He(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];Pe[s]=new He(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pe[e]=new He(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pe[e]=new He(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pe[e]=new He(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pe[e]=new He(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pe[e]=new He(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pe[e]=new He(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pe[e]=new He(e,5,!1,e.toLowerCase(),null,!1,!1)});var Wo=/[\-:]([a-z])/g;function Vo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(Wo,Vo);Pe[s]=new He(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(Wo,Vo);Pe[s]=new He(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(Wo,Vo);Pe[s]=new He(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pe[e]=new He(e,1,!1,e.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new He("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pe[e]=new He(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qo(e,s,r,n){var a=Pe.hasOwnProperty(s)?Pe[s]:null;(a!==null?a.type!==0:n||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Ep(s,r,a,n)&&(r=null),n||a===null?_p(s)&&(r===null?e.removeAttribute(s):e.setAttribute(s,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(s=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(s):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,s,r):e.setAttribute(s,r))))}var Xt=Cp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ua=Symbol.for("react.element"),xr=Symbol.for("react.portal"),pr=Symbol.for("react.fragment"),Ko=Symbol.for("react.strict_mode"),Ci=Symbol.for("react.profiler"),rh=Symbol.for("react.provider"),nh=Symbol.for("react.context"),qo=Symbol.for("react.forward_ref"),Si=Symbol.for("react.suspense"),_i=Symbol.for("react.suspense_list"),Go=Symbol.for("react.memo"),ts=Symbol.for("react.lazy"),ah=Symbol.for("react.offscreen"),Yc=Symbol.iterator;function an(e){return e===null||typeof e!="object"?null:(e=Yc&&e[Yc]||e["@@iterator"],typeof e=="function"?e:null)}var ie=Object.assign,Xl;function pn(e){if(Xl===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Xl=s&&s[1]||""}return`
`+Xl+e}var Yl=!1;function Jl(e,s){if(!e||Yl)return"";Yl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var n=d}Reflect.construct(e,[],s)}else{try{s.call()}catch(d){n=d}e.call(s.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=n.stack.split(`
`),i=a.length-1,c=l.length-1;1<=i&&0<=c&&a[i]!==l[c];)c--;for(;1<=i&&0<=c;i--,c--)if(a[i]!==l[c]){if(i!==1||c!==1)do if(i--,c--,0>c||a[i]!==l[c]){var o=`
`+a[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=i&&0<=c);break}}}finally{Yl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?pn(e):""}function Lp(e){switch(e.tag){case 5:return pn(e.type);case 16:return pn("Lazy");case 13:return pn("Suspense");case 19:return pn("SuspenseList");case 0:case 2:case 15:return e=Jl(e.type,!1),e;case 11:return e=Jl(e.type.render,!1),e;case 1:return e=Jl(e.type,!0),e;default:return""}}function Pi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case pr:return"Fragment";case xr:return"Portal";case Ci:return"Profiler";case Ko:return"StrictMode";case Si:return"Suspense";case _i:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nh:return(e.displayName||"Context")+".Consumer";case rh:return(e._context.displayName||"Context")+".Provider";case qo:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Go:return s=e.displayName||null,s!==null?s:Pi(e.type)||"Memo";case ts:s=e._payload,e=e._init;try{return Pi(e(s))}catch{}}return null}function Ap(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pi(s);case 8:return s===Ko?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ps(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lh(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Rp(e){var s=lh(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),n=""+e[s];if(!e.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,l.call(this,i)}}),Object.defineProperty(e,s,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function ha(e){e._valueTracker||(e._valueTracker=Rp(e))}function ih(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var r=s.getValue(),n="";return e&&(n=lh(e)?e.checked?"true":"false":e.value),e=n,e!==r?(s.setValue(e),!0):!1}function Qa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ei(e,s){var r=s.checked;return ie({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Jc(e,s){var r=s.defaultValue==null?"":s.defaultValue,n=s.checked!=null?s.checked:s.defaultChecked;r=Ps(s.value!=null?s.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function oh(e,s){s=s.checked,s!=null&&Qo(e,"checked",s,!1)}function Li(e,s){oh(e,s);var r=Ps(s.value),n=s.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?Ai(e,s.type,r):s.hasOwnProperty("defaultValue")&&Ai(e,s.type,Ps(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function Zc(e,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var n=s.type;if(!(n!=="submit"&&n!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,r||s===e.value||(e.value=s),e.defaultValue=s}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ai(e,s,r){(s!=="number"||Qa(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var fn=Array.isArray;function _r(e,s,r,n){if(e=e.options,s){s={};for(var a=0;a<r.length;a++)s["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=s.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ps(r),s=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}s!==null||e[a].disabled||(s=e[a])}s!==null&&(s.selected=!0)}}function Ri(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(A(91));return ie({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ed(e,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(A(92));if(fn(r)){if(1<r.length)throw Error(A(93));r=r[0]}s=r}s==null&&(s=""),r=s}e._wrapperState={initialValue:Ps(r)}}function ch(e,s){var r=Ps(s.value),n=Ps(s.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),s.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function td(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function dh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mi(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?dh(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ma,uh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(s,r,n,a)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(ma=ma||document.createElement("div"),ma.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ma.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function Ln(e,s){if(s){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=s;return}}e.textContent=s}var jn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mp=["Webkit","ms","Moz","O"];Object.keys(jn).forEach(function(e){Mp.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),jn[s]=jn[e]})});function hh(e,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||jn.hasOwnProperty(e)&&jn[e]?(""+s).trim():s+"px"}function mh(e,s){e=e.style;for(var r in s)if(s.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=hh(r,s[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Tp=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ti(e,s){if(s){if(Tp[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(A(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(A(61))}if(s.style!=null&&typeof s.style!="object")throw Error(A(62))}}function Ii(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oi=null;function Xo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Di=null,Pr=null,Er=null;function sd(e){if(e=ra(e)){if(typeof Di!="function")throw Error(A(280));var s=e.stateNode;s&&(s=Pl(s),Di(e.stateNode,e.type,s))}}function xh(e){Pr?Er?Er.push(e):Er=[e]:Pr=e}function ph(){if(Pr){var e=Pr,s=Er;if(Er=Pr=null,sd(e),s)for(e=0;e<s.length;e++)sd(s[e])}}function fh(e,s){return e(s)}function gh(){}var Zl=!1;function yh(e,s,r){if(Zl)return e(s,r);Zl=!0;try{return fh(e,s,r)}finally{Zl=!1,(Pr!==null||Er!==null)&&(gh(),ph())}}function An(e,s){var r=e.stateNode;if(r===null)return null;var n=Pl(r);if(n===null)return null;r=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(A(231,s,typeof r));return r}var Fi=!1;if(Qt)try{var ln={};Object.defineProperty(ln,"passive",{get:function(){Fi=!0}}),window.addEventListener("test",ln,ln),window.removeEventListener("test",ln,ln)}catch{Fi=!1}function Ip(e,s,r,n,a,l,i,c,o){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(u){this.onError(u)}}var bn=!1,Ka=null,qa=!1,zi=null,Op={onError:function(e){bn=!0,Ka=e}};function Dp(e,s,r,n,a,l,i,c,o){bn=!1,Ka=null,Ip.apply(Op,arguments)}function Fp(e,s,r,n,a,l,i,c,o){if(Dp.apply(this,arguments),bn){if(bn){var d=Ka;bn=!1,Ka=null}else throw Error(A(198));qa||(qa=!0,zi=d)}}function cr(e){var s=e,r=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(r=s.return),e=s.return;while(e)}return s.tag===3?r:null}function vh(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function rd(e){if(cr(e)!==e)throw Error(A(188))}function zp(e){var s=e.alternate;if(!s){if(s=cr(e),s===null)throw Error(A(188));return s!==e?null:e}for(var r=e,n=s;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return rd(a),e;if(l===n)return rd(a),s;l=l.sibling}throw Error(A(188))}if(r.return!==n.return)r=a,n=l;else{for(var i=!1,c=a.child;c;){if(c===r){i=!0,r=a,n=l;break}if(c===n){i=!0,n=a,r=l;break}c=c.sibling}if(!i){for(c=l.child;c;){if(c===r){i=!0,r=l,n=a;break}if(c===n){i=!0,n=l,r=a;break}c=c.sibling}if(!i)throw Error(A(189))}}if(r.alternate!==n)throw Error(A(190))}if(r.tag!==3)throw Error(A(188));return r.stateNode.current===r?e:s}function jh(e){return e=zp(e),e!==null?bh(e):null}function bh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=bh(e);if(s!==null)return s;e=e.sibling}return null}var Nh=tt.unstable_scheduleCallback,nd=tt.unstable_cancelCallback,$p=tt.unstable_shouldYield,Up=tt.unstable_requestPaint,he=tt.unstable_now,Bp=tt.unstable_getCurrentPriorityLevel,Yo=tt.unstable_ImmediatePriority,wh=tt.unstable_UserBlockingPriority,Ga=tt.unstable_NormalPriority,Hp=tt.unstable_LowPriority,kh=tt.unstable_IdlePriority,kl=null,Lt=null;function Wp(e){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(kl,e,void 0,(e.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:Kp,Vp=Math.log,Qp=Math.LN2;function Kp(e){return e>>>=0,e===0?32:31-(Vp(e)/Qp|0)|0}var xa=64,pa=4194304;function gn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xa(e,s){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,i=r&268435455;if(i!==0){var c=i&~a;c!==0?n=gn(c):(l&=i,l!==0&&(n=gn(l)))}else i=r&~a,i!==0?n=gn(i):l!==0&&(n=gn(l));if(n===0)return 0;if(s!==0&&s!==n&&!(s&a)&&(a=n&-n,l=s&-s,a>=l||a===16&&(l&4194240)!==0))return s;if(n&4&&(n|=r&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=n;0<s;)r=31-vt(s),a=1<<r,n|=e[r],s&=~a;return n}function qp(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gp(e,s){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-vt(l),c=1<<i,o=a[i];o===-1?(!(c&r)||c&n)&&(a[i]=qp(c,s)):o<=s&&(e.expiredLanes|=c),l&=~c}}function $i(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ch(){var e=xa;return xa<<=1,!(xa&4194240)&&(xa=64),e}function ei(e){for(var s=[],r=0;31>r;r++)s.push(e);return s}function ta(e,s,r){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-vt(s),e[s]=r}function Xp(e,s){var r=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-vt(r),l=1<<a;s[a]=0,n[a]=-1,e[a]=-1,r&=~l}}function Jo(e,s){var r=e.entangledLanes|=s;for(e=e.entanglements;r;){var n=31-vt(r),a=1<<n;a&s|e[n]&s&&(e[n]|=s),r&=~a}}var X=0;function Sh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _h,Zo,Ph,Eh,Lh,Ui=!1,fa=[],ys=null,vs=null,js=null,Rn=new Map,Mn=new Map,rs=[],Yp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ad(e,s){switch(e){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":Rn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mn.delete(s.pointerId)}}function on(e,s,r,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:s,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},s!==null&&(s=ra(s),s!==null&&Zo(s)),e):(e.eventSystemFlags|=n,s=e.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),e)}function Jp(e,s,r,n,a){switch(s){case"focusin":return ys=on(ys,e,s,r,n,a),!0;case"dragenter":return vs=on(vs,e,s,r,n,a),!0;case"mouseover":return js=on(js,e,s,r,n,a),!0;case"pointerover":var l=a.pointerId;return Rn.set(l,on(Rn.get(l)||null,e,s,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,Mn.set(l,on(Mn.get(l)||null,e,s,r,n,a)),!0}return!1}function Ah(e){var s=Fs(e.target);if(s!==null){var r=cr(s);if(r!==null){if(s=r.tag,s===13){if(s=vh(r),s!==null){e.blockedOn=s,Lh(e.priority,function(){Ph(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ta(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var r=Bi(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Oi=n,r.target.dispatchEvent(n),Oi=null}else return s=ra(r),s!==null&&Zo(s),e.blockedOn=r,!1;s.shift()}return!0}function ld(e,s,r){Ta(e)&&r.delete(s)}function Zp(){Ui=!1,ys!==null&&Ta(ys)&&(ys=null),vs!==null&&Ta(vs)&&(vs=null),js!==null&&Ta(js)&&(js=null),Rn.forEach(ld),Mn.forEach(ld)}function cn(e,s){e.blockedOn===s&&(e.blockedOn=null,Ui||(Ui=!0,tt.unstable_scheduleCallback(tt.unstable_NormalPriority,Zp)))}function Tn(e){function s(a){return cn(a,e)}if(0<fa.length){cn(fa[0],e);for(var r=1;r<fa.length;r++){var n=fa[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ys!==null&&cn(ys,e),vs!==null&&cn(vs,e),js!==null&&cn(js,e),Rn.forEach(s),Mn.forEach(s),r=0;r<rs.length;r++)n=rs[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<rs.length&&(r=rs[0],r.blockedOn===null);)Ah(r),r.blockedOn===null&&rs.shift()}var Lr=Xt.ReactCurrentBatchConfig,Ya=!0;function ef(e,s,r,n){var a=X,l=Lr.transition;Lr.transition=null;try{X=1,ec(e,s,r,n)}finally{X=a,Lr.transition=l}}function tf(e,s,r,n){var a=X,l=Lr.transition;Lr.transition=null;try{X=4,ec(e,s,r,n)}finally{X=a,Lr.transition=l}}function ec(e,s,r,n){if(Ya){var a=Bi(e,s,r,n);if(a===null)di(e,s,n,Ja,r),ad(e,n);else if(Jp(a,e,s,r,n))n.stopPropagation();else if(ad(e,n),s&4&&-1<Yp.indexOf(e)){for(;a!==null;){var l=ra(a);if(l!==null&&_h(l),l=Bi(e,s,r,n),l===null&&di(e,s,n,Ja,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else di(e,s,n,null,r)}}var Ja=null;function Bi(e,s,r,n){if(Ja=null,e=Xo(n),e=Fs(e),e!==null)if(s=cr(e),s===null)e=null;else if(r=s.tag,r===13){if(e=vh(s),e!==null)return e;e=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return Ja=e,null}function Rh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bp()){case Yo:return 1;case wh:return 4;case Ga:case Hp:return 16;case kh:return 536870912;default:return 16}default:return 16}}var xs=null,tc=null,Ia=null;function Mh(){if(Ia)return Ia;var e,s=tc,r=s.length,n,a="value"in xs?xs.value:xs.textContent,l=a.length;for(e=0;e<r&&s[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&s[r-n]===a[l-n];n++);return Ia=a.slice(e,1<n?1-n:void 0)}function Oa(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function ga(){return!0}function id(){return!1}function rt(e){function s(r,n,a,l,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ga:id,this.isPropagationStopped=id,this}return ie(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),s}var en={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sc=rt(en),sa=ie({},en,{view:0,detail:0}),sf=rt(sa),ti,si,dn,Cl=ie({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&e.type==="mousemove"?(ti=e.screenX-dn.screenX,si=e.screenY-dn.screenY):si=ti=0,dn=e),ti)},movementY:function(e){return"movementY"in e?e.movementY:si}}),od=rt(Cl),rf=ie({},Cl,{dataTransfer:0}),nf=rt(rf),af=ie({},sa,{relatedTarget:0}),ri=rt(af),lf=ie({},en,{animationName:0,elapsedTime:0,pseudoElement:0}),of=rt(lf),cf=ie({},en,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),df=rt(cf),uf=ie({},en,{data:0}),cd=rt(uf),hf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pf(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=xf[e])?!!s[e]:!1}function rc(){return pf}var ff=ie({},sa,{key:function(e){if(e.key){var s=hf[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Oa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rc,charCode:function(e){return e.type==="keypress"?Oa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Oa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gf=rt(ff),yf=ie({},Cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dd=rt(yf),vf=ie({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rc}),jf=rt(vf),bf=ie({},en,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nf=rt(bf),wf=ie({},Cl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kf=rt(wf),Cf=[9,13,27,32],nc=Qt&&"CompositionEvent"in window,Nn=null;Qt&&"documentMode"in document&&(Nn=document.documentMode);var Sf=Qt&&"TextEvent"in window&&!Nn,Th=Qt&&(!nc||Nn&&8<Nn&&11>=Nn),ud=" ",hd=!1;function Ih(e,s){switch(e){case"keyup":return Cf.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fr=!1;function _f(e,s){switch(e){case"compositionend":return Oh(s);case"keypress":return s.which!==32?null:(hd=!0,ud);case"textInput":return e=s.data,e===ud&&hd?null:e;default:return null}}function Pf(e,s){if(fr)return e==="compositionend"||!nc&&Ih(e,s)?(e=Mh(),Ia=tc=xs=null,fr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Th&&s.locale!=="ko"?null:s.data;default:return null}}var Ef={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function md(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!Ef[e.type]:s==="textarea"}function Dh(e,s,r,n){xh(n),s=Za(s,"onChange"),0<s.length&&(r=new sc("onChange","change",null,r,n),e.push({event:r,listeners:s}))}var wn=null,In=null;function Lf(e){qh(e,0)}function Sl(e){var s=vr(e);if(ih(s))return e}function Af(e,s){if(e==="change")return s}var Fh=!1;if(Qt){var ni;if(Qt){var ai="oninput"in document;if(!ai){var xd=document.createElement("div");xd.setAttribute("oninput","return;"),ai=typeof xd.oninput=="function"}ni=ai}else ni=!1;Fh=ni&&(!document.documentMode||9<document.documentMode)}function pd(){wn&&(wn.detachEvent("onpropertychange",zh),In=wn=null)}function zh(e){if(e.propertyName==="value"&&Sl(In)){var s=[];Dh(s,In,e,Xo(e)),yh(Lf,s)}}function Rf(e,s,r){e==="focusin"?(pd(),wn=s,In=r,wn.attachEvent("onpropertychange",zh)):e==="focusout"&&pd()}function Mf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sl(In)}function Tf(e,s){if(e==="click")return Sl(s)}function If(e,s){if(e==="input"||e==="change")return Sl(s)}function Of(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var bt=typeof Object.is=="function"?Object.is:Of;function On(e,s){if(bt(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var r=Object.keys(e),n=Object.keys(s);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!ki.call(s,a)||!bt(e[a],s[a]))return!1}return!0}function fd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gd(e,s){var r=fd(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=s&&n>=s)return{node:r,offset:s-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fd(r)}}function $h(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?$h(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function Uh(){for(var e=window,s=Qa();s instanceof e.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)e=s.contentWindow;else break;s=Qa(e.document)}return s}function ac(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function Df(e){var s=Uh(),r=e.focusedElem,n=e.selectionRange;if(s!==r&&r&&r.ownerDocument&&$h(r.ownerDocument.documentElement,r)){if(n!==null&&ac(r)){if(s=n.start,e=n.end,e===void 0&&(e=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(e,r.value.length);else if(e=(s=r.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=gd(r,l);var i=gd(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(s),e.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),e.addRange(s)))}}for(s=[],e=r;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)e=s[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ff=Qt&&"documentMode"in document&&11>=document.documentMode,gr=null,Hi=null,kn=null,Wi=!1;function yd(e,s,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wi||gr==null||gr!==Qa(n)||(n=gr,"selectionStart"in n&&ac(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),kn&&On(kn,n)||(kn=n,n=Za(Hi,"onSelect"),0<n.length&&(s=new sc("onSelect","select",null,s,r),e.push({event:s,listeners:n}),s.target=gr)))}function ya(e,s){var r={};return r[e.toLowerCase()]=s.toLowerCase(),r["Webkit"+e]="webkit"+s,r["Moz"+e]="moz"+s,r}var yr={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},li={},Bh={};Qt&&(Bh=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function _l(e){if(li[e])return li[e];if(!yr[e])return e;var s=yr[e],r;for(r in s)if(s.hasOwnProperty(r)&&r in Bh)return li[e]=s[r];return e}var Hh=_l("animationend"),Wh=_l("animationiteration"),Vh=_l("animationstart"),Qh=_l("transitionend"),Kh=new Map,vd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ls(e,s){Kh.set(e,s),or(s,[e])}for(var ii=0;ii<vd.length;ii++){var oi=vd[ii],zf=oi.toLowerCase(),$f=oi[0].toUpperCase()+oi.slice(1);Ls(zf,"on"+$f)}Ls(Hh,"onAnimationEnd");Ls(Wh,"onAnimationIteration");Ls(Vh,"onAnimationStart");Ls("dblclick","onDoubleClick");Ls("focusin","onFocus");Ls("focusout","onBlur");Ls(Qh,"onTransitionEnd");Vr("onMouseEnter",["mouseout","mouseover"]);Vr("onMouseLeave",["mouseout","mouseover"]);Vr("onPointerEnter",["pointerout","pointerover"]);Vr("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uf=new Set("cancel close invalid load scroll toggle".split(" ").concat(yn));function jd(e,s,r){var n=e.type||"unknown-event";e.currentTarget=r,Fp(n,s,void 0,e),e.currentTarget=null}function qh(e,s){s=(s&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var l=void 0;if(s)for(var i=n.length-1;0<=i;i--){var c=n[i],o=c.instance,d=c.currentTarget;if(c=c.listener,o!==l&&a.isPropagationStopped())break e;jd(a,c,d),l=o}else for(i=0;i<n.length;i++){if(c=n[i],o=c.instance,d=c.currentTarget,c=c.listener,o!==l&&a.isPropagationStopped())break e;jd(a,c,d),l=o}}}if(qa)throw e=zi,qa=!1,zi=null,e}function J(e,s){var r=s[Gi];r===void 0&&(r=s[Gi]=new Set);var n=e+"__bubble";r.has(n)||(Gh(s,e,2,!1),r.add(n))}function ci(e,s,r){var n=0;s&&(n|=4),Gh(r,e,n,s)}var va="_reactListening"+Math.random().toString(36).slice(2);function Dn(e){if(!e[va]){e[va]=!0,sh.forEach(function(r){r!=="selectionchange"&&(Uf.has(r)||ci(r,!1,e),ci(r,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[va]||(s[va]=!0,ci("selectionchange",!1,s))}}function Gh(e,s,r,n){switch(Rh(s)){case 1:var a=ef;break;case 4:a=tf;break;default:a=ec}r=a.bind(null,s,r,e),a=void 0,!Fi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(s,r,{capture:!0,passive:a}):e.addEventListener(s,r,!0):a!==void 0?e.addEventListener(s,r,{passive:a}):e.addEventListener(s,r,!1)}function di(e,s,r,n,a){var l=n;if(!(s&1)&&!(s&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var c=n.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var o=i.tag;if((o===3||o===4)&&(o=i.stateNode.containerInfo,o===a||o.nodeType===8&&o.parentNode===a))return;i=i.return}for(;c!==null;){if(i=Fs(c),i===null)return;if(o=i.tag,o===5||o===6){n=l=i;continue e}c=c.parentNode}}n=n.return}yh(function(){var d=l,u=Xo(r),h=[];e:{var m=Kh.get(e);if(m!==void 0){var g=sc,p=e;switch(e){case"keypress":if(Oa(r)===0)break e;case"keydown":case"keyup":g=gf;break;case"focusin":p="focus",g=ri;break;case"focusout":p="blur",g=ri;break;case"beforeblur":case"afterblur":g=ri;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=nf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=jf;break;case Hh:case Wh:case Vh:g=of;break;case Qh:g=Nf;break;case"scroll":g=sf;break;case"wheel":g=kf;break;case"copy":case"cut":case"paste":g=df;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=dd}var j=(s&4)!==0,w=!j&&e==="scroll",x=j?m!==null?m+"Capture":null:m;j=[];for(var f=d,y;f!==null;){y=f;var N=y.stateNode;if(y.tag===5&&N!==null&&(y=N,x!==null&&(N=An(f,x),N!=null&&j.push(Fn(f,N,y)))),w)break;f=f.return}0<j.length&&(m=new g(m,p,null,r,u),h.push({event:m,listeners:j}))}}if(!(s&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&r!==Oi&&(p=r.relatedTarget||r.fromElement)&&(Fs(p)||p[Kt]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(p=r.relatedTarget||r.toElement,g=d,p=p?Fs(p):null,p!==null&&(w=cr(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=d),g!==p)){if(j=od,N="onMouseLeave",x="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(j=dd,N="onPointerLeave",x="onPointerEnter",f="pointer"),w=g==null?m:vr(g),y=p==null?m:vr(p),m=new j(N,f+"leave",g,r,u),m.target=w,m.relatedTarget=y,N=null,Fs(u)===d&&(j=new j(x,f+"enter",p,r,u),j.target=y,j.relatedTarget=w,N=j),w=N,g&&p)t:{for(j=g,x=p,f=0,y=j;y;y=hr(y))f++;for(y=0,N=x;N;N=hr(N))y++;for(;0<f-y;)j=hr(j),f--;for(;0<y-f;)x=hr(x),y--;for(;f--;){if(j===x||x!==null&&j===x.alternate)break t;j=hr(j),x=hr(x)}j=null}else j=null;g!==null&&bd(h,m,g,j,!1),p!==null&&w!==null&&bd(h,w,p,j,!0)}}e:{if(m=d?vr(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var k=Af;else if(md(m))if(Fh)k=If;else{k=Mf;var S=Rf}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=Tf);if(k&&(k=k(e,d))){Dh(h,k,r,u);break e}S&&S(e,m,d),e==="focusout"&&(S=m._wrapperState)&&S.controlled&&m.type==="number"&&Ai(m,"number",m.value)}switch(S=d?vr(d):window,e){case"focusin":(md(S)||S.contentEditable==="true")&&(gr=S,Hi=d,kn=null);break;case"focusout":kn=Hi=gr=null;break;case"mousedown":Wi=!0;break;case"contextmenu":case"mouseup":case"dragend":Wi=!1,yd(h,r,u);break;case"selectionchange":if(Ff)break;case"keydown":case"keyup":yd(h,r,u)}var C;if(nc)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else fr?Ih(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Th&&r.locale!=="ko"&&(fr||_!=="onCompositionStart"?_==="onCompositionEnd"&&fr&&(C=Mh()):(xs=u,tc="value"in xs?xs.value:xs.textContent,fr=!0)),S=Za(d,_),0<S.length&&(_=new cd(_,e,null,r,u),h.push({event:_,listeners:S}),C?_.data=C:(C=Oh(r),C!==null&&(_.data=C)))),(C=Sf?_f(e,r):Pf(e,r))&&(d=Za(d,"onBeforeInput"),0<d.length&&(u=new cd("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=C))}qh(h,s)})}function Fn(e,s,r){return{instance:e,listener:s,currentTarget:r}}function Za(e,s){for(var r=s+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=An(e,r),l!=null&&n.unshift(Fn(e,l,a)),l=An(e,s),l!=null&&n.push(Fn(e,l,a))),e=e.return}return n}function hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bd(e,s,r,n,a){for(var l=s._reactName,i=[];r!==null&&r!==n;){var c=r,o=c.alternate,d=c.stateNode;if(o!==null&&o===n)break;c.tag===5&&d!==null&&(c=d,a?(o=An(r,l),o!=null&&i.unshift(Fn(r,o,c))):a||(o=An(r,l),o!=null&&i.push(Fn(r,o,c)))),r=r.return}i.length!==0&&e.push({event:s,listeners:i})}var Bf=/\r\n?/g,Hf=/\u0000|\uFFFD/g;function Nd(e){return(typeof e=="string"?e:""+e).replace(Bf,`
`).replace(Hf,"")}function ja(e,s,r){if(s=Nd(s),Nd(e)!==s&&r)throw Error(A(425))}function el(){}var Vi=null,Qi=null;function Ki(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var qi=typeof setTimeout=="function"?setTimeout:void 0,Wf=typeof clearTimeout=="function"?clearTimeout:void 0,wd=typeof Promise=="function"?Promise:void 0,Vf=typeof queueMicrotask=="function"?queueMicrotask:typeof wd<"u"?function(e){return wd.resolve(null).then(e).catch(Qf)}:qi;function Qf(e){setTimeout(function(){throw e})}function ui(e,s){var r=s,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Tn(s);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Tn(s)}function bs(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function kd(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return e;s--}else r==="/$"&&s++}e=e.previousSibling}return null}var tn=Math.random().toString(36).slice(2),Et="__reactFiber$"+tn,zn="__reactProps$"+tn,Kt="__reactContainer$"+tn,Gi="__reactEvents$"+tn,Kf="__reactListeners$"+tn,qf="__reactHandles$"+tn;function Fs(e){var s=e[Et];if(s)return s;for(var r=e.parentNode;r;){if(s=r[Kt]||r[Et]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(e=kd(e);e!==null;){if(r=e[Et])return r;e=kd(e)}return s}e=r,r=e.parentNode}return null}function ra(e){return e=e[Et]||e[Kt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function Pl(e){return e[zn]||null}var Xi=[],jr=-1;function As(e){return{current:e}}function Z(e){0>jr||(e.current=Xi[jr],Xi[jr]=null,jr--)}function Y(e,s){jr++,Xi[jr]=e.current,e.current=s}var Es={},Me=As(Es),qe=As(!1),er=Es;function Qr(e,s){var r=e.type.contextTypes;if(!r)return Es;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===s)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=s[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ge(e){return e=e.childContextTypes,e!=null}function tl(){Z(qe),Z(Me)}function Cd(e,s,r){if(Me.current!==Es)throw Error(A(168));Y(Me,s),Y(qe,r)}function Xh(e,s,r){var n=e.stateNode;if(s=s.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(A(108,Ap(e)||"Unknown",a));return ie({},r,n)}function sl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Es,er=Me.current,Y(Me,e),Y(qe,qe.current),!0}function Sd(e,s,r){var n=e.stateNode;if(!n)throw Error(A(169));r?(e=Xh(e,s,er),n.__reactInternalMemoizedMergedChildContext=e,Z(qe),Z(Me),Y(Me,e)):Z(qe),Y(qe,r)}var Ot=null,El=!1,hi=!1;function Yh(e){Ot===null?Ot=[e]:Ot.push(e)}function Gf(e){El=!0,Yh(e)}function Rs(){if(!hi&&Ot!==null){hi=!0;var e=0,s=X;try{var r=Ot;for(X=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ot=null,El=!1}catch(a){throw Ot!==null&&(Ot=Ot.slice(e+1)),Nh(Yo,Rs),a}finally{X=s,hi=!1}}return null}var br=[],Nr=0,rl=null,nl=0,lt=[],it=0,tr=null,Ut=1,Bt="";function Os(e,s){br[Nr++]=nl,br[Nr++]=rl,rl=e,nl=s}function Jh(e,s,r){lt[it++]=Ut,lt[it++]=Bt,lt[it++]=tr,tr=e;var n=Ut;e=Bt;var a=32-vt(n)-1;n&=~(1<<a),r+=1;var l=32-vt(s)+a;if(30<l){var i=a-a%5;l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Ut=1<<32-vt(s)+a|r<<a|n,Bt=l+e}else Ut=1<<l|r<<a|n,Bt=e}function lc(e){e.return!==null&&(Os(e,1),Jh(e,1,0))}function ic(e){for(;e===rl;)rl=br[--Nr],br[Nr]=null,nl=br[--Nr],br[Nr]=null;for(;e===tr;)tr=lt[--it],lt[it]=null,Bt=lt[--it],lt[it]=null,Ut=lt[--it],lt[it]=null}var et=null,Ze=null,se=!1,yt=null;function Zh(e,s){var r=ot(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=e,s=e.deletions,s===null?(e.deletions=[r],e.flags|=16):s.push(r)}function _d(e,s){switch(e.tag){case 5:var r=e.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,et=e,Ze=bs(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,et=e,Ze=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=tr!==null?{id:Ut,overflow:Bt}:null,e.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=ot(18,null,null,0),r.stateNode=s,r.return=e,e.child=r,et=e,Ze=null,!0):!1;default:return!1}}function Yi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ji(e){if(se){var s=Ze;if(s){var r=s;if(!_d(e,s)){if(Yi(e))throw Error(A(418));s=bs(r.nextSibling);var n=et;s&&_d(e,s)?Zh(n,r):(e.flags=e.flags&-4097|2,se=!1,et=e)}}else{if(Yi(e))throw Error(A(418));e.flags=e.flags&-4097|2,se=!1,et=e}}}function Pd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;et=e}function ba(e){if(e!==et)return!1;if(!se)return Pd(e),se=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!Ki(e.type,e.memoizedProps)),s&&(s=Ze)){if(Yi(e))throw em(),Error(A(418));for(;s;)Zh(e,s),s=bs(s.nextSibling)}if(Pd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(s===0){Ze=bs(e.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}e=e.nextSibling}Ze=null}}else Ze=et?bs(e.stateNode.nextSibling):null;return!0}function em(){for(var e=Ze;e;)e=bs(e.nextSibling)}function Kr(){Ze=et=null,se=!1}function oc(e){yt===null?yt=[e]:yt.push(e)}var Xf=Xt.ReactCurrentBatchConfig;function un(e,s,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(A(309));var n=r.stateNode}if(!n)throw Error(A(147,e));var a=n,l=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var c=a.refs;i===null?delete c[l]:c[l]=i},s._stringRef=l,s)}if(typeof e!="string")throw Error(A(284));if(!r._owner)throw Error(A(290,e))}return e}function Na(e,s){throw e=Object.prototype.toString.call(s),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function Ed(e){var s=e._init;return s(e._payload)}function tm(e){function s(x,f){if(e){var y=x.deletions;y===null?(x.deletions=[f],x.flags|=16):y.push(f)}}function r(x,f){if(!e)return null;for(;f!==null;)s(x,f),f=f.sibling;return null}function n(x,f){for(x=new Map;f!==null;)f.key!==null?x.set(f.key,f):x.set(f.index,f),f=f.sibling;return x}function a(x,f){return x=Cs(x,f),x.index=0,x.sibling=null,x}function l(x,f,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<f?(x.flags|=2,f):y):(x.flags|=2,f)):(x.flags|=1048576,f)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function c(x,f,y,N){return f===null||f.tag!==6?(f=vi(y,x.mode,N),f.return=x,f):(f=a(f,y),f.return=x,f)}function o(x,f,y,N){var k=y.type;return k===pr?u(x,f,y.props.children,N,y.key):f!==null&&(f.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ts&&Ed(k)===f.type)?(N=a(f,y.props),N.ref=un(x,f,y),N.return=x,N):(N=Ha(y.type,y.key,y.props,null,x.mode,N),N.ref=un(x,f,y),N.return=x,N)}function d(x,f,y,N){return f===null||f.tag!==4||f.stateNode.containerInfo!==y.containerInfo||f.stateNode.implementation!==y.implementation?(f=ji(y,x.mode,N),f.return=x,f):(f=a(f,y.children||[]),f.return=x,f)}function u(x,f,y,N,k){return f===null||f.tag!==7?(f=Js(y,x.mode,N,k),f.return=x,f):(f=a(f,y),f.return=x,f)}function h(x,f,y){if(typeof f=="string"&&f!==""||typeof f=="number")return f=vi(""+f,x.mode,y),f.return=x,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ua:return y=Ha(f.type,f.key,f.props,null,x.mode,y),y.ref=un(x,null,f),y.return=x,y;case xr:return f=ji(f,x.mode,y),f.return=x,f;case ts:var N=f._init;return h(x,N(f._payload),y)}if(fn(f)||an(f))return f=Js(f,x.mode,y,null),f.return=x,f;Na(x,f)}return null}function m(x,f,y,N){var k=f!==null?f.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:c(x,f,""+y,N);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ua:return y.key===k?o(x,f,y,N):null;case xr:return y.key===k?d(x,f,y,N):null;case ts:return k=y._init,m(x,f,k(y._payload),N)}if(fn(y)||an(y))return k!==null?null:u(x,f,y,N,null);Na(x,y)}return null}function g(x,f,y,N,k){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(y)||null,c(f,x,""+N,k);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ua:return x=x.get(N.key===null?y:N.key)||null,o(f,x,N,k);case xr:return x=x.get(N.key===null?y:N.key)||null,d(f,x,N,k);case ts:var S=N._init;return g(x,f,y,S(N._payload),k)}if(fn(N)||an(N))return x=x.get(y)||null,u(f,x,N,k,null);Na(f,N)}return null}function p(x,f,y,N){for(var k=null,S=null,C=f,_=f=0,R=null;C!==null&&_<y.length;_++){C.index>_?(R=C,C=null):R=C.sibling;var L=m(x,C,y[_],N);if(L===null){C===null&&(C=R);break}e&&C&&L.alternate===null&&s(x,C),f=l(L,f,_),S===null?k=L:S.sibling=L,S=L,C=R}if(_===y.length)return r(x,C),se&&Os(x,_),k;if(C===null){for(;_<y.length;_++)C=h(x,y[_],N),C!==null&&(f=l(C,f,_),S===null?k=C:S.sibling=C,S=C);return se&&Os(x,_),k}for(C=n(x,C);_<y.length;_++)R=g(C,x,_,y[_],N),R!==null&&(e&&R.alternate!==null&&C.delete(R.key===null?_:R.key),f=l(R,f,_),S===null?k=R:S.sibling=R,S=R);return e&&C.forEach(function(D){return s(x,D)}),se&&Os(x,_),k}function j(x,f,y,N){var k=an(y);if(typeof k!="function")throw Error(A(150));if(y=k.call(y),y==null)throw Error(A(151));for(var S=k=null,C=f,_=f=0,R=null,L=y.next();C!==null&&!L.done;_++,L=y.next()){C.index>_?(R=C,C=null):R=C.sibling;var D=m(x,C,L.value,N);if(D===null){C===null&&(C=R);break}e&&C&&D.alternate===null&&s(x,C),f=l(D,f,_),S===null?k=D:S.sibling=D,S=D,C=R}if(L.done)return r(x,C),se&&Os(x,_),k;if(C===null){for(;!L.done;_++,L=y.next())L=h(x,L.value,N),L!==null&&(f=l(L,f,_),S===null?k=L:S.sibling=L,S=L);return se&&Os(x,_),k}for(C=n(x,C);!L.done;_++,L=y.next())L=g(C,x,_,L.value,N),L!==null&&(e&&L.alternate!==null&&C.delete(L.key===null?_:L.key),f=l(L,f,_),S===null?k=L:S.sibling=L,S=L);return e&&C.forEach(function(F){return s(x,F)}),se&&Os(x,_),k}function w(x,f,y,N){if(typeof y=="object"&&y!==null&&y.type===pr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ua:e:{for(var k=y.key,S=f;S!==null;){if(S.key===k){if(k=y.type,k===pr){if(S.tag===7){r(x,S.sibling),f=a(S,y.props.children),f.return=x,x=f;break e}}else if(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ts&&Ed(k)===S.type){r(x,S.sibling),f=a(S,y.props),f.ref=un(x,S,y),f.return=x,x=f;break e}r(x,S);break}else s(x,S);S=S.sibling}y.type===pr?(f=Js(y.props.children,x.mode,N,y.key),f.return=x,x=f):(N=Ha(y.type,y.key,y.props,null,x.mode,N),N.ref=un(x,f,y),N.return=x,x=N)}return i(x);case xr:e:{for(S=y.key;f!==null;){if(f.key===S)if(f.tag===4&&f.stateNode.containerInfo===y.containerInfo&&f.stateNode.implementation===y.implementation){r(x,f.sibling),f=a(f,y.children||[]),f.return=x,x=f;break e}else{r(x,f);break}else s(x,f);f=f.sibling}f=ji(y,x.mode,N),f.return=x,x=f}return i(x);case ts:return S=y._init,w(x,f,S(y._payload),N)}if(fn(y))return p(x,f,y,N);if(an(y))return j(x,f,y,N);Na(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,f!==null&&f.tag===6?(r(x,f.sibling),f=a(f,y),f.return=x,x=f):(r(x,f),f=vi(y,x.mode,N),f.return=x,x=f),i(x)):r(x,f)}return w}var qr=tm(!0),sm=tm(!1),al=As(null),ll=null,wr=null,cc=null;function dc(){cc=wr=ll=null}function uc(e){var s=al.current;Z(al),e._currentValue=s}function Zi(e,s,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),e===r)break;e=e.return}}function Ar(e,s){ll=e,cc=wr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(Ke=!0),e.firstContext=null)}function dt(e){var s=e._currentValue;if(cc!==e)if(e={context:e,memoizedValue:s,next:null},wr===null){if(ll===null)throw Error(A(308));wr=e,ll.dependencies={lanes:0,firstContext:e}}else wr=wr.next=e;return s}var zs=null;function hc(e){zs===null?zs=[e]:zs.push(e)}function rm(e,s,r,n){var a=s.interleaved;return a===null?(r.next=r,hc(s)):(r.next=a.next,a.next=r),s.interleaved=r,qt(e,n)}function qt(e,s){e.lanes|=s;var r=e.alternate;for(r!==null&&(r.lanes|=s),r=e,e=e.return;e!==null;)e.childLanes|=s,r=e.alternate,r!==null&&(r.childLanes|=s),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ss=!1;function mc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nm(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ht(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function Ns(e,s,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,K&2){var a=n.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s,qt(e,r)}return a=n.interleaved,a===null?(s.next=s,hc(n)):(s.next=a.next,a.next=s),n.interleaved=s,qt(e,r)}function Da(e,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var n=s.lanes;n&=e.pendingLanes,r|=n,s.lanes=r,Jo(e,r)}}function Ld(e,s){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?a=l=s:l=l.next=s}else a=l=s;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=s:e.next=s,r.lastBaseUpdate=s}function il(e,s,r,n){var a=e.updateQueue;ss=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var o=c,d=o.next;o.next=null,i===null?l=d:i.next=d,i=o;var u=e.alternate;u!==null&&(u=u.updateQueue,c=u.lastBaseUpdate,c!==i&&(c===null?u.firstBaseUpdate=d:c.next=d,u.lastBaseUpdate=o))}if(l!==null){var h=a.baseState;i=0,u=d=o=null,c=l;do{var m=c.lane,g=c.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var p=e,j=c;switch(m=s,g=r,j.tag){case 1:if(p=j.payload,typeof p=="function"){h=p.call(g,h,m);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=j.payload,m=typeof p=="function"?p.call(g,h,m):p,m==null)break e;h=ie({},h,m);break e;case 2:ss=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[c]:m.push(c))}else g={eventTime:g,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},u===null?(d=u=g,o=h):u=u.next=g,i|=m;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;m=c,c=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(o=h),a.baseState=o,a.firstBaseUpdate=d,a.lastBaseUpdate=u,s=a.shared.interleaved,s!==null){a=s;do i|=a.lane,a=a.next;while(a!==s)}else l===null&&(a.shared.lanes=0);rr|=i,e.lanes=i,e.memoizedState=h}}function Ad(e,s,r){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var n=e[s],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(A(191,a));a.call(n)}}}var na={},At=As(na),$n=As(na),Un=As(na);function $s(e){if(e===na)throw Error(A(174));return e}function xc(e,s){switch(Y(Un,s),Y($n,e),Y(At,na),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Mi(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=Mi(s,e)}Z(At),Y(At,s)}function Gr(){Z(At),Z($n),Z(Un)}function am(e){$s(Un.current);var s=$s(At.current),r=Mi(s,e.type);s!==r&&(Y($n,e),Y(At,r))}function pc(e){$n.current===e&&(Z(At),Z($n))}var ae=As(0);function ol(e){for(var s=e;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var mi=[];function fc(){for(var e=0;e<mi.length;e++)mi[e]._workInProgressVersionPrimary=null;mi.length=0}var Fa=Xt.ReactCurrentDispatcher,xi=Xt.ReactCurrentBatchConfig,sr=0,le=null,fe=null,Ne=null,cl=!1,Cn=!1,Bn=0,Yf=0;function Ee(){throw Error(A(321))}function gc(e,s){if(s===null)return!1;for(var r=0;r<s.length&&r<e.length;r++)if(!bt(e[r],s[r]))return!1;return!0}function yc(e,s,r,n,a,l){if(sr=l,le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fa.current=e===null||e.memoizedState===null?tg:sg,e=r(n,a),Cn){l=0;do{if(Cn=!1,Bn=0,25<=l)throw Error(A(301));l+=1,Ne=fe=null,s.updateQueue=null,Fa.current=rg,e=r(n,a)}while(Cn)}if(Fa.current=dl,s=fe!==null&&fe.next!==null,sr=0,Ne=fe=le=null,cl=!1,s)throw Error(A(300));return e}function vc(){var e=Bn!==0;return Bn=0,e}function Ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?le.memoizedState=Ne=e:Ne=Ne.next=e,Ne}function ut(){if(fe===null){var e=le.alternate;e=e!==null?e.memoizedState:null}else e=fe.next;var s=Ne===null?le.memoizedState:Ne.next;if(s!==null)Ne=s,fe=e;else{if(e===null)throw Error(A(310));fe=e,e={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},Ne===null?le.memoizedState=Ne=e:Ne=Ne.next=e}return Ne}function Hn(e,s){return typeof s=="function"?s(e):s}function pi(e){var s=ut(),r=s.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=e;var n=fe,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var c=i=null,o=null,d=l;do{var u=d.lane;if((sr&u)===u)o!==null&&(o=o.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};o===null?(c=o=h,i=n):o=o.next=h,le.lanes|=u,rr|=u}d=d.next}while(d!==null&&d!==l);o===null?i=n:o.next=c,bt(n,s.memoizedState)||(Ke=!0),s.memoizedState=n,s.baseState=i,s.baseQueue=o,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do l=a.lane,le.lanes|=l,rr|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function fi(e){var s=ut(),r=s.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,l=s.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);bt(l,s.memoizedState)||(Ke=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,n]}function lm(){}function im(e,s){var r=le,n=ut(),a=s(),l=!bt(n.memoizedState,a);if(l&&(n.memoizedState=a,Ke=!0),n=n.queue,jc(dm.bind(null,r,n,e),[e]),n.getSnapshot!==s||l||Ne!==null&&Ne.memoizedState.tag&1){if(r.flags|=2048,Wn(9,cm.bind(null,r,n,a,s),void 0,null),we===null)throw Error(A(349));sr&30||om(r,s,a)}return a}function om(e,s,r){e.flags|=16384,e={getSnapshot:s,value:r},s=le.updateQueue,s===null?(s={lastEffect:null,stores:null},le.updateQueue=s,s.stores=[e]):(r=s.stores,r===null?s.stores=[e]:r.push(e))}function cm(e,s,r,n){s.value=r,s.getSnapshot=n,um(s)&&hm(e)}function dm(e,s,r){return r(function(){um(s)&&hm(e)})}function um(e){var s=e.getSnapshot;e=e.value;try{var r=s();return!bt(e,r)}catch{return!0}}function hm(e){var s=qt(e,1);s!==null&&jt(s,e,1,-1)}function Rd(e){var s=Ct();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:e},s.queue=e,e=e.dispatch=eg.bind(null,le,e),[s.memoizedState,e]}function Wn(e,s,r,n){return e={tag:e,create:s,destroy:r,deps:n,next:null},s=le.updateQueue,s===null?(s={lastEffect:null,stores:null},le.updateQueue=s,s.lastEffect=e.next=e):(r=s.lastEffect,r===null?s.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,s.lastEffect=e)),e}function mm(){return ut().memoizedState}function za(e,s,r,n){var a=Ct();le.flags|=e,a.memoizedState=Wn(1|s,r,void 0,n===void 0?null:n)}function Ll(e,s,r,n){var a=ut();n=n===void 0?null:n;var l=void 0;if(fe!==null){var i=fe.memoizedState;if(l=i.destroy,n!==null&&gc(n,i.deps)){a.memoizedState=Wn(s,r,l,n);return}}le.flags|=e,a.memoizedState=Wn(1|s,r,l,n)}function Md(e,s){return za(8390656,8,e,s)}function jc(e,s){return Ll(2048,8,e,s)}function xm(e,s){return Ll(4,2,e,s)}function pm(e,s){return Ll(4,4,e,s)}function fm(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function gm(e,s,r){return r=r!=null?r.concat([e]):null,Ll(4,4,fm.bind(null,s,e),r)}function bc(){}function ym(e,s){var r=ut();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&gc(s,n[1])?n[0]:(r.memoizedState=[e,s],e)}function vm(e,s){var r=ut();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&gc(s,n[1])?n[0]:(e=e(),r.memoizedState=[e,s],e)}function jm(e,s,r){return sr&21?(bt(r,s)||(r=Ch(),le.lanes|=r,rr|=r,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,Ke=!0),e.memoizedState=r)}function Jf(e,s){var r=X;X=r!==0&&4>r?r:4,e(!0);var n=xi.transition;xi.transition={};try{e(!1),s()}finally{X=r,xi.transition=n}}function bm(){return ut().memoizedState}function Zf(e,s,r){var n=ks(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Nm(e))wm(s,r);else if(r=rm(e,s,r,n),r!==null){var a=$e();jt(r,e,n,a),km(r,s,n)}}function eg(e,s,r){var n=ks(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Nm(e))wm(s,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,c=l(i,r);if(a.hasEagerState=!0,a.eagerState=c,bt(c,i)){var o=s.interleaved;o===null?(a.next=a,hc(s)):(a.next=o.next,o.next=a),s.interleaved=a;return}}catch{}finally{}r=rm(e,s,a,n),r!==null&&(a=$e(),jt(r,e,n,a),km(r,s,n))}}function Nm(e){var s=e.alternate;return e===le||s!==null&&s===le}function wm(e,s){Cn=cl=!0;var r=e.pending;r===null?s.next=s:(s.next=r.next,r.next=s),e.pending=s}function km(e,s,r){if(r&4194240){var n=s.lanes;n&=e.pendingLanes,r|=n,s.lanes=r,Jo(e,r)}}var dl={readContext:dt,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useInsertionEffect:Ee,useLayoutEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useMutableSource:Ee,useSyncExternalStore:Ee,useId:Ee,unstable_isNewReconciler:!1},tg={readContext:dt,useCallback:function(e,s){return Ct().memoizedState=[e,s===void 0?null:s],e},useContext:dt,useEffect:Md,useImperativeHandle:function(e,s,r){return r=r!=null?r.concat([e]):null,za(4194308,4,fm.bind(null,s,e),r)},useLayoutEffect:function(e,s){return za(4194308,4,e,s)},useInsertionEffect:function(e,s){return za(4,2,e,s)},useMemo:function(e,s){var r=Ct();return s=s===void 0?null:s,e=e(),r.memoizedState=[e,s],e},useReducer:function(e,s,r){var n=Ct();return s=r!==void 0?r(s):s,n.memoizedState=n.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=Zf.bind(null,le,e),[n.memoizedState,e]},useRef:function(e){var s=Ct();return e={current:e},s.memoizedState=e},useState:Rd,useDebugValue:bc,useDeferredValue:function(e){return Ct().memoizedState=e},useTransition:function(){var e=Rd(!1),s=e[0];return e=Jf.bind(null,e[1]),Ct().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,r){var n=le,a=Ct();if(se){if(r===void 0)throw Error(A(407));r=r()}else{if(r=s(),we===null)throw Error(A(349));sr&30||om(n,s,r)}a.memoizedState=r;var l={value:r,getSnapshot:s};return a.queue=l,Md(dm.bind(null,n,l,e),[e]),n.flags|=2048,Wn(9,cm.bind(null,n,l,r,s),void 0,null),r},useId:function(){var e=Ct(),s=we.identifierPrefix;if(se){var r=Bt,n=Ut;r=(n&~(1<<32-vt(n)-1)).toString(32)+r,s=":"+s+"R"+r,r=Bn++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=Yf++,s=":"+s+"r"+r.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},sg={readContext:dt,useCallback:ym,useContext:dt,useEffect:jc,useImperativeHandle:gm,useInsertionEffect:xm,useLayoutEffect:pm,useMemo:vm,useReducer:pi,useRef:mm,useState:function(){return pi(Hn)},useDebugValue:bc,useDeferredValue:function(e){var s=ut();return jm(s,fe.memoizedState,e)},useTransition:function(){var e=pi(Hn)[0],s=ut().memoizedState;return[e,s]},useMutableSource:lm,useSyncExternalStore:im,useId:bm,unstable_isNewReconciler:!1},rg={readContext:dt,useCallback:ym,useContext:dt,useEffect:jc,useImperativeHandle:gm,useInsertionEffect:xm,useLayoutEffect:pm,useMemo:vm,useReducer:fi,useRef:mm,useState:function(){return fi(Hn)},useDebugValue:bc,useDeferredValue:function(e){var s=ut();return fe===null?s.memoizedState=e:jm(s,fe.memoizedState,e)},useTransition:function(){var e=fi(Hn)[0],s=ut().memoizedState;return[e,s]},useMutableSource:lm,useSyncExternalStore:im,useId:bm,unstable_isNewReconciler:!1};function xt(e,s){if(e&&e.defaultProps){s=ie({},s),e=e.defaultProps;for(var r in e)s[r]===void 0&&(s[r]=e[r]);return s}return s}function eo(e,s,r,n){s=e.memoizedState,r=r(n,s),r=r==null?s:ie({},s,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Al={isMounted:function(e){return(e=e._reactInternals)?cr(e)===e:!1},enqueueSetState:function(e,s,r){e=e._reactInternals;var n=$e(),a=ks(e),l=Ht(n,a);l.payload=s,r!=null&&(l.callback=r),s=Ns(e,l,a),s!==null&&(jt(s,e,a,n),Da(s,e,a))},enqueueReplaceState:function(e,s,r){e=e._reactInternals;var n=$e(),a=ks(e),l=Ht(n,a);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=Ns(e,l,a),s!==null&&(jt(s,e,a,n),Da(s,e,a))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var r=$e(),n=ks(e),a=Ht(r,n);a.tag=2,s!=null&&(a.callback=s),s=Ns(e,a,n),s!==null&&(jt(s,e,n,r),Da(s,e,n))}};function Td(e,s,r,n,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,i):s.prototype&&s.prototype.isPureReactComponent?!On(r,n)||!On(a,l):!0}function Cm(e,s,r){var n=!1,a=Es,l=s.contextType;return typeof l=="object"&&l!==null?l=dt(l):(a=Ge(s)?er:Me.current,n=s.contextTypes,l=(n=n!=null)?Qr(e,a):Es),s=new s(r,l),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Al,e.stateNode=s,s._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),s}function Id(e,s,r,n){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,n),s.state!==e&&Al.enqueueReplaceState(s,s.state,null)}function to(e,s,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},mc(e);var l=s.contextType;typeof l=="object"&&l!==null?a.context=dt(l):(l=Ge(s)?er:Me.current,a.context=Qr(e,l)),a.state=e.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(eo(e,s,l,r),a.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&Al.enqueueReplaceState(a,a.state,null),il(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Xr(e,s){try{var r="",n=s;do r+=Lp(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:s,stack:a,digest:null}}function gi(e,s,r){return{value:e,source:null,stack:r??null,digest:s??null}}function so(e,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var ng=typeof WeakMap=="function"?WeakMap:Map;function Sm(e,s,r){r=Ht(-1,r),r.tag=3,r.payload={element:null};var n=s.value;return r.callback=function(){hl||(hl=!0,mo=n),so(e,s)},r}function _m(e,s,r){r=Ht(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=s.value;r.payload=function(){return n(a)},r.callback=function(){so(e,s)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){so(e,s),typeof n!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),r}function Od(e,s,r){var n=e.pingCache;if(n===null){n=e.pingCache=new ng;var a=new Set;n.set(s,a)}else a=n.get(s),a===void 0&&(a=new Set,n.set(s,a));a.has(r)||(a.add(r),e=yg.bind(null,e,s,r),s.then(e,e))}function Dd(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function Fd(e,s,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===s?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Ht(-1,1),s.tag=2,Ns(r,s,1))),r.lanes|=1),e)}var ag=Xt.ReactCurrentOwner,Ke=!1;function Fe(e,s,r,n){s.child=e===null?sm(s,null,r,n):qr(s,e.child,r,n)}function zd(e,s,r,n,a){r=r.render;var l=s.ref;return Ar(s,a),n=yc(e,s,r,n,l,a),r=vc(),e!==null&&!Ke?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,Gt(e,s,a)):(se&&r&&lc(s),s.flags|=1,Fe(e,s,n,a),s.child)}function $d(e,s,r,n,a){if(e===null){var l=r.type;return typeof l=="function"&&!Ec(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,Pm(e,s,l,n,a)):(e=Ha(r.type,null,n,s,s.mode,a),e.ref=s.ref,e.return=s,s.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:On,r(i,n)&&e.ref===s.ref)return Gt(e,s,a)}return s.flags|=1,e=Cs(l,n),e.ref=s.ref,e.return=s,s.child=e}function Pm(e,s,r,n,a){if(e!==null){var l=e.memoizedProps;if(On(l,n)&&e.ref===s.ref)if(Ke=!1,s.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(Ke=!0);else return s.lanes=e.lanes,Gt(e,s,a)}return ro(e,s,r,n,a)}function Em(e,s,r){var n=s.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(Cr,Je),Je|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,Y(Cr,Je),Je|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,Y(Cr,Je),Je|=n}else l!==null?(n=l.baseLanes|r,s.memoizedState=null):n=r,Y(Cr,Je),Je|=n;return Fe(e,s,a,r),s.child}function Lm(e,s){var r=s.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function ro(e,s,r,n,a){var l=Ge(r)?er:Me.current;return l=Qr(s,l),Ar(s,a),r=yc(e,s,r,n,l,a),n=vc(),e!==null&&!Ke?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,Gt(e,s,a)):(se&&n&&lc(s),s.flags|=1,Fe(e,s,r,a),s.child)}function Ud(e,s,r,n,a){if(Ge(r)){var l=!0;sl(s)}else l=!1;if(Ar(s,a),s.stateNode===null)$a(e,s),Cm(s,r,n),to(s,r,n,a),n=!0;else if(e===null){var i=s.stateNode,c=s.memoizedProps;i.props=c;var o=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=dt(d):(d=Ge(r)?er:Me.current,d=Qr(s,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==n||o!==d)&&Id(s,i,n,d),ss=!1;var m=s.memoizedState;i.state=m,il(s,n,i,a),o=s.memoizedState,c!==n||m!==o||qe.current||ss?(typeof u=="function"&&(eo(s,r,u,n),o=s.memoizedState),(c=ss||Td(s,r,c,n,m,o,d))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=o),i.props=n,i.state=o,i.context=d,n=c):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{i=s.stateNode,nm(e,s),c=s.memoizedProps,d=s.type===s.elementType?c:xt(s.type,c),i.props=d,h=s.pendingProps,m=i.context,o=r.contextType,typeof o=="object"&&o!==null?o=dt(o):(o=Ge(r)?er:Me.current,o=Qr(s,o));var g=r.getDerivedStateFromProps;(u=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==h||m!==o)&&Id(s,i,n,o),ss=!1,m=s.memoizedState,i.state=m,il(s,n,i,a);var p=s.memoizedState;c!==h||m!==p||qe.current||ss?(typeof g=="function"&&(eo(s,r,g,n),p=s.memoizedState),(d=ss||Td(s,r,d,n,m,p,o)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,p,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,p,o)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=p),i.props=n,i.state=p,i.context=o,n=d):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(s.flags|=1024),n=!1)}return no(e,s,r,n,l,a)}function no(e,s,r,n,a,l){Lm(e,s);var i=(s.flags&128)!==0;if(!n&&!i)return a&&Sd(s,r,!1),Gt(e,s,l);n=s.stateNode,ag.current=s;var c=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return s.flags|=1,e!==null&&i?(s.child=qr(s,e.child,null,l),s.child=qr(s,null,c,l)):Fe(e,s,c,l),s.memoizedState=n.state,a&&Sd(s,r,!0),s.child}function Am(e){var s=e.stateNode;s.pendingContext?Cd(e,s.pendingContext,s.pendingContext!==s.context):s.context&&Cd(e,s.context,!1),xc(e,s.containerInfo)}function Bd(e,s,r,n,a){return Kr(),oc(a),s.flags|=256,Fe(e,s,r,n),s.child}var ao={dehydrated:null,treeContext:null,retryLane:0};function lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rm(e,s,r){var n=s.pendingProps,a=ae.current,l=!1,i=(s.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(l=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Y(ae,a&1),e===null)return Ji(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=n.children,e=n.fallback,l?(n=s.mode,l=s.child,i={mode:"hidden",children:i},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Tl(i,n,0,null),e=Js(e,n,r,null),l.return=s,e.return=s,l.sibling=e,s.child=l,s.child.memoizedState=lo(r),s.memoizedState=ao,e):Nc(s,i));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return lg(e,s,i,n,c,a,r);if(l){l=n.fallback,i=s.mode,a=e.child,c=a.sibling;var o={mode:"hidden",children:n.children};return!(i&1)&&s.child!==a?(n=s.child,n.childLanes=0,n.pendingProps=o,s.deletions=null):(n=Cs(a,o),n.subtreeFlags=a.subtreeFlags&14680064),c!==null?l=Cs(c,l):(l=Js(l,i,r,null),l.flags|=2),l.return=s,n.return=s,n.sibling=l,s.child=n,n=l,l=s.child,i=e.child.memoizedState,i=i===null?lo(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~r,s.memoizedState=ao,n}return l=e.child,e=l.sibling,n=Cs(l,{mode:"visible",children:n.children}),!(s.mode&1)&&(n.lanes=r),n.return=s,n.sibling=null,e!==null&&(r=s.deletions,r===null?(s.deletions=[e],s.flags|=16):r.push(e)),s.child=n,s.memoizedState=null,n}function Nc(e,s){return s=Tl({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function wa(e,s,r,n){return n!==null&&oc(n),qr(s,e.child,null,r),e=Nc(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function lg(e,s,r,n,a,l,i){if(r)return s.flags&256?(s.flags&=-257,n=gi(Error(A(422))),wa(e,s,i,n)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(l=n.fallback,a=s.mode,n=Tl({mode:"visible",children:n.children},a,0,null),l=Js(l,a,i,null),l.flags|=2,n.return=s,l.return=s,n.sibling=l,s.child=n,s.mode&1&&qr(s,e.child,null,i),s.child.memoizedState=lo(i),s.memoizedState=ao,l);if(!(s.mode&1))return wa(e,s,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var c=n.dgst;return n=c,l=Error(A(419)),n=gi(l,n,void 0),wa(e,s,i,n)}if(c=(i&e.childLanes)!==0,Ke||c){if(n=we,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,qt(e,a),jt(n,e,a,-1))}return Pc(),n=gi(Error(A(421))),wa(e,s,i,n)}return a.data==="$?"?(s.flags|=128,s.child=e.child,s=vg.bind(null,e),a._reactRetry=s,null):(e=l.treeContext,Ze=bs(a.nextSibling),et=s,se=!0,yt=null,e!==null&&(lt[it++]=Ut,lt[it++]=Bt,lt[it++]=tr,Ut=e.id,Bt=e.overflow,tr=s),s=Nc(s,n.children),s.flags|=4096,s)}function Hd(e,s,r){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s),Zi(e.return,s,r)}function yi(e,s,r,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function Mm(e,s,r){var n=s.pendingProps,a=n.revealOrder,l=n.tail;if(Fe(e,s,n.children,r),n=ae.current,n&2)n=n&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hd(e,r,s);else if(e.tag===19)Hd(e,r,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Y(ae,n),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(r=s.child,a=null;r!==null;)e=r.alternate,e!==null&&ol(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=s.child,s.child=null):(a=r.sibling,r.sibling=null),yi(s,!1,a,r,l);break;case"backwards":for(r=null,a=s.child,s.child=null;a!==null;){if(e=a.alternate,e!==null&&ol(e)===null){s.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}yi(s,!0,r,null,l);break;case"together":yi(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function $a(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function Gt(e,s,r){if(e!==null&&(s.dependencies=e.dependencies),rr|=s.lanes,!(r&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(A(153));if(s.child!==null){for(e=s.child,r=Cs(e,e.pendingProps),s.child=r,r.return=s;e.sibling!==null;)e=e.sibling,r=r.sibling=Cs(e,e.pendingProps),r.return=s;r.sibling=null}return s.child}function ig(e,s,r){switch(s.tag){case 3:Am(s),Kr();break;case 5:am(s);break;case 1:Ge(s.type)&&sl(s);break;case 4:xc(s,s.stateNode.containerInfo);break;case 10:var n=s.type._context,a=s.memoizedProps.value;Y(al,n._currentValue),n._currentValue=a;break;case 13:if(n=s.memoizedState,n!==null)return n.dehydrated!==null?(Y(ae,ae.current&1),s.flags|=128,null):r&s.child.childLanes?Rm(e,s,r):(Y(ae,ae.current&1),e=Gt(e,s,r),e!==null?e.sibling:null);Y(ae,ae.current&1);break;case 19:if(n=(r&s.childLanes)!==0,e.flags&128){if(n)return Mm(e,s,r);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Y(ae,ae.current),n)break;return null;case 22:case 23:return s.lanes=0,Em(e,s,r)}return Gt(e,s,r)}var Tm,io,Im,Om;Tm=function(e,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};io=function(){};Im=function(e,s,r,n){var a=e.memoizedProps;if(a!==n){e=s.stateNode,$s(At.current);var l=null;switch(r){case"input":a=Ei(e,a),n=Ei(e,n),l=[];break;case"select":a=ie({},a,{value:void 0}),n=ie({},n,{value:void 0}),l=[];break;case"textarea":a=Ri(e,a),n=Ri(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=el)}Ti(r,n);var i;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var c=a[d];for(i in c)c.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(En.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in n){var o=n[d];if(c=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&o!==c&&(o!=null||c!=null))if(d==="style")if(c){for(i in c)!c.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in o)o.hasOwnProperty(i)&&c[i]!==o[i]&&(r||(r={}),r[i]=o[i])}else r||(l||(l=[]),l.push(d,r)),r=o;else d==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,c=c?c.__html:void 0,o!=null&&c!==o&&(l=l||[]).push(d,o)):d==="children"?typeof o!="string"&&typeof o!="number"||(l=l||[]).push(d,""+o):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(En.hasOwnProperty(d)?(o!=null&&d==="onScroll"&&J("scroll",e),l||c===o||(l=[])):(l=l||[]).push(d,o))}r&&(l=l||[]).push("style",r);var d=l;(s.updateQueue=d)&&(s.flags|=4)}};Om=function(e,s,r,n){r!==n&&(s.flags|=4)};function hn(e,s){if(!se)switch(e.tailMode){case"hidden":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Le(e){var s=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(s)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,s}function og(e,s,r){var n=s.pendingProps;switch(ic(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(s),null;case 1:return Ge(s.type)&&tl(),Le(s),null;case 3:return n=s.stateNode,Gr(),Z(qe),Z(Me),fc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ba(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,yt!==null&&(fo(yt),yt=null))),io(e,s),Le(s),null;case 5:pc(s);var a=$s(Un.current);if(r=s.type,e!==null&&s.stateNode!=null)Im(e,s,r,n,a),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!n){if(s.stateNode===null)throw Error(A(166));return Le(s),null}if(e=$s(At.current),ba(s)){n=s.stateNode,r=s.type;var l=s.memoizedProps;switch(n[Et]=s,n[zn]=l,e=(s.mode&1)!==0,r){case"dialog":J("cancel",n),J("close",n);break;case"iframe":case"object":case"embed":J("load",n);break;case"video":case"audio":for(a=0;a<yn.length;a++)J(yn[a],n);break;case"source":J("error",n);break;case"img":case"image":case"link":J("error",n),J("load",n);break;case"details":J("toggle",n);break;case"input":Jc(n,l),J("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},J("invalid",n);break;case"textarea":ed(n,l),J("invalid",n)}Ti(r,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="children"?typeof c=="string"?n.textContent!==c&&(l.suppressHydrationWarning!==!0&&ja(n.textContent,c,e),a=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&ja(n.textContent,c,e),a=["children",""+c]):En.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&J("scroll",n)}switch(r){case"input":ha(n),Zc(n,l,!0);break;case"textarea":ha(n),td(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=el)}n=a,s.updateQueue=n,n!==null&&(s.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dh(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[Et]=s,e[zn]=n,Tm(e,s,!1,!1),s.stateNode=e;e:{switch(i=Ii(r,n),r){case"dialog":J("cancel",e),J("close",e),a=n;break;case"iframe":case"object":case"embed":J("load",e),a=n;break;case"video":case"audio":for(a=0;a<yn.length;a++)J(yn[a],e);a=n;break;case"source":J("error",e),a=n;break;case"img":case"image":case"link":J("error",e),J("load",e),a=n;break;case"details":J("toggle",e),a=n;break;case"input":Jc(e,n),a=Ei(e,n),J("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=ie({},n,{value:void 0}),J("invalid",e);break;case"textarea":ed(e,n),a=Ri(e,n),J("invalid",e);break;default:a=n}Ti(r,a),c=a;for(l in c)if(c.hasOwnProperty(l)){var o=c[l];l==="style"?mh(e,o):l==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&uh(e,o)):l==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Ln(e,o):typeof o=="number"&&Ln(e,""+o):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(En.hasOwnProperty(l)?o!=null&&l==="onScroll"&&J("scroll",e):o!=null&&Qo(e,l,o,i))}switch(r){case"input":ha(e),Zc(e,n,!1);break;case"textarea":ha(e),td(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ps(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?_r(e,!!n.multiple,l,!1):n.defaultValue!=null&&_r(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=el)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Le(s),null;case 6:if(e&&s.stateNode!=null)Om(e,s,e.memoizedProps,n);else{if(typeof n!="string"&&s.stateNode===null)throw Error(A(166));if(r=$s(Un.current),$s(At.current),ba(s)){if(n=s.stateNode,r=s.memoizedProps,n[Et]=s,(l=n.nodeValue!==r)&&(e=et,e!==null))switch(e.tag){case 3:ja(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ja(n.nodeValue,r,(e.mode&1)!==0)}l&&(s.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Et]=s,s.stateNode=n}return Le(s),null;case 13:if(Z(ae),n=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(se&&Ze!==null&&s.mode&1&&!(s.flags&128))em(),Kr(),s.flags|=98560,l=!1;else if(l=ba(s),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(A(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(A(317));l[Et]=s}else Kr(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Le(s),l=!1}else yt!==null&&(fo(yt),yt=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(s.child.flags|=8192,s.mode&1&&(e===null||ae.current&1?ye===0&&(ye=3):Pc())),s.updateQueue!==null&&(s.flags|=4),Le(s),null);case 4:return Gr(),io(e,s),e===null&&Dn(s.stateNode.containerInfo),Le(s),null;case 10:return uc(s.type._context),Le(s),null;case 17:return Ge(s.type)&&tl(),Le(s),null;case 19:if(Z(ae),l=s.memoizedState,l===null)return Le(s),null;if(n=(s.flags&128)!==0,i=l.rendering,i===null)if(n)hn(l,!1);else{if(ye!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(i=ol(e),i!==null){for(s.flags|=128,hn(l,!1),n=i.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),s.subtreeFlags=0,n=r,r=s.child;r!==null;)l=r,e=n,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Y(ae,ae.current&1|2),s.child}e=e.sibling}l.tail!==null&&he()>Yr&&(s.flags|=128,n=!0,hn(l,!1),s.lanes=4194304)}else{if(!n)if(e=ol(i),e!==null){if(s.flags|=128,n=!0,r=e.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),hn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!se)return Le(s),null}else 2*he()-l.renderingStartTime>Yr&&r!==1073741824&&(s.flags|=128,n=!0,hn(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(r=l.last,r!==null?r.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=he(),s.sibling=null,r=ae.current,Y(ae,n?r&1|2:r&1),s):(Le(s),null);case 22:case 23:return _c(),n=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(s.flags|=8192),n&&s.mode&1?Je&1073741824&&(Le(s),s.subtreeFlags&6&&(s.flags|=8192)):Le(s),null;case 24:return null;case 25:return null}throw Error(A(156,s.tag))}function cg(e,s){switch(ic(s),s.tag){case 1:return Ge(s.type)&&tl(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Gr(),Z(qe),Z(Me),fc(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return pc(s),null;case 13:if(Z(ae),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(A(340));Kr()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return Z(ae),null;case 4:return Gr(),null;case 10:return uc(s.type._context),null;case 22:case 23:return _c(),null;case 24:return null;default:return null}}var ka=!1,Ae=!1,dg=typeof WeakSet=="function"?WeakSet:Set,I=null;function kr(e,s){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){de(e,s,n)}else r.current=null}function oo(e,s,r){try{r()}catch(n){de(e,s,n)}}var Wd=!1;function ug(e,s){if(Vi=Ya,e=Uh(),ac(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,c=-1,o=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var g;h!==r||a!==0&&h.nodeType!==3||(c=i+a),h!==l||n!==0&&h.nodeType!==3||(o=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===e)break t;if(m===r&&++d===a&&(c=i),m===l&&++u===n&&(o=i),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}r=c===-1||o===-1?null:{start:c,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(Qi={focusedElem:e,selectionRange:r},Ya=!1,I=s;I!==null;)if(s=I,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,I=e;else for(;I!==null;){s=I;try{var p=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var j=p.memoizedProps,w=p.memoizedState,x=s.stateNode,f=x.getSnapshotBeforeUpdate(s.elementType===s.type?j:xt(s.type,j),w);x.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var y=s.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(N){de(s,s.return,N)}if(e=s.sibling,e!==null){e.return=s.return,I=e;break}I=s.return}return p=Wd,Wd=!1,p}function Sn(e,s,r){var n=s.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&oo(s,r,l)}a=a.next}while(a!==n)}}function Rl(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==s)}}function co(e){var s=e.ref;if(s!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof s=="function"?s(e):s.current=e}}function Dm(e){var s=e.alternate;s!==null&&(e.alternate=null,Dm(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[Et],delete s[zn],delete s[Gi],delete s[Kf],delete s[qf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Fm(e){return e.tag===5||e.tag===3||e.tag===4}function Vd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uo(e,s,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(e,s):r.insertBefore(e,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(e,r)):(s=r,s.appendChild(e)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=el));else if(n!==4&&(e=e.child,e!==null))for(uo(e,s,r),e=e.sibling;e!==null;)uo(e,s,r),e=e.sibling}function ho(e,s,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?r.insertBefore(e,s):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(ho(e,s,r),e=e.sibling;e!==null;)ho(e,s,r),e=e.sibling}var Se=null,gt=!1;function Zt(e,s,r){for(r=r.child;r!==null;)zm(e,s,r),r=r.sibling}function zm(e,s,r){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(kl,r)}catch{}switch(r.tag){case 5:Ae||kr(r,s);case 6:var n=Se,a=gt;Se=null,Zt(e,s,r),Se=n,gt=a,Se!==null&&(gt?(e=Se,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Se.removeChild(r.stateNode));break;case 18:Se!==null&&(gt?(e=Se,r=r.stateNode,e.nodeType===8?ui(e.parentNode,r):e.nodeType===1&&ui(e,r),Tn(e)):ui(Se,r.stateNode));break;case 4:n=Se,a=gt,Se=r.stateNode.containerInfo,gt=!0,Zt(e,s,r),Se=n,gt=a;break;case 0:case 11:case 14:case 15:if(!Ae&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&oo(r,s,i),a=a.next}while(a!==n)}Zt(e,s,r);break;case 1:if(!Ae&&(kr(r,s),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){de(r,s,c)}Zt(e,s,r);break;case 21:Zt(e,s,r);break;case 22:r.mode&1?(Ae=(n=Ae)||r.memoizedState!==null,Zt(e,s,r),Ae=n):Zt(e,s,r);break;default:Zt(e,s,r)}}function Qd(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new dg),s.forEach(function(n){var a=jg.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ht(e,s){var r=s.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=e,i=s,c=i;e:for(;c!==null;){switch(c.tag){case 5:Se=c.stateNode,gt=!1;break e;case 3:Se=c.stateNode.containerInfo,gt=!0;break e;case 4:Se=c.stateNode.containerInfo,gt=!0;break e}c=c.return}if(Se===null)throw Error(A(160));zm(l,i,a),Se=null,gt=!1;var o=a.alternate;o!==null&&(o.return=null),a.return=null}catch(d){de(a,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)$m(s,e),s=s.sibling}function $m(e,s){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ht(s,e),Nt(e),n&4){try{Sn(3,e,e.return),Rl(3,e)}catch(j){de(e,e.return,j)}try{Sn(5,e,e.return)}catch(j){de(e,e.return,j)}}break;case 1:ht(s,e),Nt(e),n&512&&r!==null&&kr(r,r.return);break;case 5:if(ht(s,e),Nt(e),n&512&&r!==null&&kr(r,r.return),e.flags&32){var a=e.stateNode;try{Ln(a,"")}catch(j){de(e,e.return,j)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=r!==null?r.memoizedProps:l,c=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&oh(a,l),Ii(c,i);var d=Ii(c,l);for(i=0;i<o.length;i+=2){var u=o[i],h=o[i+1];u==="style"?mh(a,h):u==="dangerouslySetInnerHTML"?uh(a,h):u==="children"?Ln(a,h):Qo(a,u,h,d)}switch(c){case"input":Li(a,l);break;case"textarea":ch(a,l);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var g=l.value;g!=null?_r(a,!!l.multiple,g,!1):m!==!!l.multiple&&(l.defaultValue!=null?_r(a,!!l.multiple,l.defaultValue,!0):_r(a,!!l.multiple,l.multiple?[]:"",!1))}a[zn]=l}catch(j){de(e,e.return,j)}}break;case 6:if(ht(s,e),Nt(e),n&4){if(e.stateNode===null)throw Error(A(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(j){de(e,e.return,j)}}break;case 3:if(ht(s,e),Nt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Tn(s.containerInfo)}catch(j){de(e,e.return,j)}break;case 4:ht(s,e),Nt(e);break;case 13:ht(s,e),Nt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Cc=he())),n&4&&Qd(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Ae=(d=Ae)||u,ht(s,e),Ae=d):ht(s,e),Nt(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(I=e,u=e.child;u!==null;){for(h=I=u;I!==null;){switch(m=I,g=m.child,m.tag){case 0:case 11:case 14:case 15:Sn(4,m,m.return);break;case 1:kr(m,m.return);var p=m.stateNode;if(typeof p.componentWillUnmount=="function"){n=m,r=m.return;try{s=n,p.props=s.memoizedProps,p.state=s.memoizedState,p.componentWillUnmount()}catch(j){de(n,r,j)}}break;case 5:kr(m,m.return);break;case 22:if(m.memoizedState!==null){qd(h);continue}}g!==null?(g.return=m,I=g):qd(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=h.stateNode,o=h.memoizedProps.style,i=o!=null&&o.hasOwnProperty("display")?o.display:null,c.style.display=hh("display",i))}catch(j){de(e,e.return,j)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(j){de(e,e.return,j)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ht(s,e),Nt(e),n&4&&Qd(e);break;case 21:break;default:ht(s,e),Nt(e)}}function Nt(e){var s=e.flags;if(s&2){try{e:{for(var r=e.return;r!==null;){if(Fm(r)){var n=r;break e}r=r.return}throw Error(A(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Ln(a,""),n.flags&=-33);var l=Vd(e);ho(e,l,a);break;case 3:case 4:var i=n.stateNode.containerInfo,c=Vd(e);uo(e,c,i);break;default:throw Error(A(161))}}catch(o){de(e,e.return,o)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function hg(e,s,r){I=e,Um(e)}function Um(e,s,r){for(var n=(e.mode&1)!==0;I!==null;){var a=I,l=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||ka;if(!i){var c=a.alternate,o=c!==null&&c.memoizedState!==null||Ae;c=ka;var d=Ae;if(ka=i,(Ae=o)&&!d)for(I=a;I!==null;)i=I,o=i.child,i.tag===22&&i.memoizedState!==null?Gd(a):o!==null?(o.return=i,I=o):Gd(a);for(;l!==null;)I=l,Um(l),l=l.sibling;I=a,ka=c,Ae=d}Kd(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,I=l):Kd(e)}}function Kd(e){for(;I!==null;){var s=I;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Ae||Rl(5,s);break;case 1:var n=s.stateNode;if(s.flags&4&&!Ae)if(r===null)n.componentDidMount();else{var a=s.elementType===s.type?r.memoizedProps:xt(s.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&Ad(s,l,n);break;case 3:var i=s.updateQueue;if(i!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}Ad(s,i,r)}break;case 5:var c=s.stateNode;if(r===null&&s.flags&4){r=c;var o=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Tn(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Ae||s.flags&512&&co(s)}catch(m){de(s,s.return,m)}}if(s===e){I=null;break}if(r=s.sibling,r!==null){r.return=s.return,I=r;break}I=s.return}}function qd(e){for(;I!==null;){var s=I;if(s===e){I=null;break}var r=s.sibling;if(r!==null){r.return=s.return,I=r;break}I=s.return}}function Gd(e){for(;I!==null;){var s=I;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Rl(4,s)}catch(o){de(s,r,o)}break;case 1:var n=s.stateNode;if(typeof n.componentDidMount=="function"){var a=s.return;try{n.componentDidMount()}catch(o){de(s,a,o)}}var l=s.return;try{co(s)}catch(o){de(s,l,o)}break;case 5:var i=s.return;try{co(s)}catch(o){de(s,i,o)}}}catch(o){de(s,s.return,o)}if(s===e){I=null;break}var c=s.sibling;if(c!==null){c.return=s.return,I=c;break}I=s.return}}var mg=Math.ceil,ul=Xt.ReactCurrentDispatcher,wc=Xt.ReactCurrentOwner,ct=Xt.ReactCurrentBatchConfig,K=0,we=null,pe=null,_e=0,Je=0,Cr=As(0),ye=0,Vn=null,rr=0,Ml=0,kc=0,_n=null,Qe=null,Cc=0,Yr=1/0,It=null,hl=!1,mo=null,ws=null,Ca=!1,ps=null,ml=0,Pn=0,xo=null,Ua=-1,Ba=0;function $e(){return K&6?he():Ua!==-1?Ua:Ua=he()}function ks(e){return e.mode&1?K&2&&_e!==0?_e&-_e:Xf.transition!==null?(Ba===0&&(Ba=Ch()),Ba):(e=X,e!==0||(e=window.event,e=e===void 0?16:Rh(e.type)),e):1}function jt(e,s,r,n){if(50<Pn)throw Pn=0,xo=null,Error(A(185));ta(e,r,n),(!(K&2)||e!==we)&&(e===we&&(!(K&2)&&(Ml|=r),ye===4&&ns(e,_e)),Xe(e,n),r===1&&K===0&&!(s.mode&1)&&(Yr=he()+500,El&&Rs()))}function Xe(e,s){var r=e.callbackNode;Gp(e,s);var n=Xa(e,e===we?_e:0);if(n===0)r!==null&&nd(r),e.callbackNode=null,e.callbackPriority=0;else if(s=n&-n,e.callbackPriority!==s){if(r!=null&&nd(r),s===1)e.tag===0?Gf(Xd.bind(null,e)):Yh(Xd.bind(null,e)),Vf(function(){!(K&6)&&Rs()}),r=null;else{switch(Sh(n)){case 1:r=Yo;break;case 4:r=wh;break;case 16:r=Ga;break;case 536870912:r=kh;break;default:r=Ga}r=Gm(r,Bm.bind(null,e))}e.callbackPriority=s,e.callbackNode=r}}function Bm(e,s){if(Ua=-1,Ba=0,K&6)throw Error(A(327));var r=e.callbackNode;if(Rr()&&e.callbackNode!==r)return null;var n=Xa(e,e===we?_e:0);if(n===0)return null;if(n&30||n&e.expiredLanes||s)s=xl(e,n);else{s=n;var a=K;K|=2;var l=Wm();(we!==e||_e!==s)&&(It=null,Yr=he()+500,Ys(e,s));do try{fg();break}catch(c){Hm(e,c)}while(!0);dc(),ul.current=l,K=a,pe!==null?s=0:(we=null,_e=0,s=ye)}if(s!==0){if(s===2&&(a=$i(e),a!==0&&(n=a,s=po(e,a))),s===1)throw r=Vn,Ys(e,0),ns(e,n),Xe(e,he()),r;if(s===6)ns(e,n);else{if(a=e.current.alternate,!(n&30)&&!xg(a)&&(s=xl(e,n),s===2&&(l=$i(e),l!==0&&(n=l,s=po(e,l))),s===1))throw r=Vn,Ys(e,0),ns(e,n),Xe(e,he()),r;switch(e.finishedWork=a,e.finishedLanes=n,s){case 0:case 1:throw Error(A(345));case 2:Ds(e,Qe,It);break;case 3:if(ns(e,n),(n&130023424)===n&&(s=Cc+500-he(),10<s)){if(Xa(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){$e(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=qi(Ds.bind(null,e,Qe,It),s);break}Ds(e,Qe,It);break;case 4:if(ns(e,n),(n&4194240)===n)break;for(s=e.eventTimes,a=-1;0<n;){var i=31-vt(n);l=1<<i,i=s[i],i>a&&(a=i),n&=~l}if(n=a,n=he()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*mg(n/1960))-n,10<n){e.timeoutHandle=qi(Ds.bind(null,e,Qe,It),n);break}Ds(e,Qe,It);break;case 5:Ds(e,Qe,It);break;default:throw Error(A(329))}}}return Xe(e,he()),e.callbackNode===r?Bm.bind(null,e):null}function po(e,s){var r=_n;return e.current.memoizedState.isDehydrated&&(Ys(e,s).flags|=256),e=xl(e,s),e!==2&&(s=Qe,Qe=r,s!==null&&fo(s)),e}function fo(e){Qe===null?Qe=e:Qe.push.apply(Qe,e)}function xg(e){for(var s=e;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!bt(l(),a))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ns(e,s){for(s&=~kc,s&=~Ml,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var r=31-vt(s),n=1<<r;e[r]=-1,s&=~n}}function Xd(e){if(K&6)throw Error(A(327));Rr();var s=Xa(e,0);if(!(s&1))return Xe(e,he()),null;var r=xl(e,s);if(e.tag!==0&&r===2){var n=$i(e);n!==0&&(s=n,r=po(e,n))}if(r===1)throw r=Vn,Ys(e,0),ns(e,s),Xe(e,he()),r;if(r===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,Ds(e,Qe,It),Xe(e,he()),null}function Sc(e,s){var r=K;K|=1;try{return e(s)}finally{K=r,K===0&&(Yr=he()+500,El&&Rs())}}function nr(e){ps!==null&&ps.tag===0&&!(K&6)&&Rr();var s=K;K|=1;var r=ct.transition,n=X;try{if(ct.transition=null,X=1,e)return e()}finally{X=n,ct.transition=r,K=s,!(K&6)&&Rs()}}function _c(){Je=Cr.current,Z(Cr)}function Ys(e,s){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Wf(r)),pe!==null)for(r=pe.return;r!==null;){var n=r;switch(ic(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&tl();break;case 3:Gr(),Z(qe),Z(Me),fc();break;case 5:pc(n);break;case 4:Gr();break;case 13:Z(ae);break;case 19:Z(ae);break;case 10:uc(n.type._context);break;case 22:case 23:_c()}r=r.return}if(we=e,pe=e=Cs(e.current,null),_e=Je=s,ye=0,Vn=null,kc=Ml=rr=0,Qe=_n=null,zs!==null){for(s=0;s<zs.length;s++)if(r=zs[s],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var i=l.next;l.next=a,n.next=i}r.pending=n}zs=null}return e}function Hm(e,s){do{var r=pe;try{if(dc(),Fa.current=dl,cl){for(var n=le.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}cl=!1}if(sr=0,Ne=fe=le=null,Cn=!1,Bn=0,wc.current=null,r===null||r.return===null){ye=1,Vn=s,pe=null;break}e:{var l=e,i=r.return,c=r,o=s;if(s=_e,c.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=o,u=c,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=Dd(i);if(g!==null){g.flags&=-257,Fd(g,i,c,l,s),g.mode&1&&Od(l,d,s),s=g,o=d;var p=s.updateQueue;if(p===null){var j=new Set;j.add(o),s.updateQueue=j}else p.add(o);break e}else{if(!(s&1)){Od(l,d,s),Pc();break e}o=Error(A(426))}}else if(se&&c.mode&1){var w=Dd(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Fd(w,i,c,l,s),oc(Xr(o,c));break e}}l=o=Xr(o,c),ye!==4&&(ye=2),_n===null?_n=[l]:_n.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var x=Sm(l,o,s);Ld(l,x);break e;case 1:c=o;var f=l.type,y=l.stateNode;if(!(l.flags&128)&&(typeof f.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ws===null||!ws.has(y)))){l.flags|=65536,s&=-s,l.lanes|=s;var N=_m(l,c,s);Ld(l,N);break e}}l=l.return}while(l!==null)}Qm(r)}catch(k){s=k,pe===r&&r!==null&&(pe=r=r.return);continue}break}while(!0)}function Wm(){var e=ul.current;return ul.current=dl,e===null?dl:e}function Pc(){(ye===0||ye===3||ye===2)&&(ye=4),we===null||!(rr&268435455)&&!(Ml&268435455)||ns(we,_e)}function xl(e,s){var r=K;K|=2;var n=Wm();(we!==e||_e!==s)&&(It=null,Ys(e,s));do try{pg();break}catch(a){Hm(e,a)}while(!0);if(dc(),K=r,ul.current=n,pe!==null)throw Error(A(261));return we=null,_e=0,ye}function pg(){for(;pe!==null;)Vm(pe)}function fg(){for(;pe!==null&&!$p();)Vm(pe)}function Vm(e){var s=qm(e.alternate,e,Je);e.memoizedProps=e.pendingProps,s===null?Qm(e):pe=s,wc.current=null}function Qm(e){var s=e;do{var r=s.alternate;if(e=s.return,s.flags&32768){if(r=cg(r,s),r!==null){r.flags&=32767,pe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ye=6,pe=null;return}}else if(r=og(r,s,Je),r!==null){pe=r;return}if(s=s.sibling,s!==null){pe=s;return}pe=s=e}while(s!==null);ye===0&&(ye=5)}function Ds(e,s,r){var n=X,a=ct.transition;try{ct.transition=null,X=1,gg(e,s,r,n)}finally{ct.transition=a,X=n}return null}function gg(e,s,r,n){do Rr();while(ps!==null);if(K&6)throw Error(A(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(Xp(e,l),e===we&&(pe=we=null,_e=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ca||(Ca=!0,Gm(Ga,function(){return Rr(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=ct.transition,ct.transition=null;var i=X;X=1;var c=K;K|=4,wc.current=null,ug(e,r),$m(r,e),Df(Qi),Ya=!!Vi,Qi=Vi=null,e.current=r,hg(r),Up(),K=c,X=i,ct.transition=l}else e.current=r;if(Ca&&(Ca=!1,ps=e,ml=a),l=e.pendingLanes,l===0&&(ws=null),Wp(r.stateNode),Xe(e,he()),s!==null)for(n=e.onRecoverableError,r=0;r<s.length;r++)a=s[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(hl)throw hl=!1,e=mo,mo=null,e;return ml&1&&e.tag!==0&&Rr(),l=e.pendingLanes,l&1?e===xo?Pn++:(Pn=0,xo=e):Pn=0,Rs(),null}function Rr(){if(ps!==null){var e=Sh(ml),s=ct.transition,r=X;try{if(ct.transition=null,X=16>e?16:e,ps===null)var n=!1;else{if(e=ps,ps=null,ml=0,K&6)throw Error(A(331));var a=K;for(K|=4,I=e.current;I!==null;){var l=I,i=l.child;if(I.flags&16){var c=l.deletions;if(c!==null){for(var o=0;o<c.length;o++){var d=c[o];for(I=d;I!==null;){var u=I;switch(u.tag){case 0:case 11:case 15:Sn(8,u,l)}var h=u.child;if(h!==null)h.return=u,I=h;else for(;I!==null;){u=I;var m=u.sibling,g=u.return;if(Dm(u),u===d){I=null;break}if(m!==null){m.return=g,I=m;break}I=g}}}var p=l.alternate;if(p!==null){var j=p.child;if(j!==null){p.child=null;do{var w=j.sibling;j.sibling=null,j=w}while(j!==null)}}I=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,I=i;else e:for(;I!==null;){if(l=I,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Sn(9,l,l.return)}var x=l.sibling;if(x!==null){x.return=l.return,I=x;break e}I=l.return}}var f=e.current;for(I=f;I!==null;){i=I;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,I=y;else e:for(i=f;I!==null;){if(c=I,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Rl(9,c)}}catch(k){de(c,c.return,k)}if(c===i){I=null;break e}var N=c.sibling;if(N!==null){N.return=c.return,I=N;break e}I=c.return}}if(K=a,Rs(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(kl,e)}catch{}n=!0}return n}finally{X=r,ct.transition=s}}return!1}function Yd(e,s,r){s=Xr(r,s),s=Sm(e,s,1),e=Ns(e,s,1),s=$e(),e!==null&&(ta(e,1,s),Xe(e,s))}function de(e,s,r){if(e.tag===3)Yd(e,e,r);else for(;s!==null;){if(s.tag===3){Yd(s,e,r);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ws===null||!ws.has(n))){e=Xr(r,e),e=_m(s,e,1),s=Ns(s,e,1),e=$e(),s!==null&&(ta(s,1,e),Xe(s,e));break}}s=s.return}}function yg(e,s,r){var n=e.pingCache;n!==null&&n.delete(s),s=$e(),e.pingedLanes|=e.suspendedLanes&r,we===e&&(_e&r)===r&&(ye===4||ye===3&&(_e&130023424)===_e&&500>he()-Cc?Ys(e,0):kc|=r),Xe(e,s)}function Km(e,s){s===0&&(e.mode&1?(s=pa,pa<<=1,!(pa&130023424)&&(pa=4194304)):s=1);var r=$e();e=qt(e,s),e!==null&&(ta(e,s,r),Xe(e,r))}function vg(e){var s=e.memoizedState,r=0;s!==null&&(r=s.retryLane),Km(e,r)}function jg(e,s){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(A(314))}n!==null&&n.delete(s),Km(e,r)}var qm;qm=function(e,s,r){if(e!==null)if(e.memoizedProps!==s.pendingProps||qe.current)Ke=!0;else{if(!(e.lanes&r)&&!(s.flags&128))return Ke=!1,ig(e,s,r);Ke=!!(e.flags&131072)}else Ke=!1,se&&s.flags&1048576&&Jh(s,nl,s.index);switch(s.lanes=0,s.tag){case 2:var n=s.type;$a(e,s),e=s.pendingProps;var a=Qr(s,Me.current);Ar(s,r),a=yc(null,s,n,e,a,r);var l=vc();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ge(n)?(l=!0,sl(s)):l=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,mc(s),a.updater=Al,s.stateNode=a,a._reactInternals=s,to(s,n,e,r),s=no(null,s,n,!0,l,r)):(s.tag=0,se&&l&&lc(s),Fe(null,s,a,r),s=s.child),s;case 16:n=s.elementType;e:{switch($a(e,s),e=s.pendingProps,a=n._init,n=a(n._payload),s.type=n,a=s.tag=Ng(n),e=xt(n,e),a){case 0:s=ro(null,s,n,e,r);break e;case 1:s=Ud(null,s,n,e,r);break e;case 11:s=zd(null,s,n,e,r);break e;case 14:s=$d(null,s,n,xt(n.type,e),r);break e}throw Error(A(306,n,""))}return s;case 0:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:xt(n,a),ro(e,s,n,a,r);case 1:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:xt(n,a),Ud(e,s,n,a,r);case 3:e:{if(Am(s),e===null)throw Error(A(387));n=s.pendingProps,l=s.memoizedState,a=l.element,nm(e,s),il(s,n,null,r);var i=s.memoizedState;if(n=i.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){a=Xr(Error(A(423)),s),s=Bd(e,s,n,r,a);break e}else if(n!==a){a=Xr(Error(A(424)),s),s=Bd(e,s,n,r,a);break e}else for(Ze=bs(s.stateNode.containerInfo.firstChild),et=s,se=!0,yt=null,r=sm(s,null,n,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Kr(),n===a){s=Gt(e,s,r);break e}Fe(e,s,n,r)}s=s.child}return s;case 5:return am(s),e===null&&Ji(s),n=s.type,a=s.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,Ki(n,a)?i=null:l!==null&&Ki(n,l)&&(s.flags|=32),Lm(e,s),Fe(e,s,i,r),s.child;case 6:return e===null&&Ji(s),null;case 13:return Rm(e,s,r);case 4:return xc(s,s.stateNode.containerInfo),n=s.pendingProps,e===null?s.child=qr(s,null,n,r):Fe(e,s,n,r),s.child;case 11:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:xt(n,a),zd(e,s,n,a,r);case 7:return Fe(e,s,s.pendingProps,r),s.child;case 8:return Fe(e,s,s.pendingProps.children,r),s.child;case 12:return Fe(e,s,s.pendingProps.children,r),s.child;case 10:e:{if(n=s.type._context,a=s.pendingProps,l=s.memoizedProps,i=a.value,Y(al,n._currentValue),n._currentValue=i,l!==null)if(bt(l.value,i)){if(l.children===a.children&&!qe.current){s=Gt(e,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var c=l.dependencies;if(c!==null){i=l.child;for(var o=c.firstContext;o!==null;){if(o.context===n){if(l.tag===1){o=Ht(-1,r&-r),o.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?o.next=o:(o.next=u.next,u.next=o),d.pending=o}}l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Zi(l.return,r,s),c.lanes|=r;break}o=o.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(A(341));i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Zi(i,r,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Fe(e,s,a.children,r),s=s.child}return s;case 9:return a=s.type,n=s.pendingProps.children,Ar(s,r),a=dt(a),n=n(a),s.flags|=1,Fe(e,s,n,r),s.child;case 14:return n=s.type,a=xt(n,s.pendingProps),a=xt(n.type,a),$d(e,s,n,a,r);case 15:return Pm(e,s,s.type,s.pendingProps,r);case 17:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:xt(n,a),$a(e,s),s.tag=1,Ge(n)?(e=!0,sl(s)):e=!1,Ar(s,r),Cm(s,n,a),to(s,n,a,r),no(null,s,n,!0,e,r);case 19:return Mm(e,s,r);case 22:return Em(e,s,r)}throw Error(A(156,s.tag))};function Gm(e,s){return Nh(e,s)}function bg(e,s,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ot(e,s,r,n){return new bg(e,s,r,n)}function Ec(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ng(e){if(typeof e=="function")return Ec(e)?1:0;if(e!=null){if(e=e.$$typeof,e===qo)return 11;if(e===Go)return 14}return 2}function Cs(e,s){var r=e.alternate;return r===null?(r=ot(e.tag,s,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=s,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,s=e.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ha(e,s,r,n,a,l){var i=2;if(n=e,typeof e=="function")Ec(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case pr:return Js(r.children,a,l,s);case Ko:i=8,a|=8;break;case Ci:return e=ot(12,r,s,a|2),e.elementType=Ci,e.lanes=l,e;case Si:return e=ot(13,r,s,a),e.elementType=Si,e.lanes=l,e;case _i:return e=ot(19,r,s,a),e.elementType=_i,e.lanes=l,e;case ah:return Tl(r,a,l,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rh:i=10;break e;case nh:i=9;break e;case qo:i=11;break e;case Go:i=14;break e;case ts:i=16,n=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return s=ot(i,r,s,a),s.elementType=e,s.type=n,s.lanes=l,s}function Js(e,s,r,n){return e=ot(7,e,n,s),e.lanes=r,e}function Tl(e,s,r,n){return e=ot(22,e,n,s),e.elementType=ah,e.lanes=r,e.stateNode={isHidden:!1},e}function vi(e,s,r){return e=ot(6,e,null,s),e.lanes=r,e}function ji(e,s,r){return s=ot(4,e.children!==null?e.children:[],e.key,s),s.lanes=r,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function wg(e,s,r,n,a){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ei(0),this.expirationTimes=ei(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ei(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Lc(e,s,r,n,a,l,i,c,o){return e=new wg(e,s,r,c,o),s===1?(s=1,l===!0&&(s|=8)):s=0,l=ot(3,null,null,s),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},mc(l),e}function kg(e,s,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xr,key:n==null?null:""+n,children:e,containerInfo:s,implementation:r}}function Xm(e){if(!e)return Es;e=e._reactInternals;e:{if(cr(e)!==e||e.tag!==1)throw Error(A(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ge(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(A(171))}if(e.tag===1){var r=e.type;if(Ge(r))return Xh(e,r,s)}return s}function Ym(e,s,r,n,a,l,i,c,o){return e=Lc(r,n,!0,e,a,l,i,c,o),e.context=Xm(null),r=e.current,n=$e(),a=ks(r),l=Ht(n,a),l.callback=s??null,Ns(r,l,a),e.current.lanes=a,ta(e,a,n),Xe(e,n),e}function Il(e,s,r,n){var a=s.current,l=$e(),i=ks(a);return r=Xm(r),s.context===null?s.context=r:s.pendingContext=r,s=Ht(l,i),s.payload={element:e},n=n===void 0?null:n,n!==null&&(s.callback=n),e=Ns(a,s,i),e!==null&&(jt(e,a,i,l),Da(e,a,i)),i}function pl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jd(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<s?r:s}}function Ac(e,s){Jd(e,s),(e=e.alternate)&&Jd(e,s)}function Cg(){return null}var Jm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Rc(e){this._internalRoot=e}Ol.prototype.render=Rc.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(A(409));Il(e,s,null,null)};Ol.prototype.unmount=Rc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;nr(function(){Il(null,e,null,null)}),s[Kt]=null}};function Ol(e){this._internalRoot=e}Ol.prototype.unstable_scheduleHydration=function(e){if(e){var s=Eh();e={blockedOn:null,target:e,priority:s};for(var r=0;r<rs.length&&s!==0&&s<rs[r].priority;r++);rs.splice(r,0,e),r===0&&Ah(e)}};function Mc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Dl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zd(){}function Sg(e,s,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var d=pl(i);l.call(d)}}var i=Ym(s,n,e,0,null,!1,!1,"",Zd);return e._reactRootContainer=i,e[Kt]=i.current,Dn(e.nodeType===8?e.parentNode:e),nr(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var c=n;n=function(){var d=pl(o);c.call(d)}}var o=Lc(e,0,!1,null,null,!1,!1,"",Zd);return e._reactRootContainer=o,e[Kt]=o.current,Dn(e.nodeType===8?e.parentNode:e),nr(function(){Il(s,o,r,n)}),o}function Fl(e,s,r,n,a){var l=r._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var c=a;a=function(){var o=pl(i);c.call(o)}}Il(s,i,e,a)}else i=Sg(r,s,e,a,n);return pl(i)}_h=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var r=gn(s.pendingLanes);r!==0&&(Jo(s,r|1),Xe(s,he()),!(K&6)&&(Yr=he()+500,Rs()))}break;case 13:nr(function(){var n=qt(e,1);if(n!==null){var a=$e();jt(n,e,1,a)}}),Ac(e,1)}};Zo=function(e){if(e.tag===13){var s=qt(e,134217728);if(s!==null){var r=$e();jt(s,e,134217728,r)}Ac(e,134217728)}};Ph=function(e){if(e.tag===13){var s=ks(e),r=qt(e,s);if(r!==null){var n=$e();jt(r,e,s,n)}Ac(e,s)}};Eh=function(){return X};Lh=function(e,s){var r=X;try{return X=e,s()}finally{X=r}};Di=function(e,s,r){switch(s){case"input":if(Li(e,r),s=r.name,r.type==="radio"&&s!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var n=r[s];if(n!==e&&n.form===e.form){var a=Pl(n);if(!a)throw Error(A(90));ih(n),Li(n,a)}}}break;case"textarea":ch(e,r);break;case"select":s=r.value,s!=null&&_r(e,!!r.multiple,s,!1)}};fh=Sc;gh=nr;var _g={usingClientEntryPoint:!1,Events:[ra,vr,Pl,xh,ph,Sc]},mn={findFiberByHostInstance:Fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pg={bundleType:mn.bundleType,version:mn.version,rendererPackageName:mn.rendererPackageName,rendererConfig:mn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jh(e),e===null?null:e.stateNode},findFiberByHostInstance:mn.findFiberByHostInstance||Cg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sa.isDisabled&&Sa.supportsFiber)try{kl=Sa.inject(Pg),Lt=Sa}catch{}}st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_g;st.createPortal=function(e,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mc(s))throw Error(A(200));return kg(e,s,null,r)};st.createRoot=function(e,s){if(!Mc(e))throw Error(A(299));var r=!1,n="",a=Jm;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=Lc(e,1,!1,null,null,r,!1,n,a),e[Kt]=s.current,Dn(e.nodeType===8?e.parentNode:e),new Rc(s)};st.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=jh(s),e=e===null?null:e.stateNode,e};st.flushSync=function(e){return nr(e)};st.hydrate=function(e,s,r){if(!Dl(s))throw Error(A(200));return Fl(null,e,s,!0,r)};st.hydrateRoot=function(e,s,r){if(!Mc(e))throw Error(A(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",i=Jm;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),s=Ym(s,null,e,1,r??null,a,!1,l,i),e[Kt]=s.current,Dn(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,a]:s.mutableSourceEagerHydrationData.push(r,a);return new Ol(s)};st.render=function(e,s,r){if(!Dl(s))throw Error(A(200));return Fl(null,e,s,!1,r)};st.unmountComponentAtNode=function(e){if(!Dl(e))throw Error(A(40));return e._reactRootContainer?(nr(function(){Fl(null,null,e,!1,function(){e._reactRootContainer=null,e[Kt]=null})}),!0):!1};st.unstable_batchedUpdates=Sc;st.unstable_renderSubtreeIntoContainer=function(e,s,r,n){if(!Dl(r))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return Fl(e,s,r,!1,n)};st.version="18.3.1-next-f1338f8080-20240426";function Zm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zm)}catch(e){console.error(e)}}Zm(),Zu.exports=st;var Eg=Zu.exports,eu=Eg;wi.createRoot=eu.createRoot,wi.hydrateRoot=eu.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qn(){return Qn=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qn.apply(this,arguments)}var fs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(fs||(fs={}));const tu="popstate";function Lg(e){e===void 0&&(e={});function s(n,a){let{pathname:l,search:i,hash:c}=n.location;return go("",{pathname:l,search:i,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:fl(a)}return Rg(s,r,null,e)}function ue(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function Tc(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Ag(){return Math.random().toString(36).substr(2,8)}function su(e,s){return{usr:e.state,key:e.key,idx:s}}function go(e,s,r,n){return r===void 0&&(r=null),Qn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof s=="string"?sn(s):s,{state:r,key:s&&s.key||n||Ag()})}function fl(e){let{pathname:s="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function sn(e){let s={};if(e){let r=e.indexOf("#");r>=0&&(s.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(s.search=e.substr(n),e=e.substr(0,n)),e&&(s.pathname=e)}return s}function Rg(e,s,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,i=a.history,c=fs.Pop,o=null,d=u();d==null&&(d=0,i.replaceState(Qn({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function h(){c=fs.Pop;let w=u(),x=w==null?null:w-d;d=w,o&&o({action:c,location:j.location,delta:x})}function m(w,x){c=fs.Push;let f=go(j.location,w,x);d=u()+1;let y=su(f,d),N=j.createHref(f);try{i.pushState(y,"",N)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(N)}l&&o&&o({action:c,location:j.location,delta:1})}function g(w,x){c=fs.Replace;let f=go(j.location,w,x);d=u();let y=su(f,d),N=j.createHref(f);i.replaceState(y,"",N),l&&o&&o({action:c,location:j.location,delta:0})}function p(w){let x=a.location.origin!=="null"?a.location.origin:a.location.href,f=typeof w=="string"?w:fl(w);return f=f.replace(/ $/,"%20"),ue(x,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,x)}let j={get action(){return c},get location(){return e(a,i)},listen(w){if(o)throw new Error("A history only accepts one active listener");return a.addEventListener(tu,h),o=w,()=>{a.removeEventListener(tu,h),o=null}},createHref(w){return s(a,w)},createURL:p,encodeLocation(w){let x=p(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:g,go(w){return i.go(w)}};return j}var ru;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ru||(ru={}));function Mg(e,s,r){return r===void 0&&(r="/"),Tg(e,s,r)}function Tg(e,s,r,n){let a=typeof s=="string"?sn(s):s,l=Jr(a.pathname||"/",r);if(l==null)return null;let i=ex(e);Ig(i);let c=null;for(let o=0;c==null&&o<i.length;++o){let d=Qg(l);c=Wg(i[o],d)}return c}function ex(e,s,r,n){s===void 0&&(s=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(l,i,c)=>{let o={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};o.relativePath.startsWith("/")&&(ue(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(n.length));let d=Ss([n,o.relativePath]),u=r.concat(o);l.children&&l.children.length>0&&(ue(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ex(l.children,s,u,d)),!(l.path==null&&!l.index)&&s.push({path:d,score:Bg(d,l.index),routesMeta:u})};return e.forEach((l,i)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))a(l,i);else for(let o of tx(l.path))a(l,i,o)}),s}function tx(e){let s=e.split("/");if(s.length===0)return[];let[r,...n]=s,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let i=tx(n.join("/")),c=[];return c.push(...i.map(o=>o===""?l:[l,o].join("/"))),a&&c.push(...i),c.map(o=>e.startsWith("/")&&o===""?"/":o)}function Ig(e){e.sort((s,r)=>s.score!==r.score?r.score-s.score:Hg(s.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Og=/^:[\w-]+$/,Dg=3,Fg=2,zg=1,$g=10,Ug=-2,nu=e=>e==="*";function Bg(e,s){let r=e.split("/"),n=r.length;return r.some(nu)&&(n+=Ug),s&&(n+=Fg),r.filter(a=>!nu(a)).reduce((a,l)=>a+(Og.test(l)?Dg:l===""?zg:$g),n)}function Hg(e,s){return e.length===s.length&&e.slice(0,-1).every((n,a)=>n===s[a])?e[e.length-1]-s[s.length-1]:0}function Wg(e,s,r){let{routesMeta:n}=e,a={},l="/",i=[];for(let c=0;c<n.length;++c){let o=n[c],d=c===n.length-1,u=l==="/"?s:s.slice(l.length)||"/",h=yo({path:o.relativePath,caseSensitive:o.caseSensitive,end:d},u),m=o.route;if(!h)return null;Object.assign(a,h.params),i.push({params:a,pathname:Ss([l,h.pathname]),pathnameBase:Yg(Ss([l,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(l=Ss([l,h.pathnameBase]))}return i}function yo(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Vg(e.path,e.caseSensitive,e.end),a=s.match(r);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:m,isOptional:g}=u;if(m==="*"){let j=c[h]||"";i=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const p=c[h];return g&&!p?d[m]=void 0:d[m]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:i,pattern:e}}function Vg(e,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),Tc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,o)=>(n.push({paramName:c,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),n]}function Qg(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Tc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),e}}function Jr(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const Kg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qg=e=>Kg.test(e);function Gg(e,s){s===void 0&&(s="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?sn(e):e,l;if(r)if(qg(r))l=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),Tc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?l=au(r.substring(1),"/"):l=au(r,s)}else l=s;return{pathname:l,search:Jg(n),hash:Zg(a)}}function au(e,s){let r=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function bi(e,s,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xg(e){return e.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function sx(e,s){let r=Xg(e);return s?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function rx(e,s,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=sn(e):(a=Qn({},e),ue(!a.pathname||!a.pathname.includes("?"),bi("?","pathname","search",a)),ue(!a.pathname||!a.pathname.includes("#"),bi("#","pathname","hash",a)),ue(!a.search||!a.search.includes("#"),bi("#","search","hash",a)));let l=e===""||a.pathname==="",i=l?"/":a.pathname,c;if(i==null)c=r;else{let h=s.length-1;if(!n&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),h-=1;a.pathname=m.join("/")}c=h>=0?s[h]:"/"}let o=Gg(a,c),d=i&&i!=="/"&&i.endsWith("/"),u=(l||i===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(d||u)&&(o.pathname+="/"),o}const Ss=e=>e.join("/").replace(/\/\/+/g,"/"),Yg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Jg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Zg=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ey(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nx=["post","put","patch","delete"];new Set(nx);const ty=["get",...nx];new Set(ty);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kn(){return Kn=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kn.apply(this,arguments)}const zl=v.createContext(null),ax=v.createContext(null),Ms=v.createContext(null),$l=v.createContext(null),Ts=v.createContext({outlet:null,matches:[],isDataRoute:!1}),lx=v.createContext(null);function sy(e,s){let{relative:r}=s===void 0?{}:s;aa()||ue(!1);let{basename:n,navigator:a}=v.useContext(Ms),{hash:l,pathname:i,search:c}=Ul(e,{relative:r}),o=i;return n!=="/"&&(o=i==="/"?n:Ss([n,i])),a.createHref({pathname:o,search:c,hash:l})}function aa(){return v.useContext($l)!=null}function dr(){return aa()||ue(!1),v.useContext($l).location}function ix(e){v.useContext(Ms).static||v.useLayoutEffect(e)}function Ce(){let{isDataRoute:e}=v.useContext(Ts);return e?py():ry()}function ry(){aa()||ue(!1);let e=v.useContext(zl),{basename:s,future:r,navigator:n}=v.useContext(Ms),{matches:a}=v.useContext(Ts),{pathname:l}=dr(),i=JSON.stringify(sx(a,r.v7_relativeSplatPath)),c=v.useRef(!1);return ix(()=>{c.current=!0}),v.useCallback(function(d,u){if(u===void 0&&(u={}),!c.current)return;if(typeof d=="number"){n.go(d);return}let h=rx(d,JSON.parse(i),l,u.relative==="path");e==null&&s!=="/"&&(h.pathname=h.pathname==="/"?s:Ss([s,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[s,n,i,l,e])}function Yt(){let{matches:e}=v.useContext(Ts),s=e[e.length-1];return s?s.params:{}}function Ul(e,s){let{relative:r}=s===void 0?{}:s,{future:n}=v.useContext(Ms),{matches:a}=v.useContext(Ts),{pathname:l}=dr(),i=JSON.stringify(sx(a,n.v7_relativeSplatPath));return v.useMemo(()=>rx(e,JSON.parse(i),l,r==="path"),[e,i,l,r])}function ny(e,s){return ay(e,s)}function ay(e,s,r,n){aa()||ue(!1);let{navigator:a}=v.useContext(Ms),{matches:l}=v.useContext(Ts),i=l[l.length-1],c=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let d=dr(),u;if(s){var h;let w=typeof s=="string"?sn(s):s;o==="/"||(h=w.pathname)!=null&&h.startsWith(o)||ue(!1),u=w}else u=d;let m=u.pathname||"/",g=m;if(o!=="/"){let w=o.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=Mg(e,{pathname:g}),j=dy(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Ss([o,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?o:Ss([o,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),l,r,n);return s&&j?v.createElement($l.Provider,{value:{location:Kn({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:fs.Pop}},j):j}function ly(){let e=xy(),s=ey(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},s),r?v.createElement("pre",{style:a},r):null,null)}const iy=v.createElement(ly,null);class oy extends v.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?v.createElement(Ts.Provider,{value:this.props.routeContext},v.createElement(lx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cy(e){let{routeContext:s,match:r,children:n}=e,a=v.useContext(zl);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(Ts.Provider,{value:s},n)}function dy(e,s,r,n){var a;if(s===void 0&&(s=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var l;if(!r)return null;if(r.errors)e=r.matches;else if((l=n)!=null&&l.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,c=(a=r)==null?void 0:a.errors;if(c!=null){let u=i.findIndex(h=>h.route.id&&(c==null?void 0:c[h.route.id])!==void 0);u>=0||ue(!1),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<i.length;u++){let h=i[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:m,errors:g}=r,p=h.route.loader&&m[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||p){o=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,h,m)=>{let g,p=!1,j=null,w=null;r&&(g=c&&h.route.id?c[h.route.id]:void 0,j=h.route.errorElement||iy,o&&(d<0&&m===0?(fy("route-fallback"),p=!0,w=null):d===m&&(p=!0,w=h.route.hydrateFallbackElement||null)));let x=s.concat(i.slice(0,m+1)),f=()=>{let y;return g?y=j:p?y=w:h.route.Component?y=v.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=u,v.createElement(cy,{match:h,routeContext:{outlet:u,matches:x,isDataRoute:r!=null},children:y})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?v.createElement(oy,{location:r.location,revalidation:r.revalidation,component:j,error:g,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):f()},null)}var ox=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ox||{}),cx=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(cx||{});function uy(e){let s=v.useContext(zl);return s||ue(!1),s}function hy(e){let s=v.useContext(ax);return s||ue(!1),s}function my(e){let s=v.useContext(Ts);return s||ue(!1),s}function dx(e){let s=my(),r=s.matches[s.matches.length-1];return r.route.id||ue(!1),r.route.id}function xy(){var e;let s=v.useContext(lx),r=hy(),n=dx();return s!==void 0?s:(e=r.errors)==null?void 0:e[n]}function py(){let{router:e}=uy(ox.UseNavigateStable),s=dx(cx.UseNavigateStable),r=v.useRef(!1);return ix(()=>{r.current=!0}),v.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Kn({fromRouteId:s},l)))},[e,s])}const lu={};function fy(e,s,r){lu[e]||(lu[e]=!0)}function gy(e,s){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function q(e){ue(!1)}function yy(e){let{basename:s="/",children:r=null,location:n,navigationType:a=fs.Pop,navigator:l,static:i=!1,future:c}=e;aa()&&ue(!1);let o=s.replace(/^\/*/,"/"),d=v.useMemo(()=>({basename:o,navigator:l,static:i,future:Kn({v7_relativeSplatPath:!1},c)}),[o,c,l,i]);typeof n=="string"&&(n=sn(n));let{pathname:u="/",search:h="",hash:m="",state:g=null,key:p="default"}=n,j=v.useMemo(()=>{let w=Jr(u,o);return w==null?null:{location:{pathname:w,search:h,hash:m,state:g,key:p},navigationType:a}},[o,u,h,m,g,p,a]);return j==null?null:v.createElement(Ms.Provider,{value:d},v.createElement($l.Provider,{children:r,value:j}))}function vo(e){let{children:s,location:r}=e;return ny(jo(s),r)}new Promise(()=>{});function jo(e,s){s===void 0&&(s=[]);let r=[];return v.Children.forEach(e,(n,a)=>{if(!v.isValidElement(n))return;let l=[...s,a];if(n.type===v.Fragment){r.push.apply(r,jo(n.props.children,l));return}n.type!==q&&ue(!1),!n.props.index||!n.props.children||ue(!1);let i={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=jo(n.props.children,l)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gl(){return gl=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gl.apply(this,arguments)}function ux(e,s){if(e==null)return{};var r={},n=Object.keys(e),a,l;for(l=0;l<n.length;l++)a=n[l],!(s.indexOf(a)>=0)&&(r[a]=e[a]);return r}function vy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function jy(e,s){return e.button===0&&(!s||s==="_self")&&!vy(e)}function bo(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((s,r)=>{let n=e[r];return s.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function by(e,s){let r=bo(e);return s&&s.forEach((n,a)=>{r.has(a)||s.getAll(a).forEach(l=>{r.append(a,l)})}),r}const Ny=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wy=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ky="6";try{window.__reactRouterVersion=ky}catch{}const Cy=v.createContext({isTransitioning:!1}),Sy="startTransition",iu=gp[Sy];function _y(e){let{basename:s,children:r,future:n,window:a}=e,l=v.useRef();l.current==null&&(l.current=Lg({window:a,v5Compat:!0}));let i=l.current,[c,o]=v.useState({action:i.action,location:i.location}),{v7_startTransition:d}=n||{},u=v.useCallback(h=>{d&&iu?iu(()=>o(h)):o(h)},[o,d]);return v.useLayoutEffect(()=>i.listen(u),[i,u]),v.useEffect(()=>gy(n),[n]),v.createElement(yy,{basename:s,children:r,location:c.location,navigationType:c.action,navigator:i,future:n})}const Py=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ey=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=v.forwardRef(function(s,r){let{onClick:n,relative:a,reloadDocument:l,replace:i,state:c,target:o,to:d,preventScrollReset:u,viewTransition:h}=s,m=ux(s,Ny),{basename:g}=v.useContext(Ms),p,j=!1;if(typeof d=="string"&&Ey.test(d)&&(p=d,Py))try{let y=new URL(window.location.href),N=d.startsWith("//")?new URL(y.protocol+d):new URL(d),k=Jr(N.pathname,g);N.origin===y.origin&&k!=null?d=k+N.search+N.hash:j=!0}catch{}let w=sy(d,{relative:a}),x=Ry(d,{replace:i,state:c,target:o,preventScrollReset:u,relative:a,viewTransition:h});function f(y){n&&n(y),y.defaultPrevented||x(y)}return v.createElement("a",gl({},m,{href:p||w,onClick:j||l?n:f,ref:r,target:o}))}),Ly=v.forwardRef(function(s,r){let{"aria-current":n="page",caseSensitive:a=!1,className:l="",end:i=!1,style:c,to:o,viewTransition:d,children:u}=s,h=ux(s,wy),m=Ul(o,{relative:h.relative}),g=dr(),p=v.useContext(ax),{navigator:j,basename:w}=v.useContext(Ms),x=p!=null&&My(m)&&d===!0,f=j.encodeLocation?j.encodeLocation(m).pathname:m.pathname,y=g.pathname,N=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;a||(y=y.toLowerCase(),N=N?N.toLowerCase():null,f=f.toLowerCase()),N&&w&&(N=Jr(N,w)||N);const k=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let S=y===f||!i&&y.startsWith(f)&&y.charAt(k)==="/",C=N!=null&&(N===f||!i&&N.startsWith(f)&&N.charAt(f.length)==="/"),_={isActive:S,isPending:C,isTransitioning:x},R=S?n:void 0,L;typeof l=="function"?L=l(_):L=[l,S?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let D=typeof c=="function"?c(_):c;return v.createElement(Re,gl({},h,{"aria-current":R,className:L,ref:r,style:D,to:o,viewTransition:d}),typeof u=="function"?u(_):u)});var No;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(No||(No={}));var ou;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ou||(ou={}));function Ay(e){let s=v.useContext(zl);return s||ue(!1),s}function Ry(e,s){let{target:r,replace:n,state:a,preventScrollReset:l,relative:i,viewTransition:c}=s===void 0?{}:s,o=Ce(),d=dr(),u=Ul(e,{relative:i});return v.useCallback(h=>{if(jy(h,r)){h.preventDefault();let m=n!==void 0?n:fl(d)===fl(u);o(e,{replace:m,state:a,preventScrollReset:l,relative:i,viewTransition:c})}},[d,o,u,n,a,r,e,l,i,c])}function la(e){let s=v.useRef(bo(e)),r=v.useRef(!1),n=dr(),a=v.useMemo(()=>by(n.search,r.current?null:s.current),[n.search]),l=Ce(),i=v.useCallback((c,o)=>{const d=bo(typeof c=="function"?c(a):c);r.current=!0,l("?"+d,o)},[l,a]);return[a,i]}function My(e,s){s===void 0&&(s={});let r=v.useContext(Cy);r==null&&ue(!1);let{basename:n}=Ay(No.useViewTransitionState),a=Ul(e,{relative:s.relative});if(!r.isTransitioning)return!1;let l=Jr(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=Jr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return yo(a.pathname,i)!=null||yo(a.pathname,l)!=null}var rn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ty={setTimeout:(e,s)=>setTimeout(e,s),clearTimeout:e=>clearTimeout(e),setInterval:(e,s)=>setInterval(e,s),clearInterval:e=>clearInterval(e)},as,zo,Au,Iy=(Au=class{constructor(){O(this,as,Ty);O(this,zo,!1)}setTimeoutProvider(e){M(this,as,e)}setTimeout(e,s){return b(this,as).setTimeout(e,s)}clearTimeout(e){b(this,as).clearTimeout(e)}setInterval(e,s){return b(this,as).setInterval(e,s)}clearInterval(e){b(this,as).clearInterval(e)}},as=new WeakMap,zo=new WeakMap,Au),Us=new Iy;function Oy(e){setTimeout(e,0)}var ar=typeof window>"u"||"Deno"in globalThis;function ze(){}function Dy(e,s){return typeof e=="function"?e(s):e}function wo(e){return typeof e=="number"&&e>=0&&e!==1/0}function hx(e,s){return Math.max(e+(s||0)-Date.now(),0)}function _s(e,s){return typeof e=="function"?e(s):e}function at(e,s){return typeof e=="function"?e(s):e}function cu(e,s){const{type:r="all",exact:n,fetchStatus:a,predicate:l,queryKey:i,stale:c}=e;if(i){if(n){if(s.queryHash!==Ic(i,s.options))return!1}else if(!qn(s.queryKey,i))return!1}if(r!=="all"){const o=s.isActive();if(r==="active"&&!o||r==="inactive"&&o)return!1}return!(typeof c=="boolean"&&s.isStale()!==c||a&&a!==s.state.fetchStatus||l&&!l(s))}function du(e,s){const{exact:r,status:n,predicate:a,mutationKey:l}=e;if(l){if(!s.options.mutationKey)return!1;if(r){if(lr(s.options.mutationKey)!==lr(l))return!1}else if(!qn(s.options.mutationKey,l))return!1}return!(n&&s.state.status!==n||a&&!a(s))}function Ic(e,s){return((s==null?void 0:s.queryKeyHashFn)||lr)(e)}function lr(e){return JSON.stringify(e,(s,r)=>ko(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function qn(e,s){return e===s?!0:typeof e!=typeof s?!1:e&&s&&typeof e=="object"&&typeof s=="object"?Object.keys(s).every(r=>qn(e[r],s[r])):!1}var Fy=Object.prototype.hasOwnProperty;function mx(e,s){if(e===s)return e;const r=uu(e)&&uu(s);if(!r&&!(ko(e)&&ko(s)))return s;const a=(r?e:Object.keys(e)).length,l=r?s:Object.keys(s),i=l.length,c=r?new Array(i):{};let o=0;for(let d=0;d<i;d++){const u=r?d:l[d],h=e[u],m=s[u];if(h===m){c[u]=h,(r?d<a:Fy.call(e,u))&&o++;continue}if(h===null||m===null||typeof h!="object"||typeof m!="object"){c[u]=m;continue}const g=mx(h,m);c[u]=g,g===h&&o++}return a===i&&o===a?e:c}function yl(e,s){if(!s||Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}function uu(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ko(e){if(!hu(e))return!1;const s=e.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!hu(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hu(e){return Object.prototype.toString.call(e)==="[object Object]"}function zy(e){return new Promise(s=>{Us.setTimeout(s,e)})}function Co(e,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,s):r.structuralSharing!==!1?mx(e,s):s}function $y(e,s,r=0){const n=[...e,s];return r&&n.length>r?n.slice(1):n}function Uy(e,s,r=0){const n=[s,...e];return r&&n.length>r?n.slice(0,-1):n}var Oc=Symbol();function xx(e,s){return!e.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!e.queryFn||e.queryFn===Oc?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Dc(e,s){return typeof e=="function"?e(...s):!!e}function By(e,s,r){let n=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??(a=s()),n||(n=!0,a.aborted?r():a.addEventListener("abort",r,{once:!0})),a)}),e}var Bs,ls,Mr,Ru,Hy=(Ru=class extends rn{constructor(){super();O(this,Bs);O(this,ls);O(this,Mr);M(this,Mr,s=>{if(!ar&&window.addEventListener){const r=()=>s();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){b(this,ls)||this.setEventListener(b(this,Mr))}onUnsubscribe(){var s;this.hasListeners()||((s=b(this,ls))==null||s.call(this),M(this,ls,void 0))}setEventListener(s){var r;M(this,Mr,s),(r=b(this,ls))==null||r.call(this),M(this,ls,s(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(s){b(this,Bs)!==s&&(M(this,Bs,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(r=>{r(s)})}isFocused(){var s;return typeof b(this,Bs)=="boolean"?b(this,Bs):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},Bs=new WeakMap,ls=new WeakMap,Mr=new WeakMap,Ru),Fc=new Hy;function So(){let e,s;const r=new Promise((a,l)=>{e=a,s=l});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),s(a)},r}var Wy=Oy;function Vy(){let e=[],s=0,r=c=>{c()},n=c=>{c()},a=Wy;const l=c=>{s?e.push(c):a(()=>{r(c)})},i=()=>{const c=e;e=[],c.length&&a(()=>{n(()=>{c.forEach(o=>{r(o)})})})};return{batch:c=>{let o;s++;try{o=c()}finally{s--,s||i()}return o},batchCalls:c=>(...o)=>{l(()=>{c(...o)})},schedule:l,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{n=c},setScheduler:c=>{a=c}}}var ge=Vy(),Tr,is,Ir,Mu,Qy=(Mu=class extends rn{constructor(){super();O(this,Tr,!0);O(this,is);O(this,Ir);M(this,Ir,s=>{if(!ar&&window.addEventListener){const r=()=>s(!0),n=()=>s(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){b(this,is)||this.setEventListener(b(this,Ir))}onUnsubscribe(){var s;this.hasListeners()||((s=b(this,is))==null||s.call(this),M(this,is,void 0))}setEventListener(s){var r;M(this,Ir,s),(r=b(this,is))==null||r.call(this),M(this,is,s(this.setOnline.bind(this)))}setOnline(s){b(this,Tr)!==s&&(M(this,Tr,s),this.listeners.forEach(n=>{n(s)}))}isOnline(){return b(this,Tr)}},Tr=new WeakMap,is=new WeakMap,Ir=new WeakMap,Mu),vl=new Qy;function Ky(e){return Math.min(1e3*2**e,3e4)}function px(e){return(e??"online")==="online"?vl.isOnline():!0}var _o=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function fx(e){let s=!1,r=0,n;const a=So(),l=()=>a.status!=="pending",i=j=>{var w;if(!l()){const x=new _o(j);m(x),(w=e.onCancel)==null||w.call(e,x)}},c=()=>{s=!0},o=()=>{s=!1},d=()=>Fc.isFocused()&&(e.networkMode==="always"||vl.isOnline())&&e.canRun(),u=()=>px(e.networkMode)&&e.canRun(),h=j=>{l()||(n==null||n(),a.resolve(j))},m=j=>{l()||(n==null||n(),a.reject(j))},g=()=>new Promise(j=>{var w;n=x=>{(l()||d())&&j(x)},(w=e.onPause)==null||w.call(e)}).then(()=>{var j;n=void 0,l()||(j=e.onContinue)==null||j.call(e)}),p=()=>{if(l())return;let j;const w=r===0?e.initialPromise:void 0;try{j=w??e.fn()}catch(x){j=Promise.reject(x)}Promise.resolve(j).then(h).catch(x=>{var S;if(l())return;const f=e.retry??(ar?0:3),y=e.retryDelay??Ky,N=typeof y=="function"?y(r,x):y,k=f===!0||typeof f=="number"&&r<f||typeof f=="function"&&f(r,x);if(s||!k){m(x);return}r++,(S=e.onFail)==null||S.call(e,r,x),zy(N).then(()=>d()?void 0:g()).then(()=>{s?m(x):p()})})};return{promise:a,status:()=>a.status,cancel:i,continue:()=>(n==null||n(),a),cancelRetry:c,continueRetry:o,canStart:u,start:()=>(u()?p():g().then(p),a)}}var Hs,Tu,gx=(Tu=class{constructor(){O(this,Hs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wo(this.gcTime)&&M(this,Hs,Us.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ar?1/0:5*60*1e3))}clearGcTimeout(){b(this,Hs)&&(Us.clearTimeout(b(this,Hs)),M(this,Hs,void 0))}},Hs=new WeakMap,Tu),Ws,Or,nt,Vs,be,Gn,Qs,pt,Tt,Iu,qy=(Iu=class extends gx{constructor(s){super();O(this,pt);O(this,Ws);O(this,Or);O(this,nt);O(this,Vs);O(this,be);O(this,Gn);O(this,Qs);M(this,Qs,!1),M(this,Gn,s.defaultOptions),this.setOptions(s.options),this.observers=[],M(this,Vs,s.client),M(this,nt,b(this,Vs).getQueryCache()),this.queryKey=s.queryKey,this.queryHash=s.queryHash,M(this,Ws,xu(this.options)),this.state=s.state??b(this,Ws),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=b(this,be))==null?void 0:s.promise}setOptions(s){if(this.options={...b(this,Gn),...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=xu(this.options);r.data!==void 0&&(this.setState(mu(r.data,r.dataUpdatedAt)),M(this,Ws,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&b(this,nt).remove(this)}setData(s,r){const n=Co(this.state.data,s,this.options);return B(this,pt,Tt).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(s,r){B(this,pt,Tt).call(this,{type:"setState",state:s,setStateOptions:r})}cancel(s){var n,a;const r=(n=b(this,be))==null?void 0:n.promise;return(a=b(this,be))==null||a.cancel(s),r?r.then(ze).catch(ze):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(b(this,Ws))}isActive(){return this.observers.some(s=>at(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Oc||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>_s(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!hx(this.state.dataUpdatedAt,s)}onFocus(){var r;const s=this.observers.find(n=>n.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(r=b(this,be))==null||r.continue()}onOnline(){var r;const s=this.observers.find(n=>n.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(r=b(this,be))==null||r.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),b(this,nt).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(r=>r!==s),this.observers.length||(b(this,be)&&(b(this,Qs)?b(this,be).cancel({revert:!0}):b(this,be).cancelRetry()),this.scheduleGc()),b(this,nt).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||B(this,pt,Tt).call(this,{type:"invalidate"})}async fetch(s,r){var o,d,u,h,m,g,p,j,w,x,f,y;if(this.state.fetchStatus!=="idle"&&((o=b(this,be))==null?void 0:o.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(b(this,be))return b(this,be).continueRetry(),b(this,be).promise}if(s&&this.setOptions(s),!this.options.queryFn){const N=this.observers.find(k=>k.options.queryFn);N&&this.setOptions(N.options)}const n=new AbortController,a=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(M(this,Qs,!0),n.signal)})},l=()=>{const N=xx(this.options,r),S=(()=>{const C={client:b(this,Vs),queryKey:this.queryKey,meta:this.meta};return a(C),C})();return M(this,Qs,!1),this.options.persister?this.options.persister(N,S,this):N(S)},c=(()=>{const N={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:b(this,Vs),state:this.state,fetchFn:l};return a(N),N})();(d=this.options.behavior)==null||d.onFetch(c,this),M(this,Or,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=c.fetchOptions)==null?void 0:u.meta))&&B(this,pt,Tt).call(this,{type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta}),M(this,be,fx({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,onCancel:N=>{N instanceof _o&&N.revert&&this.setState({...b(this,Or),fetchStatus:"idle"}),n.abort()},onFail:(N,k)=>{B(this,pt,Tt).call(this,{type:"failed",failureCount:N,error:k})},onPause:()=>{B(this,pt,Tt).call(this,{type:"pause"})},onContinue:()=>{B(this,pt,Tt).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const N=await b(this,be).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(g=(m=b(this,nt).config).onSuccess)==null||g.call(m,N,this),(j=(p=b(this,nt).config).onSettled)==null||j.call(p,N,this.state.error,this),N}catch(N){if(N instanceof _o){if(N.silent)return b(this,be).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw B(this,pt,Tt).call(this,{type:"error",error:N}),(x=(w=b(this,nt).config).onError)==null||x.call(w,N,this),(y=(f=b(this,nt).config).onSettled)==null||y.call(f,this.state.data,N,this),N}finally{this.scheduleGc()}}},Ws=new WeakMap,Or=new WeakMap,nt=new WeakMap,Vs=new WeakMap,be=new WeakMap,Gn=new WeakMap,Qs=new WeakMap,pt=new WeakSet,Tt=function(s){const r=n=>{switch(s.type){case"failed":return{...n,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...yx(n.data,this.options),fetchMeta:s.meta??null};case"success":const a={...n,...mu(s.data,s.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return M(this,Or,s.manual?a:void 0),a;case"error":const l=s.error;return{...n,error:l,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...s.state}}};this.state=r(this.state),ge.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),b(this,nt).notify({query:this,type:"updated",action:s})})},Iu);function yx(e,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:px(s.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function mu(e,s){return{data:e,dataUpdatedAt:s??Date.now(),error:null,isInvalidated:!1,status:"success"}}function xu(e){const s=typeof e.initialData=="function"?e.initialData():e.initialData,r=s!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var We,Q,Xn,Oe,Ks,Dr,Dt,os,Yn,Fr,zr,qs,Gs,cs,$r,G,vn,Po,Eo,Lo,Ao,Ro,Mo,To,vx,Ou,Gy=(Ou=class extends rn{constructor(s,r){super();O(this,G);O(this,We);O(this,Q);O(this,Xn);O(this,Oe);O(this,Ks);O(this,Dr);O(this,Dt);O(this,os);O(this,Yn);O(this,Fr);O(this,zr);O(this,qs);O(this,Gs);O(this,cs);O(this,$r,new Set);this.options=r,M(this,We,s),M(this,os,null),M(this,Dt,So()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(b(this,Q).addObserver(this),pu(b(this,Q),this.options)?B(this,G,vn).call(this):this.updateResult(),B(this,G,Ao).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Io(b(this,Q),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Io(b(this,Q),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,B(this,G,Ro).call(this),B(this,G,Mo).call(this),b(this,Q).removeObserver(this)}setOptions(s){const r=this.options,n=b(this,Q);if(this.options=b(this,We).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof at(this.options.enabled,b(this,Q))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");B(this,G,To).call(this),b(this,Q).setOptions(this.options),r._defaulted&&!yl(this.options,r)&&b(this,We).getQueryCache().notify({type:"observerOptionsUpdated",query:b(this,Q),observer:this});const a=this.hasListeners();a&&fu(b(this,Q),n,this.options,r)&&B(this,G,vn).call(this),this.updateResult(),a&&(b(this,Q)!==n||at(this.options.enabled,b(this,Q))!==at(r.enabled,b(this,Q))||_s(this.options.staleTime,b(this,Q))!==_s(r.staleTime,b(this,Q)))&&B(this,G,Po).call(this);const l=B(this,G,Eo).call(this);a&&(b(this,Q)!==n||at(this.options.enabled,b(this,Q))!==at(r.enabled,b(this,Q))||l!==b(this,cs))&&B(this,G,Lo).call(this,l)}getOptimisticResult(s){const r=b(this,We).getQueryCache().build(b(this,We),s),n=this.createResult(r,s);return Yy(this,n)&&(M(this,Oe,n),M(this,Dr,this.options),M(this,Ks,b(this,Q).state)),n}getCurrentResult(){return b(this,Oe)}trackResult(s,r){return new Proxy(s,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&b(this,Dt).status==="pending"&&b(this,Dt).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(s){b(this,$r).add(s)}getCurrentQuery(){return b(this,Q)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const r=b(this,We).defaultQueryOptions(s),n=b(this,We).getQueryCache().build(b(this,We),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(s){return B(this,G,vn).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),b(this,Oe)))}createResult(s,r){var R;const n=b(this,Q),a=this.options,l=b(this,Oe),i=b(this,Ks),c=b(this,Dr),d=s!==n?s.state:b(this,Xn),{state:u}=s;let h={...u},m=!1,g;if(r._optimisticResults){const L=this.hasListeners(),D=!L&&pu(s,r),F=L&&fu(s,n,r,a);(D||F)&&(h={...h,...yx(u.data,s.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:p,errorUpdatedAt:j,status:w}=h;g=h.data;let x=!1;if(r.placeholderData!==void 0&&g===void 0&&w==="pending"){let L;l!=null&&l.isPlaceholderData&&r.placeholderData===(c==null?void 0:c.placeholderData)?(L=l.data,x=!0):L=typeof r.placeholderData=="function"?r.placeholderData((R=b(this,zr))==null?void 0:R.state.data,b(this,zr)):r.placeholderData,L!==void 0&&(w="success",g=Co(l==null?void 0:l.data,L,r),m=!0)}if(r.select&&g!==void 0&&!x)if(l&&g===(i==null?void 0:i.data)&&r.select===b(this,Yn))g=b(this,Fr);else try{M(this,Yn,r.select),g=r.select(g),g=Co(l==null?void 0:l.data,g,r),M(this,Fr,g),M(this,os,null)}catch(L){M(this,os,L)}b(this,os)&&(p=b(this,os),g=b(this,Fr),j=Date.now(),w="error");const f=h.fetchStatus==="fetching",y=w==="pending",N=w==="error",k=y&&f,S=g!==void 0,_={status:w,fetchStatus:h.fetchStatus,isPending:y,isSuccess:w==="success",isError:N,isInitialLoading:k,isLoading:k,data:g,dataUpdatedAt:h.dataUpdatedAt,error:p,errorUpdatedAt:j,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:f,isRefetching:f&&!y,isLoadingError:N&&!S,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:N&&S,isStale:zc(s,r),refetch:this.refetch,promise:b(this,Dt),isEnabled:at(r.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const L=E=>{_.status==="error"?E.reject(_.error):_.data!==void 0&&E.resolve(_.data)},D=()=>{const E=M(this,Dt,_.promise=So());L(E)},F=b(this,Dt);switch(F.status){case"pending":s.queryHash===n.queryHash&&L(F);break;case"fulfilled":(_.status==="error"||_.data!==F.value)&&D();break;case"rejected":(_.status!=="error"||_.error!==F.reason)&&D();break}}return _}updateResult(){const s=b(this,Oe),r=this.createResult(b(this,Q),this.options);if(M(this,Ks,b(this,Q).state),M(this,Dr,this.options),b(this,Ks).data!==void 0&&M(this,zr,b(this,Q)),yl(r,s))return;M(this,Oe,r);const n=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,l=typeof a=="function"?a():a;if(l==="all"||!l&&!b(this,$r).size)return!0;const i=new Set(l??b(this,$r));return this.options.throwOnError&&i.add("error"),Object.keys(b(this,Oe)).some(c=>{const o=c;return b(this,Oe)[o]!==s[o]&&i.has(o)})};B(this,G,vx).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&B(this,G,Ao).call(this)}},We=new WeakMap,Q=new WeakMap,Xn=new WeakMap,Oe=new WeakMap,Ks=new WeakMap,Dr=new WeakMap,Dt=new WeakMap,os=new WeakMap,Yn=new WeakMap,Fr=new WeakMap,zr=new WeakMap,qs=new WeakMap,Gs=new WeakMap,cs=new WeakMap,$r=new WeakMap,G=new WeakSet,vn=function(s){B(this,G,To).call(this);let r=b(this,Q).fetch(this.options,s);return s!=null&&s.throwOnError||(r=r.catch(ze)),r},Po=function(){B(this,G,Ro).call(this);const s=_s(this.options.staleTime,b(this,Q));if(ar||b(this,Oe).isStale||!wo(s))return;const n=hx(b(this,Oe).dataUpdatedAt,s)+1;M(this,qs,Us.setTimeout(()=>{b(this,Oe).isStale||this.updateResult()},n))},Eo=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(b(this,Q)):this.options.refetchInterval)??!1},Lo=function(s){B(this,G,Mo).call(this),M(this,cs,s),!(ar||at(this.options.enabled,b(this,Q))===!1||!wo(b(this,cs))||b(this,cs)===0)&&M(this,Gs,Us.setInterval(()=>{(this.options.refetchIntervalInBackground||Fc.isFocused())&&B(this,G,vn).call(this)},b(this,cs)))},Ao=function(){B(this,G,Po).call(this),B(this,G,Lo).call(this,B(this,G,Eo).call(this))},Ro=function(){b(this,qs)&&(Us.clearTimeout(b(this,qs)),M(this,qs,void 0))},Mo=function(){b(this,Gs)&&(Us.clearInterval(b(this,Gs)),M(this,Gs,void 0))},To=function(){const s=b(this,We).getQueryCache().build(b(this,We),this.options);if(s===b(this,Q))return;const r=b(this,Q);M(this,Q,s),M(this,Xn,s.state),this.hasListeners()&&(r==null||r.removeObserver(this),s.addObserver(this))},vx=function(s){ge.batch(()=>{s.listeners&&this.listeners.forEach(r=>{r(b(this,Oe))}),b(this,We).getQueryCache().notify({query:b(this,Q),type:"observerResultsUpdated"})})},Ou);function Xy(e,s){return at(s.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&s.retryOnMount===!1)}function pu(e,s){return Xy(e,s)||e.state.data!==void 0&&Io(e,s,s.refetchOnMount)}function Io(e,s,r){if(at(s.enabled,e)!==!1&&_s(s.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&zc(e,s)}return!1}function fu(e,s,r,n){return(e!==s||at(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&zc(e,r)}function zc(e,s){return at(s.enabled,e)!==!1&&e.isStaleByTime(_s(s.staleTime,e))}function Yy(e,s){return!yl(e.getCurrentResult(),s)}function gu(e){return{onFetch:(s,r)=>{var u,h,m,g,p;const n=s.options,a=(m=(h=(u=s.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,l=((g=s.state.data)==null?void 0:g.pages)||[],i=((p=s.state.data)==null?void 0:p.pageParams)||[];let c={pages:[],pageParams:[]},o=0;const d=async()=>{let j=!1;const w=y=>{By(y,()=>s.signal,()=>j=!0)},x=xx(s.options,s.fetchOptions),f=async(y,N,k)=>{if(j)return Promise.reject();if(N==null&&y.pages.length)return Promise.resolve(y);const C=(()=>{const D={client:s.client,queryKey:s.queryKey,pageParam:N,direction:k?"backward":"forward",meta:s.options.meta};return w(D),D})(),_=await x(C),{maxPages:R}=s.options,L=k?Uy:$y;return{pages:L(y.pages,_,R),pageParams:L(y.pageParams,N,R)}};if(a&&l.length){const y=a==="backward",N=y?Jy:yu,k={pages:l,pageParams:i},S=N(n,k);c=await f(k,S,y)}else{const y=e??l.length;do{const N=o===0?i[0]??n.initialPageParam:yu(n,c);if(o>0&&N==null)break;c=await f(c,N),o++}while(o<y)}return c};s.options.persister?s.fetchFn=()=>{var j,w;return(w=(j=s.options).persister)==null?void 0:w.call(j,d,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r)}:s.fetchFn=d}}}function yu(e,{pages:s,pageParams:r}){const n=s.length-1;return s.length>0?e.getNextPageParam(s[n],s,r[n],r):void 0}function Jy(e,{pages:s,pageParams:r}){var n;return s.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,s[0],s,r[0],r):void 0}var Jn,St,De,Xs,_t,es,Du,Zy=(Du=class extends gx{constructor(s){super();O(this,_t);O(this,Jn);O(this,St);O(this,De);O(this,Xs);M(this,Jn,s.client),this.mutationId=s.mutationId,M(this,De,s.mutationCache),M(this,St,[]),this.state=s.state||jx(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){b(this,St).includes(s)||(b(this,St).push(s),this.clearGcTimeout(),b(this,De).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){M(this,St,b(this,St).filter(r=>r!==s)),this.scheduleGc(),b(this,De).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){b(this,St).length||(this.state.status==="pending"?this.scheduleGc():b(this,De).remove(this))}continue(){var s;return((s=b(this,Xs))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var i,c,o,d,u,h,m,g,p,j,w,x,f,y,N,k,S,C,_,R;const r=()=>{B(this,_t,es).call(this,{type:"continue"})},n={client:b(this,Jn),meta:this.options.meta,mutationKey:this.options.mutationKey};M(this,Xs,fx({fn:()=>this.options.mutationFn?this.options.mutationFn(s,n):Promise.reject(new Error("No mutationFn found")),onFail:(L,D)=>{B(this,_t,es).call(this,{type:"failed",failureCount:L,error:D})},onPause:()=>{B(this,_t,es).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>b(this,De).canRun(this)}));const a=this.state.status==="pending",l=!b(this,Xs).canStart();try{if(a)r();else{B(this,_t,es).call(this,{type:"pending",variables:s,isPaused:l}),await((c=(i=b(this,De).config).onMutate)==null?void 0:c.call(i,s,this,n));const D=await((d=(o=this.options).onMutate)==null?void 0:d.call(o,s,n));D!==this.state.context&&B(this,_t,es).call(this,{type:"pending",context:D,variables:s,isPaused:l})}const L=await b(this,Xs).start();return await((h=(u=b(this,De).config).onSuccess)==null?void 0:h.call(u,L,s,this.state.context,this,n)),await((g=(m=this.options).onSuccess)==null?void 0:g.call(m,L,s,this.state.context,n)),await((j=(p=b(this,De).config).onSettled)==null?void 0:j.call(p,L,null,this.state.variables,this.state.context,this,n)),await((x=(w=this.options).onSettled)==null?void 0:x.call(w,L,null,s,this.state.context,n)),B(this,_t,es).call(this,{type:"success",data:L}),L}catch(L){try{await((y=(f=b(this,De).config).onError)==null?void 0:y.call(f,L,s,this.state.context,this,n))}catch(D){Promise.reject(D)}try{await((k=(N=this.options).onError)==null?void 0:k.call(N,L,s,this.state.context,n))}catch(D){Promise.reject(D)}try{await((C=(S=b(this,De).config).onSettled)==null?void 0:C.call(S,void 0,L,this.state.variables,this.state.context,this,n))}catch(D){Promise.reject(D)}try{await((R=(_=this.options).onSettled)==null?void 0:R.call(_,void 0,L,s,this.state.context,n))}catch(D){Promise.reject(D)}throw B(this,_t,es).call(this,{type:"error",error:L}),L}finally{b(this,De).runNext(this)}}},Jn=new WeakMap,St=new WeakMap,De=new WeakMap,Xs=new WeakMap,_t=new WeakSet,es=function(s){const r=n=>{switch(s.type){case"failed":return{...n,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...n,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:s.error,failureCount:n.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ge.batch(()=>{b(this,St).forEach(n=>{n.onMutationUpdate(s)}),b(this,De).notify({mutation:this,type:"updated",action:s})})},Du);function jx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ft,ft,Zn,Fu,e0=(Fu=class extends rn{constructor(s={}){super();O(this,Ft);O(this,ft);O(this,Zn);this.config=s,M(this,Ft,new Set),M(this,ft,new Map),M(this,Zn,0)}build(s,r,n){const a=new Zy({client:s,mutationCache:this,mutationId:++ca(this,Zn)._,options:s.defaultMutationOptions(r),state:n});return this.add(a),a}add(s){b(this,Ft).add(s);const r=_a(s);if(typeof r=="string"){const n=b(this,ft).get(r);n?n.push(s):b(this,ft).set(r,[s])}this.notify({type:"added",mutation:s})}remove(s){if(b(this,Ft).delete(s)){const r=_a(s);if(typeof r=="string"){const n=b(this,ft).get(r);if(n)if(n.length>1){const a=n.indexOf(s);a!==-1&&n.splice(a,1)}else n[0]===s&&b(this,ft).delete(r)}}this.notify({type:"removed",mutation:s})}canRun(s){const r=_a(s);if(typeof r=="string"){const n=b(this,ft).get(r),a=n==null?void 0:n.find(l=>l.state.status==="pending");return!a||a===s}else return!0}runNext(s){var n;const r=_a(s);if(typeof r=="string"){const a=(n=b(this,ft).get(r))==null?void 0:n.find(l=>l!==s&&l.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ge.batch(()=>{b(this,Ft).forEach(s=>{this.notify({type:"removed",mutation:s})}),b(this,Ft).clear(),b(this,ft).clear()})}getAll(){return Array.from(b(this,Ft))}find(s){const r={exact:!0,...s};return this.getAll().find(n=>du(r,n))}findAll(s={}){return this.getAll().filter(r=>du(s,r))}notify(s){ge.batch(()=>{this.listeners.forEach(r=>{r(s)})})}resumePausedMutations(){const s=this.getAll().filter(r=>r.state.isPaused);return ge.batch(()=>Promise.all(s.map(r=>r.continue().catch(ze))))}},Ft=new WeakMap,ft=new WeakMap,Zn=new WeakMap,Fu);function _a(e){var s;return(s=e.options.scope)==null?void 0:s.id}var zt,ds,Ve,$t,Vt,Wa,Oo,zu,t0=(zu=class extends rn{constructor(r,n){super();O(this,Vt);O(this,zt);O(this,ds);O(this,Ve);O(this,$t);M(this,zt,r),this.setOptions(n),this.bindMethods(),B(this,Vt,Wa).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=b(this,zt).defaultMutationOptions(r),yl(this.options,n)||b(this,zt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:b(this,Ve),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&lr(n.mutationKey)!==lr(this.options.mutationKey)?this.reset():((a=b(this,Ve))==null?void 0:a.state.status)==="pending"&&b(this,Ve).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=b(this,Ve))==null||r.removeObserver(this)}onMutationUpdate(r){B(this,Vt,Wa).call(this),B(this,Vt,Oo).call(this,r)}getCurrentResult(){return b(this,ds)}reset(){var r;(r=b(this,Ve))==null||r.removeObserver(this),M(this,Ve,void 0),B(this,Vt,Wa).call(this),B(this,Vt,Oo).call(this)}mutate(r,n){var a;return M(this,$t,n),(a=b(this,Ve))==null||a.removeObserver(this),M(this,Ve,b(this,zt).getMutationCache().build(b(this,zt),this.options)),b(this,Ve).addObserver(this),b(this,Ve).execute(r)}},zt=new WeakMap,ds=new WeakMap,Ve=new WeakMap,$t=new WeakMap,Vt=new WeakSet,Wa=function(){var n;const r=((n=b(this,Ve))==null?void 0:n.state)??jx();M(this,ds,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Oo=function(r){ge.batch(()=>{var n,a,l,i,c,o,d,u;if(b(this,$t)&&this.hasListeners()){const h=b(this,ds).variables,m=b(this,ds).context,g={client:b(this,zt),meta:this.options.meta,mutationKey:this.options.mutationKey};if((r==null?void 0:r.type)==="success"){try{(a=(n=b(this,$t)).onSuccess)==null||a.call(n,r.data,h,m,g)}catch(p){Promise.reject(p)}try{(i=(l=b(this,$t)).onSettled)==null||i.call(l,r.data,null,h,m,g)}catch(p){Promise.reject(p)}}else if((r==null?void 0:r.type)==="error"){try{(o=(c=b(this,$t)).onError)==null||o.call(c,r.error,h,m,g)}catch(p){Promise.reject(p)}try{(u=(d=b(this,$t)).onSettled)==null||u.call(d,void 0,r.error,h,m,g)}catch(p){Promise.reject(p)}}}this.listeners.forEach(h=>{h(b(this,ds))})})},zu),Pt,$u,s0=($u=class extends rn{constructor(s={}){super();O(this,Pt);this.config=s,M(this,Pt,new Map)}build(s,r,n){const a=r.queryKey,l=r.queryHash??Ic(a,r);let i=this.get(l);return i||(i=new qy({client:s,queryKey:a,queryHash:l,options:s.defaultQueryOptions(r),state:n,defaultOptions:s.getQueryDefaults(a)}),this.add(i)),i}add(s){b(this,Pt).has(s.queryHash)||(b(this,Pt).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const r=b(this,Pt).get(s.queryHash);r&&(s.destroy(),r===s&&b(this,Pt).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){ge.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return b(this,Pt).get(s)}getAll(){return[...b(this,Pt).values()]}find(s){const r={exact:!0,...s};return this.getAll().find(n=>cu(r,n))}findAll(s={}){const r=this.getAll();return Object.keys(s).length>0?r.filter(n=>cu(s,n)):r}notify(s){ge.batch(()=>{this.listeners.forEach(r=>{r(s)})})}onFocus(){ge.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){ge.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},Pt=new WeakMap,$u),ce,us,hs,Ur,Br,ms,Hr,Wr,Uu,r0=(Uu=class{constructor(e={}){O(this,ce);O(this,us);O(this,hs);O(this,Ur);O(this,Br);O(this,ms);O(this,Hr);O(this,Wr);M(this,ce,e.queryCache||new s0),M(this,us,e.mutationCache||new e0),M(this,hs,e.defaultOptions||{}),M(this,Ur,new Map),M(this,Br,new Map),M(this,ms,0)}mount(){ca(this,ms)._++,b(this,ms)===1&&(M(this,Hr,Fc.subscribe(async e=>{e&&(await this.resumePausedMutations(),b(this,ce).onFocus())})),M(this,Wr,vl.subscribe(async e=>{e&&(await this.resumePausedMutations(),b(this,ce).onOnline())})))}unmount(){var e,s;ca(this,ms)._--,b(this,ms)===0&&((e=b(this,Hr))==null||e.call(this),M(this,Hr,void 0),(s=b(this,Wr))==null||s.call(this),M(this,Wr,void 0))}isFetching(e){return b(this,ce).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return b(this,us).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const s=this.defaultQueryOptions({queryKey:e});return(r=b(this,ce).get(s.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const s=this.defaultQueryOptions(e),r=b(this,ce).build(this,s),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(_s(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(n))}getQueriesData(e){return b(this,ce).findAll(e).map(({queryKey:s,state:r})=>{const n=r.data;return[s,n]})}setQueryData(e,s,r){const n=this.defaultQueryOptions({queryKey:e}),a=b(this,ce).get(n.queryHash),l=a==null?void 0:a.state.data,i=Dy(s,l);if(i!==void 0)return b(this,ce).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(e,s,r){return ge.batch(()=>b(this,ce).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,s,r)]))}getQueryState(e){var r;const s=this.defaultQueryOptions({queryKey:e});return(r=b(this,ce).get(s.queryHash))==null?void 0:r.state}removeQueries(e){const s=b(this,ce);ge.batch(()=>{s.findAll(e).forEach(r=>{s.remove(r)})})}resetQueries(e,s){const r=b(this,ce);return ge.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},s)))}cancelQueries(e,s={}){const r={revert:!0,...s},n=ge.batch(()=>b(this,ce).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(ze).catch(ze)}invalidateQueries(e,s={}){return ge.batch(()=>(b(this,ce).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},s)))}refetchQueries(e,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},n=ge.batch(()=>b(this,ce).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let l=a.fetch(void 0,r);return r.throwOnError||(l=l.catch(ze)),a.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(n).then(ze)}fetchQuery(e){const s=this.defaultQueryOptions(e);s.retry===void 0&&(s.retry=!1);const r=b(this,ce).build(this,s);return r.isStaleByTime(_s(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ze).catch(ze)}fetchInfiniteQuery(e){return e.behavior=gu(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ze).catch(ze)}ensureInfiniteQueryData(e){return e.behavior=gu(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return vl.isOnline()?b(this,us).resumePausedMutations():Promise.resolve()}getQueryCache(){return b(this,ce)}getMutationCache(){return b(this,us)}getDefaultOptions(){return b(this,hs)}setDefaultOptions(e){M(this,hs,e)}setQueryDefaults(e,s){b(this,Ur).set(lr(e),{queryKey:e,defaultOptions:s})}getQueryDefaults(e){const s=[...b(this,Ur).values()],r={};return s.forEach(n=>{qn(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,s){b(this,Br).set(lr(e),{mutationKey:e,defaultOptions:s})}getMutationDefaults(e){const s=[...b(this,Br).values()],r={};return s.forEach(n=>{qn(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const s={...b(this,hs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return s.queryHash||(s.queryHash=Ic(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===Oc&&(s.enabled=!1),s}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...b(this,hs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){b(this,ce).clear(),b(this,us).clear()}},ce=new WeakMap,us=new WeakMap,hs=new WeakMap,Ur=new WeakMap,Br=new WeakMap,ms=new WeakMap,Hr=new WeakMap,Wr=new WeakMap,Uu),bx=v.createContext(void 0),ve=e=>{const s=v.useContext(bx);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},n0=({client:e,children:s})=>(v.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),t.jsx(bx.Provider,{value:e,children:s})),Nx=v.createContext(!1),a0=()=>v.useContext(Nx);Nx.Provider;function l0(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var i0=v.createContext(l0()),o0=()=>v.useContext(i0),c0=(e,s,r)=>{const n=r!=null&&r.state.error&&typeof e.throwOnError=="function"?Dc(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(s.isReset()||(e.retryOnMount=!1))},d0=e=>{v.useEffect(()=>{e.clearReset()},[e])},u0=({result:e,errorResetBoundary:s,throwOnError:r,query:n,suspense:a})=>e.isError&&!s.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||Dc(r,[e.error,n])),h0=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},m0=(e,s)=>e.isLoading&&e.isFetching&&!s,x0=(e,s)=>(e==null?void 0:e.suspense)&&s.isPending,vu=(e,s,r)=>s.fetchOptimistic(e).catch(()=>{r.clearReset()});function p0(e,s,r){var m,g,p,j;const n=a0(),a=o0(),l=ve(),i=l.defaultQueryOptions(e);(g=(m=l.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||g.call(m,i);const c=l.getQueryCache().get(i.queryHash);i._optimisticResults=n?"isRestoring":"optimistic",h0(i),c0(i,a,c),d0(a);const o=!l.getQueryCache().get(i.queryHash),[d]=v.useState(()=>new s(l,i)),u=d.getOptimisticResult(i),h=!n&&e.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(w=>{const x=h?d.subscribe(ge.batchCalls(w)):ze;return d.updateResult(),x},[d,h]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),v.useEffect(()=>{d.setOptions(i)},[i,d]),x0(i,u))throw vu(i,d,a);if(u0({result:u,errorResetBoundary:a,throwOnError:i.throwOnError,query:c,suspense:i.suspense}))throw u.error;if((j=(p=l.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||j.call(p,i,u),i.experimental_prefetchInRender&&!ar&&m0(u,n)){const w=o?vu(i,d,a):c==null?void 0:c.promise;w==null||w.catch(ze).finally(()=>{d.updateResult()})}return i.notifyOnChangeProps?u:d.trackResult(u)}function ee(e,s){return p0(e,Gy)}function Te(e,s){const r=ve(),[n]=v.useState(()=>new t0(r,e));v.useEffect(()=>{n.setOptions(e)},[n,e]);const a=v.useSyncExternalStore(v.useCallback(i=>n.subscribe(ge.batchCalls(i)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),l=v.useCallback((i,c)=>{n.mutate(i,c).catch(ze)},[n]);if(a.error&&Dc(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:l,mutateAsync:a.mutate}}const Va={health:{critical:"#FF3B30",warning:"#FF9500",healthy:"#34C759",neutral:"#8E8E93"}},f0={critical:{max:39,color:Va.health.critical,label:"Critical"},warning:{min:40,max:79,color:Va.health.warning,label:"Warning"},healthy:{min:80,color:Va.health.healthy,label:"Healthy"}};function g0(e){return e<40?"critical":e<80?"warning":"healthy"}function wx(e){return Va.health[e]}function y0(e){return f0[e].label}const v0="/api/dashboard";let $c=class extends Error{constructor(s,r){super(r),this.status=s,this.name="ApiError"}};function kx(){return localStorage.getItem("auth_token")}async function me(e,s){const r=`${v0}${e}`,n=kx(),a={"Content-Type":"application/json"};n&&(a.Authorization=`Bearer ${n}`);const l=await fetch(r,{...s,headers:{...a,...s==null?void 0:s.headers}});if(!l.ok){const i=await l.json().catch(()=>({detail:"Unknown error"}));throw new $c(l.status,i.detail||`HTTP ${l.status}`)}return l.json()}const Cx={getFleet:()=>me("/fleet"),getClient:e=>me(`/fleet/${e}`),getAppliances:e=>me(`/fleet/${e}/appliances`)},Sx={getIncidents:e=>{const s=new URLSearchParams;e!=null&&e.site_id&&s.set("site_id",e.site_id),e!=null&&e.limit&&s.set("limit",String(e.limit)),e!=null&&e.level&&s.set("level",e.level),(e==null?void 0:e.resolved)!==void 0&&s.set("resolved",String(e.resolved));const r=s.toString();return me(`/incidents${r?`?${r}`:""}`)},getIncident:e=>me(`/incidents/${e}`),getEvents:e=>{const s=new URLSearchParams;e!=null&&e.site_id&&s.set("site_id",e.site_id),e!=null&&e.limit&&s.set("limit",String(e.limit));const r=s.toString();return me(`/events${r?`?${r}`:""}`)}},Uc={getRunbooks:()=>me("/runbooks"),getRunbook:e=>me(`/runbooks/${e}`),getExecutions:(e,s)=>{const r=s?`?limit=${s}`:"";return me(`/runbooks/${e}/executions${r}`)}},Bl={getStatus:()=>me("/learning/status"),getCandidates:()=>me("/learning/candidates"),getHistory:e=>{const s=e?`?limit=${e}`:"";return me(`/learning/history${s}`)},promote:e=>me(`/learning/promote/${e}`,{method:"POST"})},_x={getPipeline:()=>W("/onboarding/pipeline"),getMetrics:()=>W("/onboarding/metrics")},j0={getGlobalStats:()=>me("/stats")},b0={execute:e=>me("/command",{method:"POST",body:JSON.stringify({command:e})})};async function W(e,s){const r=`/api${e}`,n=kx(),a={"Content-Type":"application/json"};n&&(a.Authorization=`Bearer ${n}`);const l=await fetch(r,{...s,headers:{...a,...s==null?void 0:s.headers}});if(!l.ok){const i=await l.json().catch(()=>({detail:"Unknown error"}));throw new $c(l.status,i.detail||`HTTP ${l.status}`)}return l.json()}const ia={getSites:e=>{const s=e?`?status=${e}`:"";return W(`/sites${s}`)},getSite:e=>W(`/sites/${e}`),createSite:e=>W("/sites",{method:"POST",body:JSON.stringify(e)}),updateSite:(e,s)=>W(`/sites/${e}`,{method:"PUT",body:JSON.stringify(s)}),deleteSite:e=>W(`/sites/${e}`,{method:"DELETE"}),getAppliances:e=>W(`/sites/${e}/appliances`),addCredential:(e,s)=>W(`/sites/${e}/credentials`,{method:"POST",body:JSON.stringify(s)}),deleteCredential:(e,s)=>W(`/sites/${e}/credentials/${s}`,{method:"DELETE"})},Hl={createApplianceOrder:(e,s,r)=>W(`/sites/${e}/appliances/${s}/orders`,{method:"POST",body:JSON.stringify(r)}),broadcastOrder:(e,s)=>W(`/sites/${e}/orders/broadcast`,{method:"POST",body:JSON.stringify(s)}),getOrders:(e,s)=>{const r=s?`?status=${s}`:"";return W(`/sites/${e}/orders${r}`)},deleteAppliance:(e,s)=>W(`/sites/${e}/appliances/${s}`,{method:"DELETE"}),clearStaleAppliances:(e,s=24)=>W(`/sites/${e}/appliances/clear-stale`,{method:"POST",body:JSON.stringify({stale_hours:s})})},nn={getNotifications:e=>{const s=new URLSearchParams;e!=null&&e.site_id&&s.set("site_id",e.site_id),e!=null&&e.severity&&s.set("severity",e.severity),e!=null&&e.unread_only&&s.set("unread_only","true"),e!=null&&e.limit&&s.set("limit",String(e.limit));const r=s.toString();return me(`/notifications${r?`?${r}`:""}`)},getSummary:()=>me("/notifications/summary"),markRead:e=>me(`/notifications/${e}/read`,{method:"POST"}),markAllRead:()=>me("/notifications/read-all",{method:"POST"}),dismiss:e=>me(`/notifications/${e}/dismiss`,{method:"POST"}),create:e=>me("/notifications",{method:"POST",body:JSON.stringify(e)})},Bc={getRunbooks:()=>W("/runbooks"),getCategories:async()=>(await W("/runbooks/categories")).map(s=>s.category),getSiteRunbooks:e=>W(`/runbooks/sites/${e}`),setSiteRunbook:(e,s,r)=>W(`/runbooks/sites/${e}/${s}`,{method:"PUT",body:JSON.stringify({enabled:r})}),getApplianceEffective:e=>W(`/runbooks/appliances/${encodeURIComponent(e)}/effective`)},mt={getUsers:()=>W("/users"),getInvites:()=>W("/users/invites"),inviteUser:e=>W("/users/invite",{method:"POST",body:JSON.stringify(e)}),resendInvite:e=>W(`/users/invite/${e}/resend`,{method:"POST"}),revokeInvite:e=>W(`/users/invite/${e}`,{method:"DELETE"}),updateUser:(e,s)=>W(`/users/${e}`,{method:"PUT",body:JSON.stringify(s)}),deleteUser:e=>W(`/users/${e}`,{method:"DELETE"}),adminResetPassword:(e,s)=>W(`/users/${e}/password`,{method:"PUT",body:JSON.stringify({new_password:s})}),getProfile:()=>W("/users/me"),changePassword:e=>W("/users/me/password",{method:"PUT",body:JSON.stringify(e)}),validateInvite:async e=>(await fetch(`/api/users/invite/validate/${e}`)).json(),acceptInvite:async e=>{const s=await fetch("/api/users/invite/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){const r=await s.json().catch(()=>({detail:"Unknown error"}));throw new $c(s.status,r.detail||`HTTP ${s.status}`)}return s.json()}},Pa={getConfig:e=>W(`/frameworks/appliances/${encodeURIComponent(e)}/config`),updateConfig:(e,s)=>W(`/frameworks/appliances/${encodeURIComponent(e)}/config`,{method:"PUT",body:JSON.stringify(s)}),getScores:e=>W(`/frameworks/appliances/${encodeURIComponent(e)}/scores`),getControls:(e,s)=>W(`/frameworks/appliances/${encodeURIComponent(e)}/controls/${s}`),refreshScores:e=>W(`/frameworks/appliances/${encodeURIComponent(e)}/scores/refresh`,{method:"POST"}),getMetadata:()=>W("/frameworks/metadata"),getIndustries:()=>W("/frameworks/industries")},Ye=6e4,je=3e4;function Px(){return ee({queryKey:["fleet"],queryFn:Cx.getFleet,refetchInterval:Ye,staleTime:je})}function N0(e){return ee({queryKey:["client",e],queryFn:()=>Cx.getClient(e),enabled:!!e,refetchInterval:Ye,staleTime:je})}function Hc(e){return ee({queryKey:["incidents",e],queryFn:()=>Sx.getIncidents(e),refetchInterval:Ye,staleTime:je})}function w0(e){return ee({queryKey:["events",e],queryFn:()=>Sx.getEvents(e),refetchInterval:Ye,staleTime:je})}function k0(){return ee({queryKey:["stats"],queryFn:j0.getGlobalStats,refetchInterval:Ye,staleTime:je})}function Ex(){return ee({queryKey:["learning","status"],queryFn:Bl.getStatus,refetchInterval:Ye,staleTime:je})}function C0(){const e=ve();return()=>{e.invalidateQueries({queryKey:["fleet"]}),e.invalidateQueries({queryKey:["incidents"]}),e.invalidateQueries({queryKey:["stats"]}),e.invalidateQueries({queryKey:["learning"]}),e.invalidateQueries({queryKey:["runbooks"]})}}function S0(){return ee({queryKey:["runbooks"],queryFn:Uc.getRunbooks,staleTime:je})}function _0(e){return ee({queryKey:["runbook",e],queryFn:()=>Uc.getRunbook(e),enabled:!!e,staleTime:je})}function P0(e,s){return ee({queryKey:["runbook",e,"executions",s],queryFn:()=>Uc.getExecutions(e,s),enabled:!!e,staleTime:je})}function E0(){return ee({queryKey:["learning","candidates"],queryFn:Bl.getCandidates,refetchInterval:Ye,staleTime:je})}function L0(e){return ee({queryKey:["learning","history",e],queryFn:()=>Bl.getHistory(e),refetchInterval:Ye,staleTime:je})}function A0(){const e=ve();return Te({mutationFn:s=>Bl.promote(s),onSuccess:()=>{e.invalidateQueries({queryKey:["learning"]})}})}function R0(){return ee({queryKey:["onboarding","pipeline"],queryFn:_x.getPipeline,refetchInterval:Ye,staleTime:je})}function M0(){return ee({queryKey:["onboarding","metrics"],queryFn:_x.getMetrics,refetchInterval:Ye,staleTime:je})}function Lx(e){return ee({queryKey:["sites",e],queryFn:()=>ia.getSites(e),refetchInterval:Ye,staleTime:je})}function T0(e){return ee({queryKey:["site",e],queryFn:()=>ia.getSite(e),enabled:!!e,refetchInterval:Ye,staleTime:je})}function Ax(){const e=ve();return Te({mutationFn:ia.createSite,onSuccess:()=>{e.invalidateQueries({queryKey:["sites"]})}})}function I0(){const e=ve();return Te({mutationFn:({siteId:s,data:r})=>ia.addCredential(s,r),onSuccess:(s,{siteId:r})=>{e.invalidateQueries({queryKey:["site",r]})}})}function O0(){const e=ve();return Te({mutationFn:({siteId:s,applianceId:r,orderType:n,parameters:a={},priority:l=0})=>Hl.createApplianceOrder(s,r,{order_type:n,parameters:a,priority:l}),onSuccess:(s,{siteId:r})=>{e.invalidateQueries({queryKey:["orders",r]}),e.invalidateQueries({queryKey:["site",r]})}})}function D0(){const e=ve();return Te({mutationFn:({siteId:s,orderType:r,parameters:n={}})=>Hl.broadcastOrder(s,{order_type:r,parameters:n}),onSuccess:(s,{siteId:r})=>{e.invalidateQueries({queryKey:["orders",r]}),e.invalidateQueries({queryKey:["site",r]})}})}function F0(){const e=ve();return Te({mutationFn:({siteId:s,applianceId:r})=>Hl.deleteAppliance(s,r),onSuccess:(s,{siteId:r})=>{e.invalidateQueries({queryKey:["site",r]}),e.invalidateQueries({queryKey:["sites"]})}})}function z0(){const e=ve();return Te({mutationFn:({siteId:s,staleHours:r=24})=>Hl.clearStaleAppliances(s,r),onSuccess:(s,{siteId:r})=>{e.invalidateQueries({queryKey:["site",r]}),e.invalidateQueries({queryKey:["sites"]})}})}function $0(e){return ee({queryKey:["notifications",e],queryFn:()=>nn.getNotifications(e),refetchInterval:Ye,staleTime:je})}function Rx(){return ee({queryKey:["notifications","summary"],queryFn:nn.getSummary,refetchInterval:Ye,staleTime:je})}function U0(){const e=ve();return Te({mutationFn:s=>nn.markRead(s),onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]})}})}function B0(){const e=ve();return Te({mutationFn:()=>nn.markAllRead(),onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]})}})}function H0(){const e=ve();return Te({mutationFn:s=>nn.dismiss(s),onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]})}})}function W0(){const e=ve();return Te({mutationFn:s=>nn.create(s),onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]})}})}function V0(){return ee({queryKey:["runbookCategories"],queryFn:Bc.getCategories,staleTime:je})}function Q0(e){return ee({queryKey:["siteRunbooks",e],queryFn:()=>Bc.getSiteRunbooks(e),enabled:!!e,staleTime:je})}function K0(){const e=ve();return Te({mutationFn:({siteId:s,runbookId:r,enabled:n})=>Bc.setSiteRunbook(s,r,n),onSuccess:(s,{siteId:r})=>{e.invalidateQueries({queryKey:["siteRunbooks",r]})}})}function q0(e){const s=v.useCallback(r=>{const n=r.target;if(!((n.tagName==="INPUT"||n.tagName==="TEXTAREA"||n.isContentEditable)&&r.key!=="Escape"))for(const a of e){const l=a.metaKey?r.metaKey||r.ctrlKey:!0,i=a.ctrlKey?r.ctrlKey:!0,c=a.shiftKey?r.shiftKey:!r.shiftKey,o=r.key.toLowerCase()===a.key.toLowerCase();if(l&&i&&c&&o){r.preventDefault(),a.handler();return}}},[e]);v.useEffect(()=>(window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)),[s])}function G0(e){q0([{key:"k",metaKey:!0,handler:e}])}const X0="/api/integrations";class Y0 extends Error{constructor(s,r){super(r),this.status=s,this.name="ApiError"}}function J0(){return localStorage.getItem("auth_token")}async function wt(e,s){const r=`${X0}${e}`,n=J0(),a={"Content-Type":"application/json"};n&&(a.Authorization=`Bearer ${n}`);const l=await fetch(r,{...s,headers:{...a,...s==null?void 0:s.headers}});if(!l.ok){const i=await l.json().catch(()=>({detail:"Unknown error"}));throw new Y0(l.status,i.detail||`HTTP ${l.status}`)}return l.json()}const Rt={listIntegrations:(e,s)=>{const r=new URLSearchParams;s!=null&&s.status&&r.set("status",s.status),s!=null&&s.provider&&r.set("provider",s.provider);const n=r.toString();return wt(`/sites/${e}${n?`?${n}`:""}`)},getIntegration:(e,s)=>wt(`/sites/${e}/${s}`),createIntegration:(e,s)=>wt(`/sites/${e}`,{method:"POST",body:JSON.stringify(s)}),deleteIntegration:(e,s)=>wt(`/sites/${e}/${s}`,{method:"DELETE"}),listResources:(e,s,r)=>{const n=new URLSearchParams;r!=null&&r.resource_type&&n.set("resource_type",r.resource_type),r!=null&&r.risk_level&&n.set("risk_level",r.risk_level),r!=null&&r.limit&&n.set("limit",String(r.limit)),r!=null&&r.offset&&n.set("offset",String(r.offset));const a=n.toString();return wt(`/sites/${e}/${s}/resources${a?`?${a}`:""}`)},triggerSync:(e,s)=>wt(`/sites/${e}/${s}/sync`,{method:"POST"}),getSyncStatus:(e,s,r)=>wt(`/sites/${e}/${s}/sync/${r}`),getSiteHealth:e=>wt(`/sites/${e}/health`),getAWSSetupInstructions:()=>wt("/aws/setup-instructions"),generateAWSExternalId:()=>wt("/aws/generate-external-id",{method:"POST"})},Wt={aws:{name:"Amazon Web Services",description:"IAM users, S3 buckets, EC2 instances, RDS, CloudTrail, Security Groups",icon:"aws",color:"#FF9900",setupType:"iam_role"},google_workspace:{name:"Google Workspace",description:"Users, Groups, MFA status, Organizational Units",icon:"google",color:"#4285F4",setupType:"oauth"},okta:{name:"Okta",description:"Users, Groups, Applications, Policies",icon:"okta",color:"#007DC1",setupType:"oauth"},azure_ad:{name:"Azure AD (Entra ID)",description:"Users, Groups, Conditional Access Policies, Directory Roles",icon:"microsoft",color:"#0078D4",setupType:"oauth"}},Zs={critical:{label:"Critical",color:"#DC2626",bgColor:"#FEE2E2"},high:{label:"High",color:"#EA580C",bgColor:"#FFEDD5"},medium:{label:"Medium",color:"#CA8A04",bgColor:"#FEF3C7"},low:{label:"Low",color:"#16A34A",bgColor:"#DCFCE7"},unknown:{label:"Unknown",color:"#6B7280",bgColor:"#F3F4F6"}},Mx={iam_user:"IAM User",s3_bucket:"S3 Bucket",ec2_instance:"EC2 Instance",rds_instance:"RDS Instance",cloudtrail:"CloudTrail",security_group:"Security Group",user:"User",group:"Group",org_unit:"Organizational Unit",application:"Application",policy_password:"Password Policy",policy_mfa_enroll:"MFA Enrollment Policy",policy_okta_sign_on:"Sign-On Policy",conditional_access_policy:"Conditional Access Policy",directory_role:"Directory Role"},Wl=6e4,Z0=5e3,Vl=3e4;function ev(e,s){return ee({queryKey:["integrations",e,s],queryFn:()=>Rt.listIntegrations(e,s),enabled:!!e,refetchInterval:Wl,staleTime:Vl})}function tv(e,s){return ee({queryKey:["integration",e,s],queryFn:()=>Rt.getIntegration(e,s),enabled:!!e&&!!s,refetchInterval:Wl,staleTime:Vl})}function sv(){const e=ve();return Te({mutationFn:({siteId:s,data:r})=>Rt.createIntegration(s,r),onSuccess:(s,{siteId:r})=>{e.invalidateQueries({queryKey:["integrations",r]}),e.invalidateQueries({queryKey:["integrationsHealth",r]})}})}function rv(){const e=ve();return Te({mutationFn:({siteId:s,integrationId:r})=>Rt.deleteIntegration(s,r),onSuccess:(s,{siteId:r,integrationId:n})=>{e.invalidateQueries({queryKey:["integrations",r]}),e.invalidateQueries({queryKey:["integration",r,n]}),e.invalidateQueries({queryKey:["integrationsHealth",r]})}})}function nv(e,s,r){return ee({queryKey:["integrationResources",e,s,r],queryFn:()=>Rt.listResources(e,s,r),enabled:!!e&&!!s,refetchInterval:Wl,staleTime:Vl})}function Tx(){const e=ve();return Te({mutationFn:({siteId:s,integrationId:r})=>Rt.triggerSync(s,r),onSuccess:(s,{siteId:r,integrationId:n})=>{e.invalidateQueries({queryKey:["integration",r,n]})}})}function av(e,s,r){return ee({queryKey:["syncJob",e,s,r],queryFn:()=>Rt.getSyncStatus(e,s,r),enabled:!!e&&!!s&&!!r,refetchInterval:n=>{var a,l;return((a=n.state.data)==null?void 0:a.status)==="running"||((l=n.state.data)==null?void 0:l.status)==="pending"?Z0:!1},staleTime:1e3})}function lv(e){return ee({queryKey:["integrationsHealth",e],queryFn:()=>Rt.getSiteHealth(e),enabled:!!e,refetchInterval:Wl,staleTime:Vl})}function iv(){return ee({queryKey:["awsSetupInstructions"],queryFn:Rt.getAWSSetupInstructions,staleTime:24*60*60*1e3})}function ov(){return Te({mutationFn:()=>Rt.generateAWSExternalId()})}function cv(){const e=ve();return(s,r)=>{e.invalidateQueries({queryKey:["integrationResources",s,r]}),e.invalidateQueries({queryKey:["integration",s,r]})}}const dv=[{path:"/",label:"Dashboard",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{path:"/sites",label:"Sites",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})},{path:"/notifications",label:"Notifications",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})},{path:"/onboarding",label:"Onboarding",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})},{path:"/partners",label:"Partners",adminOnly:!0,icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})},{path:"/users",label:"Users",adminOnly:!0,icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})},{path:"/runbooks",label:"Runbooks",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})},{path:"/runbook-config",label:"Runbook Config",adminOnly:!0,icon:t.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},{path:"/learning",label:"Learning",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})},{path:"/reports",label:"Reports",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{path:"/audit-logs",label:"Audit Logs",adminOnly:!0,icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{path:"/docs",label:"Documentation",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}],uv=({status:e})=>{const s=wx(e);return t.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:s}})},hv=({clients:e,onClientSelect:s,selectedClient:r,user:n,onLogout:a})=>{const{data:l}=Rx(),i=(l==null?void 0:l.unread)||0,c=dv.filter(d=>!d.adminOnly||(n==null?void 0:n.role)==="admin"),o=n!=null&&n.displayName?n.displayName.split(" ").map(d=>d[0]).join("").toUpperCase():"U";return t.jsxs("aside",{className:"glass-sidebar w-64 h-screen flex flex-col fixed left-0 top-0",children:[t.jsx("div",{className:"p-6 border-b border-separator-light",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-accent-primary rounded-ios-md flex items-center justify-center",children:t.jsx("span",{className:"text-white font-bold text-lg",children:"M"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"font-semibold text-label-primary",children:"Malachor"}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Central Command"})]})]})}),t.jsxs("div",{className:"p-4 border-b border-separator-light",children:[t.jsx("h2",{className:"text-xs font-semibold text-label-tertiary uppercase tracking-wide mb-3",children:"Clients"}),t.jsxs("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:[e.map(d=>t.jsxs("button",{onClick:()=>s==null?void 0:s(d.site_id),className:`
                w-full flex items-center gap-2 px-3 py-2 rounded-ios-sm text-left
                transition-colors duration-150
                ${r===d.site_id?"bg-accent-tint text-accent-primary":"text-label-primary hover:bg-separator-light"}
              `,children:[t.jsx(uv,{status:d.health.status}),t.jsx("span",{className:"text-sm truncate",children:d.name})]},d.site_id)),e.length===0&&t.jsx("p",{className:"text-sm text-label-tertiary px-3 py-2",children:"No clients yet"})]})]}),t.jsxs("nav",{className:"flex-1 p-4 overflow-y-auto",children:[t.jsx("h2",{className:"text-xs font-semibold text-label-tertiary uppercase tracking-wide mb-3",children:"Pages"}),t.jsx("div",{className:"space-y-1",children:c.map(d=>t.jsxs(Ly,{to:d.path,className:({isActive:u})=>`
                flex items-center gap-3 px-3 py-2 rounded-ios-sm
                transition-colors duration-150
                ${u?"bg-accent-tint text-accent-primary":"text-label-primary hover:bg-separator-light"}
              `,children:[d.icon,t.jsx("span",{className:"text-sm font-medium flex-1",children:d.label}),d.path==="/notifications"&&i>0&&t.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-red-500 text-white",children:i>99?"99+":i})]},d.path))})]}),t.jsx("div",{className:"p-4 border-t border-separator-light",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-accent-primary rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white text-sm font-medium",children:o})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-label-primary truncate",children:(n==null?void 0:n.displayName)||"User"}),t.jsx("p",{className:"text-xs text-label-tertiary capitalize",children:(n==null?void 0:n.role)||"Guest"})]}),a&&t.jsx("button",{onClick:a,className:"p-1.5 hover:bg-separator-light rounded-ios-sm transition-colors",title:"Sign out",children:t.jsx("svg",{className:"w-4 h-4 text-label-tertiary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})})]})},mv=({title:e="Dashboard",subtitle:s,showRefresh:r=!0,onRefresh:n,refreshing:a=!1,lastUpdated:l,actions:i,user:c})=>{const[o,d]=v.useState(!1),u=m=>{const p=Math.floor((new Date().getTime()-m.getTime())/1e3);return p<60?"Just now":p<3600?`${Math.floor(p/60)}m ago`:m.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},h=c!=null&&c.displayName?c.displayName.split(" ").map(m=>m[0]).join("").toUpperCase():"U";return t.jsxs("header",{className:"glass-header h-16 flex items-center justify-between px-6 sticky top-0 z-10",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold text-label-primary",children:e}),s&&t.jsx("p",{className:"text-sm text-label-tertiary",children:s})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"relative",children:o?t.jsx("input",{type:"text",placeholder:"Search...",autoFocus:!0,onBlur:()=>d(!1),className:`
                w-64 px-4 py-2 text-sm
                bg-separator-light rounded-ios-md
                border-none outline-none
                focus:ring-2 focus:ring-accent-primary
                placeholder-label-tertiary
              `}):t.jsx("button",{onClick:()=>d(!0),className:"p-2 rounded-ios-sm hover:bg-separator-light transition-colors","aria-label":"Search",children:t.jsx("svg",{className:"w-5 h-5 text-label-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),r&&t.jsxs("div",{className:"flex items-center gap-2",children:[l&&t.jsx("span",{className:"text-xs text-label-tertiary",children:u(l)}),t.jsx("button",{onClick:n,disabled:a,className:`
                p-2 rounded-ios-sm hover:bg-separator-light transition-colors
                ${a?"animate-spin":""}
              `,"aria-label":"Refresh",children:t.jsx("svg",{className:"w-5 h-5 text-label-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),i,t.jsxs("div",{className:"flex items-center gap-2 pl-4 border-l border-separator-light",children:[t.jsx("div",{className:"w-8 h-8 bg-accent-primary rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white text-sm font-medium",children:h})}),t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-label-primary font-medium",children:(c==null?void 0:c.displayName)||"User"}),t.jsxs("span",{className:"text-label-tertiary ml-1 text-xs capitalize",children:["(",(c==null?void 0:c.role)||"guest",")"]})]})]})]})]})},xv=({isOpen:e,onClose:s})=>{const r=Ce(),n=v.useRef(null),[a,l]=v.useState(""),[i,c]=v.useState(0),[o,d]=v.useState(!1),[u,h]=v.useState(null),[m,g]=v.useState(null),p=[{id:"nav-dashboard",label:"Go to Dashboard",description:"View fleet overview and incidents",category:"navigation",icon:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),action:()=>{r("/"),s()}},{id:"nav-runbooks",label:"Go to Runbooks",description:"Browse runbook library",category:"navigation",icon:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),action:()=>{r("/runbooks"),s()}},{id:"nav-learning",label:"Go to Learning Loop",description:"View L2 to L1 promotions",category:"navigation",icon:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),action:()=>{r("/learning"),s()}},{id:"nav-onboarding",label:"Go to Onboarding",description:"View client pipeline",category:"navigation",icon:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),action:()=>{r("/onboarding"),s()}},{id:"nav-audit",label:"Go to Audit Logs",description:"View system activity logs",category:"navigation",icon:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),action:()=>{r("/audit-logs"),s()}}],j=[{id:"action-refresh",label:"Refresh Data",description:"Reload all dashboard data",category:"action",icon:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),action:()=>{window.location.reload()}},{id:"action-docs",label:"Open User Guide",description:"View documentation (PDF)",category:"action",icon:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),action:()=>{window.open("/USER_GUIDE.pdf","_blank"),s()}},{id:"action-standards",label:"Open Standards & Procedures",description:"View compliance procedures (PDF)",category:"action",icon:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),action:()=>{window.open("/STANDARDS_AND_PROCEDURES.pdf","_blank"),s()}}],w=[...p,...j],x=a.trim()?w.filter(k=>k.label.toLowerCase().includes(a.toLowerCase())||k.description.toLowerCase().includes(a.toLowerCase())):w,f=a.startsWith("/")||a.startsWith("!");v.useEffect(()=>{e&&(l(""),c(0),h(null),g(null),setTimeout(()=>{var k;return(k=n.current)==null?void 0:k.focus()},50))},[e]);const y=v.useCallback(k=>{if(k.key==="Escape"){s();return}if(k.key==="ArrowDown"){k.preventDefault(),c(S=>Math.min(S+1,x.length-1));return}if(k.key==="ArrowUp"){k.preventDefault(),c(S=>Math.max(S-1,0));return}if(k.key==="Enter"){k.preventDefault(),f&&a.length>1?N(a):x[i]&&x[i].action();return}},[x,i,a,f,s]),N=async k=>{d(!0),g(null),h(null);try{const S=await b0.execute(k);h(S)}catch(S){g(S instanceof Error?S.message:"Command failed")}finally{d(!1)}};return e?t.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-[15vh]",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:s}),t.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-ios-lg shadow-2xl overflow-hidden",children:[t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-separator-light",children:[t.jsx("svg",{className:"w-5 h-5 text-label-tertiary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{ref:n,type:"text",value:a,onChange:k=>{l(k.target.value),c(0),h(null),g(null)},onKeyDown:y,placeholder:"Type a command or search...",className:"flex-1 bg-transparent border-none outline-none text-label-primary placeholder-label-tertiary"}),o&&t.jsx("div",{className:"w-5 h-5 border-2 border-accent-primary border-t-transparent rounded-full animate-spin"}),t.jsx("kbd",{className:"px-2 py-1 text-xs text-label-tertiary bg-separator-light rounded",children:"ESC"})]}),t.jsxs("div",{className:"max-h-80 overflow-y-auto",children:[u&&t.jsx("div",{className:"p-4 border-b border-separator-light",children:t.jsxs("div",{className:`p-3 rounded-ios-md ${u.success?"bg-health-healthy/10":"bg-health-critical/10"}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.success?t.jsx("svg",{className:"w-4 h-4 text-health-healthy",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):t.jsx("svg",{className:"w-4 h-4 text-health-critical",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),t.jsx("span",{className:"text-sm font-medium",children:u.success?"Success":"Failed"})]}),u.message&&t.jsx("p",{className:"text-sm text-label-secondary",children:u.message}),u.error&&t.jsx("p",{className:"text-sm text-health-critical",children:u.error}),u.data&&t.jsx("pre",{className:"mt-2 p-2 bg-black/5 rounded text-xs overflow-x-auto",children:JSON.stringify(u.data,null,2)})]})}),m&&t.jsx("div",{className:"p-4 border-b border-separator-light",children:t.jsx("div",{className:"p-3 rounded-ios-md bg-health-critical/10",children:t.jsx("p",{className:"text-sm text-health-critical",children:m})})}),!u&&!m&&t.jsx(t.Fragment,{children:f?t.jsxs("div",{className:"p-4 text-center text-label-tertiary text-sm",children:["Press ",t.jsx("kbd",{className:"px-1.5 py-0.5 bg-separator-light rounded text-xs",children:"Enter"})," to execute command"]}):x.length===0?t.jsx("div",{className:"p-8 text-center text-label-tertiary",children:"No results found"}):t.jsx("div",{className:"py-2",children:["navigation","action"].map(k=>{const S=x.filter(C=>C.category===k);return S.length===0?null:t.jsxs("div",{children:[t.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-label-tertiary uppercase tracking-wide",children:k==="navigation"?"Navigate":"Actions"}),S.map(C=>{const _=x.indexOf(C);return t.jsxs("button",{onClick:C.action,className:`w-full flex items-center gap-3 px-4 py-2 text-left transition-colors ${_===i?"bg-accent-primary/10 text-accent-primary":"hover:bg-separator-light text-label-primary"}`,children:[t.jsx("span",{className:_===i?"text-accent-primary":"text-label-tertiary",children:C.icon}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium truncate",children:C.label}),t.jsx("p",{className:"text-xs text-label-tertiary truncate",children:C.description})]}),_===i&&t.jsx("kbd",{className:"px-1.5 py-0.5 bg-accent-primary/20 rounded text-xs",children:"Enter"})]},C.id)})]},k)})})})]}),t.jsxs("div",{className:"px-4 py-2 border-t border-separator-light bg-separator-light/30 flex items-center justify-between text-xs text-label-tertiary",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("kbd",{className:"px-1 py-0.5 bg-white rounded shadow-sm",children:""}),t.jsx("kbd",{className:"px-1 py-0.5 bg-white rounded shadow-sm",children:""}),"Navigate"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("kbd",{className:"px-1 py-0.5 bg-white rounded shadow-sm",children:"Enter"}),"Select"]})]}),t.jsxs("span",{children:["Tip: Start with ",t.jsx("code",{className:"px-1 bg-white rounded",children:"/"})," for commands"]})]})]})]}):null},pv={none:"",sm:"p-3",md:"p-4",lg:"p-6"},P=({children:e,className:s="",hover:r=!1,onClick:n,padding:a="lg"})=>{const l="glass-card",i=r?"cursor-pointer hover:shadow-card-hover hover:scale-[1.01]":"",c=pv[a];return t.jsx("div",{onClick:n,className:`${l} ${i} ${c} ${s}`,role:n?"button":void 0,tabIndex:n?0:void 0,onKeyDown:n?o=>o.key==="Enter"&&n():void 0,children:e})},fv={critical:"bg-red-100 text-health-critical",warning:"bg-orange-100 text-health-warning",healthy:"bg-green-100 text-health-healthy"},gv={L1:"bg-blue-100 text-ios-blue",L2:"bg-purple-100 text-ios-purple",L3:"bg-orange-100 text-ios-orange"},yv={critical:"bg-red-100 text-health-critical",high:"bg-orange-100 text-health-warning",medium:"bg-yellow-100 text-yellow-700",low:"bg-gray-100 text-label-tertiary"},Ue=({children:e,variant:s="default",status:r,level:n,severity:a,className:l=""})=>{let i="bg-gray-100 text-label-secondary";return s==="health"&&r?i=fv[r]:s==="level"&&n?i=gv[n]:s==="severity"&&a?i=yv[a]:s==="success"?i="bg-green-100 text-health-healthy":s==="info"?i="bg-blue-100 text-ios-blue":s==="warning"?i="bg-orange-100 text-health-warning":s==="error"&&(i="bg-red-100 text-health-critical"),t.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${i} ${l}`,children:e})},jl=({level:e,showLabel:s=!1,className:r})=>{const n={L1:"AUTO",L2:"LLM",L3:"ESC"};return t.jsxs(Ue,{variant:"level",level:e,className:r,children:[e," ",s&&n[e]]})},vv={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},ke=({size:e="md",color:s="text-accent-primary",className:r=""})=>t.jsxs("svg",{className:`animate-spin ${vv[e]} ${s} ${r}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",role:"status","aria-label":"Loading",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),jv=({lines:e=3})=>t.jsxs("div",{className:"glass-card p-6 animate-pulse",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),Array.from({length:e}).map((s,r)=>t.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2",style:{width:`${Math.random()*40+50}%`}},r))]}),gs=({width:e="100%",height:s="1rem"})=>t.jsx("div",{className:"bg-gray-200 rounded animate-pulse",style:{width:e,height:s}}),bv=({actions:e,label:s="More",icon:r,disabled:n=!1,className:a=""})=>{const[l,i]=v.useState(!1),c=v.useRef(null);return v.useEffect(()=>{const o=d=>{c.current&&!c.current.contains(d.target)&&i(!1)};return l&&document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[l]),v.useEffect(()=>{const o=d=>{d.key==="Escape"&&i(!1)};return l&&document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}},[l]),t.jsxs("div",{ref:c,className:`relative inline-block ${a}`,children:[t.jsxs("button",{onClick:()=>i(!l),disabled:n,className:`
          flex items-center gap-1 px-2 py-1 text-sm rounded-ios
          bg-fill-secondary hover:bg-fill-tertiary
          text-label-secondary
          disabled:opacity-50 disabled:cursor-not-allowed
          transition-colors
        `,children:[r||t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})}),s&&t.jsx("span",{children:s})]}),l&&t.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-fill-primary rounded-ios shadow-lg border border-separator-light z-[9999]",children:t.jsx("div",{className:"py-1",children:e.map((o,d)=>t.jsxs("button",{onClick:()=>{o.disabled||(o.onClick(),i(!1))},disabled:o.disabled,className:`
                  w-full flex items-center gap-2 px-3 py-2 text-sm text-left
                  ${o.danger?"text-white bg-gradient-to-r from-red-600 to-orange-500 hover:from-red-700 hover:to-orange-600 font-medium":"text-label-primary hover:bg-fill-secondary"}
                  disabled:opacity-50 disabled:cursor-not-allowed
                  transition-colors
                `,children:[o.icon,o.label]},d))})})]})},Nv={sm:{size:40,fontSize:"text-xs",labelSize:"text-[8px]",strokeWidth:3},md:{size:64,fontSize:"text-base",labelSize:"text-[10px]",strokeWidth:4},lg:{size:96,fontSize:"text-xl",labelSize:"text-xs",strokeWidth:5},xl:{size:128,fontSize:"text-2xl",labelSize:"text-sm",strokeWidth:6}},bl=({score:e,size:s="md",showLabel:r=!0,showPercentage:n=!0,thickness:a,className:l=""})=>{const i=Nv[s],c=a??i.strokeWidth,o=(i.size-c)/2,d=2*Math.PI*o,u=Math.min(Math.max(e,0),100),h=d-u/100*d,m=g0(e),g=wx(m),p=y0(m);return t.jsxs("div",{className:`relative inline-flex items-center justify-center ${l}`,style:{width:i.size,height:i.size},children:[t.jsxs("svg",{className:"absolute inset-0 -rotate-90",width:i.size,height:i.size,children:[t.jsx("circle",{cx:i.size/2,cy:i.size/2,r:o,fill:"none",stroke:"rgba(60, 60, 67, 0.1)",strokeWidth:c}),t.jsx("circle",{cx:i.size/2,cy:i.size/2,r:o,fill:"none",stroke:g,strokeWidth:c,strokeDasharray:d,strokeDashoffset:h,strokeLinecap:"round",className:"transition-all duration-500 ease-out"})]}),t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[n&&t.jsxs("span",{className:`font-semibold ${i.fontSize}`,style:{color:g},children:[Math.round(e),"%"]}),r&&t.jsx("span",{className:`text-label-tertiary ${i.labelSize}`,children:p})]})]})},wv=({client:e})=>{const s=Ce(),r=()=>{s(`/client/${e.site_id}`)};return t.jsx(P,{hover:!0,onClick:r,padding:"md",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-semibold text-label-primary truncate",children:e.name}),t.jsxs("p",{className:"text-sm text-label-tertiary mt-1",children:[e.online_count,"/",e.appliance_count," appliances online"]}),e.incidents_24h>0&&t.jsxs("p",{className:"text-xs text-health-warning mt-2",children:[e.incidents_24h," incident",e.incidents_24h!==1?"s":""," (24h)"]})]}),t.jsx(bl,{score:e.health.overall,size:"md"})]})})},kv=({clients:e,isLoading:s=!1,error:r=null})=>{if(r)return t.jsxs("div",{className:"glass-card p-6 text-center",children:[t.jsx("div",{className:"text-health-critical mb-2",children:t.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),t.jsx("h3",{className:"font-semibold text-label-primary",children:"Failed to load fleet data"}),t.jsx("p",{className:"text-sm text-label-tertiary mt-1",children:r.message})]});if(s)return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(a=>t.jsx(jv,{lines:2},a))});if(e.length===0)return t.jsxs("div",{className:"glass-card p-8 text-center",children:[t.jsx("div",{className:"text-label-tertiary mb-2",children:t.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),t.jsx("h3",{className:"font-semibold text-label-primary",children:"No clients yet"}),t.jsx("p",{className:"text-sm text-label-tertiary mt-1",children:"Clients will appear here once appliances start checking in."})]});const n=[...e].sort((a,l)=>{const i={critical:0,warning:1,healthy:2};return i[a.health.status]-i[l.health.status]});return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(a=>t.jsx(wv,{client:a},a.site_id))})},Cv={patching:"Patch",antivirus:"AV",backup:"Backup",logging:"Logging",firewall:"Firewall",encryption:"Encryption",network:"Network",ntp_sync:"NTP",disk_space:"Disk",service_health:"Services",windows_defender:"Defender",memory_pressure:"Memory",certificate_expiry:"Cert",database_corruption:"Database",prohibited_port:"Port"},Sv=e=>{const s=new Date(e),n=new Date().getTime()-s.getTime(),a=Math.floor(n/6e4),l=Math.floor(n/36e5),i=Math.floor(n/864e5);return a<1?"Just now":a<60?`${a}m ago`:l<24?`${l}h ago`:i<7?`${i}d ago`:s.toLocaleDateString([],{month:"short",day:"numeric"})},ju=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Wc=({incident:e,onClick:s,compact:r=!1})=>{const n=Cv[e.check_type]||e.check_type;return r?t.jsxs("button",{onClick:s,className:"w-full flex items-center gap-3 py-2 px-3 hover:bg-separator-light rounded-ios-sm transition-colors text-left",children:[t.jsx("span",{className:"text-xs text-label-tertiary w-12",children:ju(e.created_at)}),t.jsx("span",{className:"text-sm text-label-primary truncate flex-1",children:e.hostname}),t.jsx("span",{className:"text-sm text-label-secondary truncate max-w-[100px]",children:n}),e.resolution_level&&t.jsx(jl,{level:e.resolution_level}),e.resolved?t.jsx("svg",{className:"w-4 h-4 text-health-healthy flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):t.jsx("svg",{className:"w-4 h-4 text-health-warning flex-shrink-0 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]}):t.jsxs("button",{onClick:s,className:"w-full flex items-center gap-4 p-4 bg-white/50 hover:bg-white/80 rounded-ios-md transition-colors text-left border border-separator-light",children:[t.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${e.resolved?"bg-health-healthy":"bg-health-warning animate-pulse"}`}),t.jsxs("div",{className:"w-16 flex-shrink-0",children:[t.jsx("p",{className:"text-sm font-medium text-label-primary",children:ju(e.created_at)}),t.jsx("p",{className:"text-xs text-label-tertiary",children:Sv(e.created_at)})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-label-primary truncate",children:e.site_id.replace(/-/g," ").replace(/\b\w/g,a=>a.toUpperCase())}),t.jsx("p",{className:"text-xs text-label-tertiary truncate",children:e.hostname})]}),t.jsxs("div",{className:"w-24 flex-shrink-0",children:[t.jsxs("p",{className:"text-sm text-label-secondary",children:[n," drift"]}),e.hipaa_controls.length>0&&t.jsx("p",{className:"text-xs text-label-tertiary truncate",children:e.hipaa_controls[0]})]}),t.jsx("div",{className:"w-20 flex-shrink-0",children:e.resolution_level?t.jsx(jl,{level:e.resolution_level,showLabel:!0}):t.jsx("span",{className:"text-xs text-label-tertiary",children:"Pending"})}),t.jsx("div",{className:"w-16 flex-shrink-0 text-right",children:e.resolved?t.jsx("span",{className:"text-sm text-health-healthy font-medium",children:"Resolved"}):t.jsx("span",{className:"text-sm text-health-warning font-medium",children:"Active"})})]})},_v=({incidents:e,isLoading:s=!1,error:r=null,title:n="Recent Incidents",showViewAll:a=!0,compact:l=!1,limit:i})=>{const c=Ce(),o=i?e.slice(0,i):e,d=e.filter(h=>!h.resolved).length,u=e.filter(h=>h.resolved).length;return t.jsxs(P,{padding:l?"md":"lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("h2",{className:"text-lg font-semibold text-label-primary",children:n}),!s&&e.length>0&&t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d>0&&t.jsxs("span",{className:"px-2 py-0.5 bg-orange-100 text-health-warning rounded-full",children:[d," active"]}),t.jsxs("span",{className:"text-label-tertiary",children:[u," resolved"]})]})]}),a&&e.length>0&&t.jsx("button",{onClick:()=>c("/incidents"),className:"text-sm text-accent-primary hover:underline",children:"View All"})]}),r&&t.jsx("div",{className:"text-center py-4",children:t.jsx("p",{className:"text-health-critical text-sm",children:r.message})}),s&&t.jsx("div",{className:"space-y-3",children:[1,2,3].map(h=>t.jsxs("div",{className:"flex items-center gap-4 p-3",children:[t.jsx(gs,{width:"60px",height:"12px"}),t.jsx(gs,{width:"120px",height:"14px"}),t.jsx(gs,{width:"80px",height:"12px"}),t.jsx(gs,{width:"50px",height:"20px"})]},h))}),!s&&!r&&e.length===0&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-health-healthy mb-2",children:t.jsx("svg",{className:"w-10 h-10 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsx("p",{className:"text-label-secondary text-sm",children:"No recent incidents"}),t.jsx("p",{className:"text-label-tertiary text-xs mt-1",children:"All systems operating normally"})]}),!s&&!r&&e.length>0&&t.jsx("div",{className:l?"space-y-1":"space-y-2",children:o.map(h=>t.jsx(Wc,{incident:h,compact:l,onClick:()=>console.log("View incident",h.id)},h.id))}),i&&e.length>i&&t.jsx("div",{className:"mt-4 pt-3 border-t border-separator-light text-center",children:t.jsxs("button",{onClick:()=>c("/incidents"),className:"text-sm text-accent-primary hover:underline",children:["+",e.length-i," more incidents"]})})]})},bu={pass:"bg-green-100 text-green-800",fail:"bg-red-100 text-red-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-200 text-red-900",unknown:"bg-gray-100 text-gray-600"},Pv=e=>{const s=new Date(e),n=new Date().getTime()-s.getTime(),a=Math.floor(n/6e4),l=Math.floor(a/60),i=Math.floor(l/24);return a<1?"just now":a<60?`${a}m ago`:l<24?`${l}h ago`:`${i}d ago`},Ev=({events:e,isLoading:s=!1,error:r=null,title:n="Recent Activity",compact:a=!1,limit:l})=>{const i=l?e.slice(0,l):e,c=e.filter(d=>d.outcome==="pass").length,o=e.filter(d=>d.outcome!=="pass").length;return t.jsxs(P,{padding:a?"md":"lg",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("h2",{className:"text-lg font-semibold text-label-primary",children:n}),!s&&e.length>0&&t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o>0&&t.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full",children:[o," issues"]}),t.jsxs("span",{className:"text-label-tertiary",children:[c," passing"]})]})]})}),r&&t.jsx("div",{className:"text-center py-4",children:t.jsx("p",{className:"text-health-critical text-sm",children:r.message})}),s&&t.jsx("div",{className:"space-y-3",children:[1,2,3].map(d=>t.jsxs("div",{className:"flex items-center gap-4 p-3",children:[t.jsx(gs,{width:"60px",height:"12px"}),t.jsx(gs,{width:"120px",height:"14px"}),t.jsx(gs,{width:"80px",height:"12px"}),t.jsx(gs,{width:"50px",height:"20px"})]},d))}),!s&&!r&&e.length===0&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-label-tertiary mb-2",children:t.jsx("svg",{className:"w-10 h-10 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsx("p",{className:"text-label-secondary text-sm",children:"No recent activity"}),t.jsx("p",{className:"text-label-tertiary text-xs mt-1",children:"Waiting for appliance check-ins"})]}),!s&&!r&&e.length>0&&t.jsx("div",{className:a?"space-y-1":"space-y-2",children:i.map(d=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-fill-tertiary/50 hover:bg-fill-tertiary transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[t.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${bu[d.outcome]||bu.unknown}`,children:d.outcome}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-label-primary truncate",children:d.check_name||d.check_type}),t.jsx("p",{className:"text-xs text-label-tertiary truncate",children:d.site_id})]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[d.resolution_level&&t.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-blue-100 text-blue-700 rounded",children:d.resolution_level}),t.jsx("span",{className:"text-xs text-label-tertiary whitespace-nowrap",children:Pv(d.created_at)})]})]},d.id))}),l&&e.length>l&&t.jsx("div",{className:"mt-4 pt-3 border-t border-separator-light text-center",children:t.jsxs("span",{className:"text-sm text-label-tertiary",children:["+",e.length-l," more events"]})})]})},Lv=()=>{const e=Ce(),{data:s=[],isLoading:r,error:n}=Px(),{data:a=[],isLoading:l,error:i}=Hc({limit:10}),{data:c=[],isLoading:o,error:d}=w0({limit:10}),{data:u,isLoading:h}=k0(),{data:m,isLoading:g}=Ex();return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(P,{padding:"md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"Total Clients"}),t.jsx("p",{className:"text-2xl font-semibold",children:h?"...":(u==null?void 0:u.total_clients)??s.length})]}),t.jsx("div",{className:"w-10 h-10 bg-accent-tint rounded-ios-md flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})})]})}),t.jsx(P,{padding:"md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"Control Coverage"}),t.jsx("p",{className:"text-2xl font-semibold text-health-healthy",children:h?"...":`${(u==null?void 0:u.avg_compliance_score)??0}%`})]}),t.jsx(bl,{score:(u==null?void 0:u.avg_compliance_score)??0,size:"sm",showLabel:!1})]})}),t.jsx(P,{padding:"md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"Incidents (24h)"}),t.jsx("p",{className:"text-2xl font-semibold",children:h?"...":(u==null?void 0:u.incidents_24h)??0})]}),t.jsx("div",{className:"w-10 h-10 bg-orange-50 rounded-ios-md flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-health-warning",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]})}),t.jsx(P,{padding:"md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"L1 Resolution"}),t.jsx("p",{className:"text-2xl font-semibold text-ios-blue",children:h?"...":`${(u==null?void 0:u.l1_resolution_rate)??0}%`})]}),t.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-ios-md flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-ios-blue",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),t.jsxs(P,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Fleet Overview"}),t.jsxs("span",{className:"text-xs text-label-tertiary",children:[s.length," client",s.length!==1?"s":""]})]}),t.jsx(kv,{clients:s,isLoading:r,error:n})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[t.jsx(_v,{incidents:a,isLoading:l,error:i,title:"Incidents",showViewAll:!0,limit:5,compact:!0}),t.jsx(Ev,{events:c,isLoading:o,error:d,title:"Recent Activity",limit:5,compact:!0})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs(P,{children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System Health"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-label-secondary",children:"Control Coverage"}),t.jsx("span",{className:"font-medium",children:h?"...":`${(u==null?void 0:u.avg_compliance_score)??0}%`})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-label-secondary",children:"Avg Connectivity"}),t.jsx("span",{className:"font-medium",children:h?"...":`${(u==null?void 0:u.avg_connectivity_score)??0}%`})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-label-secondary",children:"Online Appliances"}),t.jsx("span",{className:"font-medium",children:h?"...":`${(u==null?void 0:u.online_appliances)??0}/${(u==null?void 0:u.total_appliances)??0}`})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-label-secondary",children:"Incidents (7d)"}),t.jsx("span",{className:"font-medium",children:h?"...":(u==null?void 0:u.incidents_7d)??0})]})]})]}),t.jsxs(P,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Learning Loop"}),t.jsx("button",{onClick:()=>e("/learning"),className:"text-sm text-accent-primary hover:underline",children:"View All"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-label-secondary",children:"L1 Rules"}),t.jsx("span",{className:"font-medium",children:g?"...":(m==null?void 0:m.total_l1_rules)??0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-label-secondary",children:"L2 Decisions (30d)"}),t.jsx("span",{className:"font-medium",children:g?"...":(m==null?void 0:m.total_l2_decisions_30d)??0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-label-secondary",children:"Awaiting Promotion"}),t.jsx("span",{className:"font-medium text-health-warning",children:g?"...":(m==null?void 0:m.patterns_awaiting_promotion)??0})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-label-secondary",children:"Success Rate"}),t.jsx("span",{className:"font-medium text-health-healthy",children:g?"...":`${(m==null?void 0:m.promotion_success_rate)??0}%`})]})]})]})]}),t.jsx(P,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Onboarding Pipeline"}),t.jsx("p",{className:"text-sm text-label-tertiary mt-1",children:"Track prospects through acquisition and activation phases"})]}),t.jsx("button",{onClick:()=>e("/onboarding"),className:"btn-secondary text-sm",children:"View Pipeline"})]})})]})},Av=e=>e<1e3?`${e}ms`:e<6e4?`${(e/1e3).toFixed(1)}s`:`${(e/6e4).toFixed(1)}m`,Rv=({runbook:e,onClick:s})=>{const r=e.success_rate>=95?"text-health-healthy":e.success_rate>=80?"text-health-warning":"text-health-critical";return t.jsx(P,{hover:!0,onClick:s,padding:"md",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-xs font-mono text-label-tertiary",children:e.id}),t.jsx(jl,{level:e.level}),e.is_disruptive&&t.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-orange-100 text-orange-700 rounded",children:"Disruptive"})]}),t.jsx("h3",{className:"font-semibold text-label-primary truncate",children:e.name}),t.jsx("p",{className:"text-sm text-label-secondary mt-1 line-clamp-2",children:e.description}),t.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.hipaa_controls.map(n=>t.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-accent-tint text-accent-primary rounded",children:n},n))})]}),t.jsxs("div",{className:"flex-shrink-0 text-right space-y-1",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-label-tertiary",children:"Executions"}),t.jsx("p",{className:"text-lg font-semibold text-label-primary",children:e.execution_count.toLocaleString()})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-label-tertiary",children:"Success Rate"}),t.jsxs("p",{className:`text-lg font-semibold ${r}`,children:[e.success_rate.toFixed(1),"%"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-label-tertiary",children:"Avg Time"}),t.jsx("p",{className:"text-sm font-medium text-label-secondary",children:Av(e.avg_execution_time_ms)})]})]})]})})},Nu=e=>e<1e3?`${e}ms`:e<6e4?`${(e/1e3).toFixed(1)}s`:`${(e/6e4).toFixed(1)}m`,wu=e=>new Date(e).toLocaleDateString([],{month:"short",day:"numeric",year:"numeric"}),Mv=e=>new Date(e).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Tv=({runbook:e,executions:s,isLoadingExecutions:r,onClose:n})=>{const a=e.success_rate>=95?"text-health-healthy":e.success_rate>=80?"text-health-warning":"text-health-critical";return t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm",onClick:n}),t.jsxs("div",{className:"relative w-full max-w-2xl max-h-[90vh] overflow-hidden bg-white/95 backdrop-blur-xl rounded-ios-lg shadow-2xl border border-white/50",children:[t.jsxs("div",{className:"p-6 border-b border-separator-light",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-sm font-mono text-label-tertiary",children:e.id}),t.jsx(jl,{level:e.level,showLabel:!0}),e.is_disruptive&&t.jsx("span",{className:"px-2 py-0.5 text-xs bg-orange-100 text-orange-700 rounded-full",children:"Disruptive"})]}),t.jsx("h2",{className:"text-xl font-semibold text-label-primary",children:e.name}),t.jsx("p",{className:"text-label-secondary mt-1",children:e.description})]}),t.jsx("button",{onClick:n,className:"p-2 hover:bg-separator-light rounded-ios-sm transition-colors",children:t.jsx("svg",{className:"w-5 h-5 text-label-tertiary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:e.hipaa_controls.map(l=>t.jsxs("span",{className:"px-2 py-1 text-xs bg-accent-tint text-accent-primary rounded-full",children:["HIPAA ",l]},l))})]}),t.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-200px)]",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4 p-6 bg-gray-50",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-gray-600 uppercase tracking-wide",children:"Executions"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-1",children:e.execution_count.toLocaleString()})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-gray-600 uppercase tracking-wide",children:"Success Rate"}),t.jsxs("p",{className:`text-2xl font-semibold mt-1 ${a}`,children:[e.success_rate.toFixed(1),"%"]})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-gray-600 uppercase tracking-wide",children:"Avg Time"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-1",children:Nu(e.avg_execution_time_ms)})]})]}),t.jsxs("div",{className:"p-6 border-b border-gray-200",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Execution Steps"}),t.jsx("div",{className:"space-y-2",children:e.steps.map((l,i)=>{const c=l;return t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-ios-sm",children:[t.jsx("span",{className:"w-6 h-6 flex items-center justify-center bg-accent-primary text-white text-xs font-medium rounded-full",children:i+1}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:c.action||c.name||`Step ${i+1}`}),c.timeout_seconds&&t.jsxs("p",{className:"text-xs text-gray-500",children:["Timeout: ",c.timeout_seconds,"s"]})]})]},i)})})]}),Object.keys(e.parameters).length>0&&t.jsxs("div",{className:"p-6 border-b border-gray-200",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Parameters"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(e.parameters).map(([l,i])=>t.jsxs("div",{className:"p-2 bg-gray-50 rounded-ios-sm",children:[t.jsx("p",{className:"text-xs text-gray-600",children:l}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:typeof i=="boolean"?i?"Yes":"No":String(i)})]},l))})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Recent Executions"}),r?t.jsx("div",{className:"space-y-2",children:[1,2,3].map(l=>t.jsx("div",{className:"h-16 bg-gray-100 rounded-ios-sm animate-pulse"},l))}):s.length===0?t.jsx("p",{className:"text-gray-500 text-sm",children:"No recent executions"}):t.jsx("div",{className:"space-y-2",children:s.map(l=>t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-ios-sm",children:[t.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${l.success?"bg-health-healthy":"bg-health-critical"}`}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:l.hostname}),t.jsx("span",{className:"text-xs text-gray-500",children:l.site_id.replace(/-/g," ").replace(/\b\w/g,i=>i.toUpperCase())})]}),l.output&&t.jsx("p",{className:"text-xs text-gray-600 truncate",children:l.output}),l.error&&t.jsx("p",{className:"text-xs text-health-critical truncate",children:l.error})]}),t.jsxs("div",{className:"text-right flex-shrink-0",children:[t.jsx("p",{className:"text-xs text-gray-500",children:Mv(l.executed_at)}),t.jsx("p",{className:"text-xs text-gray-600",children:Nu(l.execution_time_ms)})]})]},l.id))})]}),t.jsx("div",{className:"p-6 bg-gray-50 border-t border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsxs("span",{children:["Created: ",wu(e.created_at)]}),t.jsxs("span",{children:["Last updated: ",wu(e.updated_at)]})]})})]})]})]})},Iv=()=>{const[e,s]=v.useState(null),[r,n]=v.useState("all"),[a,l]=v.useState(""),{data:i=[],isLoading:c,error:o}=S0(),{data:d}=_0(e),{data:u=[],isLoading:h}=P0(e,10),m=i.filter(x=>{const f=r==="all"||x.level===r,y=a===""||x.name.toLowerCase().includes(a.toLowerCase())||x.id.toLowerCase().includes(a.toLowerCase())||x.hipaa_controls.some(N=>N.toLowerCase().includes(a.toLowerCase()));return f&&y}),g=i.reduce((x,f)=>x+f.execution_count,0),p=i.length>0?i.reduce((x,f)=>x+f.success_rate,0)/i.length:0,j=i.filter(x=>x.level==="L1").length,w=i.filter(x=>x.is_disruptive).length;return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold",children:"Runbook Library"}),t.jsx("p",{className:"text-label-tertiary mt-1",children:"Automated remediation playbooks with HIPAA control mappings"})]})}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase tracking-wide",children:"Total Runbooks"}),t.jsx("p",{className:"text-2xl font-semibold mt-1",children:i.length})]}),t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase tracking-wide",children:"Total Executions"}),t.jsx("p",{className:"text-2xl font-semibold mt-1",children:g.toLocaleString()})]}),t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase tracking-wide",children:"Avg Success Rate"}),t.jsxs("p",{className:"text-2xl font-semibold text-health-healthy mt-1",children:[p.toFixed(1),"%"]})]}),t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase tracking-wide",children:"L1 Deterministic"}),t.jsx("p",{className:"text-2xl font-semibold text-ios-blue mt-1",children:j})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-label-tertiary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Search runbooks, HIPAA controls...",value:a,onChange:x=>l(x.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/50 border border-separator-light rounded-ios-md text-sm focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent"})]}),t.jsx("div",{className:"flex items-center gap-1 bg-separator-light rounded-ios-md p-1",children:["all","L1","L2","L3"].map(x=>t.jsx("button",{onClick:()=>n(x),className:`px-3 py-1.5 text-sm rounded-ios-sm transition-colors ${r===x?"bg-white shadow-sm text-label-primary font-medium":"text-label-secondary hover:text-label-primary"}`,children:x==="all"?"All":x},x))})]}),c?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(ke,{size:"lg"})}):o?t.jsx(P,{children:t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-health-critical",children:"Failed to load runbooks"}),t.jsx("p",{className:"text-label-tertiary text-sm mt-1",children:String(o)})]})}):m.length===0?t.jsx(P,{children:t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-label-secondary",children:"No runbooks match your filters"}),t.jsx("button",{onClick:()=>{n("all"),l("")},className:"text-accent-primary text-sm mt-2 hover:underline",children:"Clear filters"})]})}):t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:m.map(x=>t.jsx(Rv,{runbook:x,onClick:()=>s(x.id)},x.id))}),t.jsx(P,{padding:"sm",children:t.jsxs("div",{className:"flex items-center justify-center gap-6 text-xs text-label-tertiary",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"px-1.5 py-0.5 bg-ios-blue/10 text-ios-blue rounded",children:"L1"}),t.jsx("span",{children:"Deterministic (<100ms)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"px-1.5 py-0.5 bg-ios-purple/10 text-ios-purple rounded",children:"L2"}),t.jsx("span",{children:"LLM-assisted (2-5s)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"px-1.5 py-0.5 bg-orange-100 text-orange-700 rounded",children:"Disruptive"}),t.jsxs("span",{children:[w," runbooks may cause service interruption"]})]})]})}),d&&t.jsx(Tv,{runbook:d,executions:u,isLoadingExecutions:h,onClose:()=>s(null)})]})},Ov={services:"bg-blue-100 text-blue-700",security:"bg-red-100 text-red-700",network:"bg-purple-100 text-purple-700",storage:"bg-amber-100 text-amber-700",updates:"bg-green-100 text-green-700",active_directory:"bg-indigo-100 text-indigo-700",backup:"bg-cyan-100 text-cyan-700",antivirus:"bg-rose-100 text-rose-700"},Dv=({severity:e})=>{const s={critical:"bg-health-critical/10 text-health-critical",high:"bg-orange-100 text-orange-700",medium:"bg-yellow-100 text-yellow-700",low:"bg-gray-100 text-gray-600"};return t.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${s[e]||s.medium}`,children:e})},Fv=({checked:e,onChange:s,disabled:r})=>t.jsx("button",{role:"switch","aria-checked":e,disabled:r,onClick:()=>s(!e),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-offset-2 ${e?"bg-health-healthy":"bg-gray-300"} ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e?"translate-x-6":"translate-x-1"}`})}),zv=({runbook:e,onToggle:s,isLoading:r})=>t.jsxs("tr",{className:"border-b border-separator-light hover:bg-fill-secondary/50 transition-colors",children:[t.jsx("td",{className:"py-3 px-4",children:t.jsx("div",{className:"flex items-center gap-3",children:t.jsx(Fv,{checked:e.enabled,onChange:n=>s(e.runbook_id,n),disabled:r})})}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-label-primary",children:e.name}),t.jsx("p",{className:"text-xs text-label-tertiary font-mono",children:e.runbook_id})]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Ov[e.category]||"bg-gray-100 text-gray-700"}`,children:e.category.replace(/_/g," ")})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx(Dv,{severity:e.severity})}),t.jsx("td",{className:"py-3 px-4",children:e.is_disruptive&&t.jsx(Ue,{variant:"warning",children:"Disruptive"})}),t.jsx("td",{className:"py-3 px-4 text-sm text-label-secondary max-w-xs truncate",children:e.description||"-"})]}),$v=()=>{const[e,s]=v.useState(null),[r,n]=v.useState("all"),[a,l]=v.useState(""),[i,c]=v.useState(null),{data:o,isLoading:d}=Lx(),{data:u=[]}=V0(),{data:h=[],isLoading:m}=Q0(e),g=K0(),p=(o==null?void 0:o.sites)||[],j=v.useMemo(()=>h.filter(S=>{var R;const C=r==="all"||S.category===r,_=a===""||S.name.toLowerCase().includes(a.toLowerCase())||S.runbook_id.toLowerCase().includes(a.toLowerCase())||(((R=S.description)==null?void 0:R.toLowerCase().includes(a.toLowerCase()))??!1);return C&&_}),[h,r,a]),w=h.filter(S=>S.enabled).length,x=h.filter(S=>!S.enabled).length,f=h.filter(S=>S.is_disruptive).length,y=v.useMemo(()=>{const S={};return h.forEach(C=>{S[C.category]=(S[C.category]||0)+1}),S},[h]),N=async(S,C)=>{if(e)try{await g.mutateAsync({siteId:e,runbookId:S,enabled:C}),c({message:`Runbook ${C?"enabled":"disabled"}`,type:"success"}),setTimeout(()=>c(null),2e3)}catch(_){c({message:`Failed to update runbook: ${_}`,type:"error"}),setTimeout(()=>c(null),3e3)}},k=async(S,C)=>{if(!e)return;const _=h.filter(R=>R.category===S);for(const R of _)try{await g.mutateAsync({siteId:e,runbookId:R.runbook_id,enabled:C})}catch(L){console.error(`Failed to update ${R.runbook_id}:`,L)}c({message:`${S} runbooks ${C?"enabled":"disabled"}`,type:"success"}),setTimeout(()=>c(null),2e3)};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold",children:"Runbook Configuration"}),t.jsx("p",{className:"text-label-tertiary mt-1",children:"Enable or disable automated remediation runbooks per site"})]})}),t.jsx(P,{children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("label",{className:"text-sm font-medium text-label-secondary",children:"Select Site:"}),d?t.jsx(ke,{size:"sm"}):t.jsxs("select",{value:e||"",onChange:S=>s(S.target.value||null),className:"flex-1 max-w-md px-3 py-2 bg-fill-secondary text-label-primary border border-separator-light rounded-ios focus:outline-none focus:ring-2 focus:ring-accent-primary",children:[t.jsx("option",{value:"",children:"Choose a site..."}),p.map(S=>t.jsxs("option",{value:S.site_id,children:[S.clinic_name," (",S.site_id,")"]},S.site_id))]})]})}),e?m?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(ke,{size:"lg"})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase tracking-wide",children:"Total Runbooks"}),t.jsx("p",{className:"text-2xl font-semibold mt-1",children:h.length})]}),t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase tracking-wide",children:"Enabled"}),t.jsx("p",{className:"text-2xl font-semibold text-health-healthy mt-1",children:w})]}),t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase tracking-wide",children:"Disabled"}),t.jsx("p",{className:"text-2xl font-semibold text-label-tertiary mt-1",children:x})]}),t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase tracking-wide",children:"Disruptive"}),t.jsx("p",{className:"text-2xl font-semibold text-health-warning mt-1",children:f})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-label-tertiary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Search runbooks...",value:a,onChange:S=>l(S.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/50 border border-separator-light rounded-ios-md text-sm focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent"})]}),t.jsxs("div",{className:"flex items-center gap-1 bg-separator-light rounded-ios-md p-1",children:[t.jsxs("button",{onClick:()=>n("all"),className:`px-3 py-1.5 text-sm rounded-ios-sm transition-colors ${r==="all"?"bg-white shadow-sm text-label-primary font-medium":"text-label-secondary hover:text-label-primary"}`,children:["All (",h.length,")"]}),u.map(S=>t.jsxs("button",{onClick:()=>n(S),className:`px-3 py-1.5 text-sm rounded-ios-sm transition-colors ${r===S?"bg-white shadow-sm text-label-primary font-medium":"text-label-secondary hover:text-label-primary"}`,children:[S.replace(/_/g," ")," (",y[S]||0,")"]},S))]})]}),r!=="all"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-sm text-label-tertiary",children:["Bulk actions for ",r,":"]}),t.jsx("button",{onClick:()=>k(r,!0),disabled:g.isPending,className:"px-3 py-1.5 text-xs rounded-ios bg-health-healthy/10 text-health-healthy hover:bg-health-healthy/20 disabled:opacity-50 transition-colors",children:"Enable All"}),t.jsx("button",{onClick:()=>k(r,!1),disabled:g.isPending,className:"px-3 py-1.5 text-xs rounded-ios bg-gray-100 text-gray-600 hover:bg-gray-200 disabled:opacity-50 transition-colors",children:"Disable All"})]}),t.jsx(P,{className:"overflow-hidden",children:j.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-label-secondary",children:"No runbooks match your filters"}),t.jsx("button",{onClick:()=>{n("all"),l("")},className:"text-accent-primary text-sm mt-2 hover:underline",children:"Clear filters"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-fill-secondary text-left text-xs uppercase text-label-tertiary tracking-wide",children:[t.jsx("th",{className:"py-3 px-4 w-20",children:"Enabled"}),t.jsx("th",{className:"py-3 px-4",children:"Runbook"}),t.jsx("th",{className:"py-3 px-4",children:"Category"}),t.jsx("th",{className:"py-3 px-4",children:"Severity"}),t.jsx("th",{className:"py-3 px-4",children:"Flags"}),t.jsx("th",{className:"py-3 px-4",children:"Description"})]})}),t.jsx("tbody",{children:j.map(S=>t.jsx(zv,{runbook:S,onToggle:N,isLoading:g.isPending},S.runbook_id))})]})})}),t.jsx(P,{padding:"sm",children:t.jsxs("div",{className:"flex items-center justify-center gap-6 text-xs text-label-tertiary",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-3 h-3 rounded-full bg-health-healthy"}),t.jsx("span",{children:"Enabled - Runbook will auto-execute when triggered"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-3 h-3 rounded-full bg-gray-300"}),t.jsx("span",{children:"Disabled - Runbook skipped, drift still detected"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ue,{variant:"warning",children:"Disruptive"}),t.jsx("span",{children:"May cause service interruption"})]})]})})]}):t.jsx(P,{children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("svg",{className:"w-16 h-16 mx-auto text-label-tertiary mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),t.jsx("p",{className:"text-label-secondary text-lg",children:"Select a site to configure runbooks"}),t.jsx("p",{className:"text-label-tertiary text-sm mt-1",children:"Each site can have its own runbook configuration"})]})}),i&&t.jsx("div",{className:`fixed bottom-4 right-4 px-4 py-3 rounded-ios shadow-lg z-50 ${i.type==="success"?"bg-health-healthy text-white":"bg-health-critical text-white"}`,children:i.message})]})},Uv=({candidate:e,onApprove:s,onReject:r,isPromoting:n=!1})=>{const a=c=>c<1e3?`${c}ms`:`${(c/1e3).toFixed(1)}s`,l=c=>new Date(c).toLocaleDateString(void 0,{month:"short",day:"numeric"}),i=e.success_rate>=95?"text-health-healthy":e.success_rate>=80?"text-health-warning":"text-health-critical";return t.jsxs(P,{padding:"md",className:"relative",children:[n&&t.jsx("div",{className:"absolute inset-0 bg-white/50 rounded-ios-lg flex items-center justify-center z-10",children:t.jsx("div",{className:"w-6 h-6 border-2 border-accent-primary border-t-transparent rounded-full animate-spin"})}),t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-level-l2 text-white rounded",children:"L2"}),t.jsxs("span",{className:"text-xs text-label-tertiary",children:[l(e.first_seen)," - ",l(e.last_seen)]})]}),t.jsx("h3",{className:"font-mono text-sm font-medium text-label-primary mb-1",children:e.pattern_signature}),t.jsx("p",{className:"text-sm text-label-secondary mb-3",children:e.description}),t.jsxs("div",{className:"bg-separator-light/50 rounded-ios-sm p-3 mb-3",children:[t.jsx("p",{className:"text-xs text-label-tertiary mb-1",children:"Proposed L1 Rule:"}),t.jsx("p",{className:"text-sm font-medium text-label-primary",children:e.proposed_rule})]}),t.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-label-tertiary",children:"Occurrences: "}),t.jsx("span",{className:"font-medium text-label-primary",children:e.occurrences})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-label-tertiary",children:"Success: "}),t.jsxs("span",{className:`font-medium ${i}`,children:[e.success_rate.toFixed(1),"%"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-label-tertiary",children:"Avg Time: "}),t.jsx("span",{className:"font-medium text-label-primary",children:a(e.avg_resolution_time_ms)})]})]})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("button",{onClick:()=>s(e.id),disabled:n,className:"btn-primary text-xs px-4 py-2 disabled:opacity-50",children:"Approve"}),t.jsx("button",{onClick:()=>r(e.id),disabled:n,className:"btn-secondary text-xs px-4 py-2 disabled:opacity-50",children:"Reject"})]})]})]})},Bv=({history:e,isLoading:s=!1})=>{const r=a=>new Date(a).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),n=a=>a>=95?"bg-health-healthy":a>=80?"bg-health-warning":"bg-health-critical";return s?t.jsxs(P,{children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Recently Promoted"}),t.jsx("div",{className:"space-y-4",children:[1,2,3].map(a=>t.jsxs("div",{className:"flex gap-4 animate-pulse",children:[t.jsx("div",{className:"w-3 h-3 bg-separator-light rounded-full mt-1.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"h-4 bg-separator-light rounded w-1/2 mb-2"}),t.jsx("div",{className:"h-3 bg-separator-light rounded w-1/3"})]})]},a))})]}):e.length===0?t.jsxs(P,{children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Recently Promoted"}),t.jsx("p",{className:"text-label-tertiary text-sm",children:"No promotions yet. Approve patterns above to start building your L1 rule library."})]}):t.jsxs(P,{children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Recently Promoted"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-1.5 top-2 bottom-2 w-px bg-separator-light"}),t.jsx("div",{className:"space-y-4",children:e.map((a,l)=>t.jsxs("div",{className:"flex gap-4 relative",children:[t.jsx("div",{className:`w-3 h-3 rounded-full flex-shrink-0 mt-1.5 ${l===0?"bg-accent-primary":"bg-separator-light"}`}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"font-mono text-sm font-medium text-label-primary truncate",children:a.pattern_signature}),t.jsx("p",{className:"text-xs text-label-tertiary mt-0.5",children:r(a.promoted_at)})]}),t.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:t.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-level-l1 text-white rounded",children:a.rule_id})})]}),t.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:`w-2 h-2 rounded-full ${n(a.post_promotion_success_rate)}`}),t.jsxs("span",{className:"text-label-tertiary",children:[a.post_promotion_success_rate.toFixed(1),"% success"]})]}),t.jsxs("div",{className:"text-label-tertiary",children:[a.executions_since_promotion," executions"]})]})]})]},a.id))})]})]})},Hv=()=>{var m,g;const[e,s]=v.useState(null),{data:r,isLoading:n}=Ex(),{data:a=[],isLoading:l}=E0(),{data:i=[],isLoading:c}=L0(10),o=A0(),d=async p=>{s(p);try{await o.mutateAsync(p)}catch(j){console.error("Failed to promote pattern:",j)}finally{s(null)}},u=p=>{console.log("Rejected pattern:",p)},h=async()=>{for(const p of a)await d(p.id)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"L1 Rules"}),n?t.jsx("div",{className:"h-9 animate-pulse bg-separator-light rounded mt-1"}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-3xl font-semibold",children:(r==null?void 0:r.total_l1_rules)??0}),t.jsx("p",{className:"text-xs text-health-healthy",children:"Deterministic resolutions"})]})]}),t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"L2 Decisions (30d)"}),n?t.jsx("div",{className:"h-9 animate-pulse bg-separator-light rounded mt-1"}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-3xl font-semibold",children:(r==null?void 0:r.total_l2_decisions_30d)??0}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"LLM-assisted resolutions"})]})]}),t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"L1 Resolution Rate"}),n?t.jsx("div",{className:"h-9 animate-pulse bg-separator-light rounded mt-1"}):t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"text-3xl font-semibold text-health-healthy",children:[((m=r==null?void 0:r.l1_resolution_rate)==null?void 0:m.toFixed(1))??0,"%"]}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Target: 70-80%"})]})]}),t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"Promotion Success"}),n?t.jsx("div",{className:"h-9 animate-pulse bg-separator-light rounded mt-1"}):t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:`text-3xl font-semibold ${((r==null?void 0:r.promotion_success_rate)??0)>=90?"text-health-healthy":"text-health-warning"}`,children:[((g=r==null?void 0:r.promotion_success_rate)==null?void 0:g.toFixed(1))??0,"%"]}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Post-promotion accuracy"})]})]})]}),t.jsxs(P,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-lg font-semibold",children:["Awaiting Promotion (",a.length,")"]}),t.jsx("p",{className:"text-sm text-label-tertiary mt-1",children:"L2 patterns with consistent success ready for L1 promotion"})]}),a.length>0&&t.jsx("button",{onClick:h,disabled:e!==null,className:"btn-primary text-sm disabled:opacity-50",children:"Approve All"})]}),l?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(ke,{size:"lg"})}):a.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-health-healthy/10 flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-health-healthy",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),t.jsx("p",{className:"text-label-secondary font-medium",children:"All caught up!"}),t.jsx("p",{className:"text-label-tertiary text-sm mt-1",children:"No patterns awaiting promotion at this time."})]}):t.jsx("div",{className:"space-y-4",children:a.map(p=>t.jsx(Uv,{candidate:p,onApprove:d,onReject:u,isPromoting:e===p.id},p.id))})]}),t.jsx(Bv,{history:i,isLoading:c}),t.jsxs(P,{padding:"md",children:[t.jsx("h3",{className:"font-semibold text-label-primary mb-2",children:"How the Learning Loop Works"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-label-secondary",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"w-8 h-8 flex-shrink-0 rounded-full bg-level-l2/20 flex items-center justify-center",children:t.jsx("span",{className:"text-level-l2 font-bold text-xs",children:"L2"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-label-primary",children:"Pattern Detection"}),t.jsx("p",{className:"text-xs",children:"LLM identifies recurring incident patterns and successful resolutions"})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"w-8 h-8 flex-shrink-0 rounded-full bg-accent-primary/20 flex items-center justify-center",children:t.jsx("svg",{className:"w-4 h-4 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-label-primary",children:"Human Review"}),t.jsx("p",{className:"text-xs",children:"Admin approves patterns meeting success thresholds for promotion"})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"w-8 h-8 flex-shrink-0 rounded-full bg-level-l1/20 flex items-center justify-center",children:t.jsx("span",{className:"text-level-l1 font-bold text-xs",children:"L1"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-label-primary",children:"Deterministic Rule"}),t.jsx("p",{className:"text-xs",children:"Pattern becomes instant L1 resolution - no LLM cost, <100ms"})]})]})]})]})]})},Wv={lead:"Lead",discovery:"Discovery",proposal:"Proposal",contract:"Contract",intake:"Intake",creds:"Credentials",shipped:"Shipped",received:"Received",connectivity:"Connectivity",scanning:"Scanning",baseline:"Baseline",compliant:"Compliant",active:"Active"},Vv=e=>["lead","discovery","proposal","contract","intake","creds","shipped"].includes(e)?1:2,Qv=e=>{switch(e){case"connected":return"bg-health-healthy";case"pending":return"bg-health-warning";case"failed":return"bg-health-critical";default:return"bg-separator-light"}},Kv=({client:e,onClick:s})=>{var l;const r=Vv(e.stage),n=(e.days_in_stage??0)>7,a=(((l=e.blockers)==null?void 0:l.length)??0)>0;return t.jsx(P,{hover:!0,onClick:s,className:"cursor-pointer",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsxs("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${r===1?"bg-accent-primary/20 text-accent-primary":"bg-level-l2/20 text-level-l2"}`,children:["Phase ",r]}),t.jsx("span",{className:"text-xs text-label-tertiary",children:Wv[e.stage]}),n&&t.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-health-warning/20 text-health-warning rounded",children:"At Risk"})]}),t.jsx("h3",{className:"font-semibold text-label-primary mb-1",children:e.name}),e.contact_name&&t.jsxs("p",{className:"text-sm text-label-secondary mb-2",children:[e.contact_name,e.contact_email&&` - ${e.contact_email}`]}),a&&t.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:(e.blockers||[]).map((i,c)=>t.jsx("span",{className:"px-2 py-0.5 text-xs bg-health-critical/10 text-health-critical rounded",children:i},c))}),t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[t.jsx("span",{className:"text-label-tertiary",children:"Progress"}),t.jsxs("span",{className:"font-medium text-label-secondary",children:[e.progress_percent,"%"]})]}),t.jsx("div",{className:"h-1.5 bg-separator-light rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-accent-primary rounded-full transition-all",style:{width:`${e.progress_percent}%`}})})]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-2",children:[t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:`text-lg font-bold ${n?"text-health-warning":"text-label-primary"}`,children:e.days_in_stage}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"days"})]}),r===2&&e.checkin_status&&t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${Qv(e.checkin_status)}`}),t.jsx("span",{className:"text-xs text-label-tertiary capitalize",children:e.checkin_status})]}),r===2&&e.compliance_score!=null&&t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-sm font-medium text-label-secondary",children:[((e==null?void 0:e.compliance_score)??0).toFixed(0),"%"]}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"compliance"})]})]})]})})};class qv extends ne.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}render(){var s,r;return this.state.hasError?t.jsxs("div",{className:"p-4 bg-red-500/20 border border-red-500 rounded-lg text-red-500",children:[t.jsx("strong",{children:"PipelineStages Error:"})," ",(s=this.state.error)==null?void 0:s.message,t.jsx("pre",{className:"mt-2 text-xs overflow-auto",children:(r=this.state.error)==null?void 0:r.stack})]}):this.props.children}}const Gv=[{key:"lead",label:"Lead",shortLabel:"Lead"},{key:"discovery",label:"Discovery",shortLabel:"Disc"},{key:"proposal",label:"Proposal",shortLabel:"Prop"},{key:"contract",label:"Contract",shortLabel:"Sign"},{key:"intake",label:"Intake",shortLabel:"Form"},{key:"creds",label:"Credentials",shortLabel:"Cred"},{key:"shipped",label:"Shipped",shortLabel:"Ship"}],Xv=[{key:"received",label:"Received",shortLabel:"Recv"},{key:"connectivity",label:"Connectivity",shortLabel:"Conn"},{key:"scanning",label:"Scanning",shortLabel:"Scan"},{key:"baseline",label:"Baseline",shortLabel:"Base"},{key:"compliant",label:"Compliant",shortLabel:"Comp"},{key:"active",label:"Active",shortLabel:"Live"}],Yv=({metrics:e,isLoading:s})=>{const r=(l,i)=>e?(l==="acquisition"?e.acquisition:e.activation)[i]??0:0,n=(l,i)=>Math.max(...l.map(c=>r(i,c.key)),1),a=(l,i,c)=>{const o=n(l,i);return t.jsx("div",{className:"flex gap-2",children:l.map(d=>{const u=r(i,d.key),h=u/o*100;return t.jsxs("div",{className:"flex-1 text-center",children:[t.jsxs("div",{className:"relative h-16 bg-separator-light/50 rounded-ios-sm overflow-hidden mb-1",children:[t.jsx("div",{className:`absolute bottom-0 left-0 right-0 ${c} transition-all duration-500`,style:{height:`${h}%`}}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("span",{className:`text-lg font-bold ${u>0?"text-white":"text-label-tertiary"}`,children:s?"-":u})})]}),t.jsx("span",{className:"text-xs text-label-tertiary",title:d.label,children:d.shortLabel})]},d.key)})})};return t.jsx(qv,{children:t.jsxs(P,{children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h2",{className:"text-sm font-semibold text-label-tertiary uppercase tracking-wide",children:"Phase 1: Acquisition"}),e&&t.jsxs("span",{className:"text-sm text-label-secondary",children:["Avg ",((e==null?void 0:e.avg_days_to_ship)??0).toFixed(0)," days to ship"]})]}),a(Gv,"acquisition","bg-accent-primary")]}),t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx("div",{className:"flex-1 h-px bg-separator-light"}),t.jsx("svg",{className:"w-6 h-6 text-label-tertiary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),t.jsx("div",{className:"flex-1 h-px bg-separator-light"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h2",{className:"text-sm font-semibold text-label-tertiary uppercase tracking-wide",children:"Phase 2: Activation"}),e&&t.jsxs("span",{className:"text-sm text-label-secondary",children:["Avg ",((e==null?void 0:e.avg_days_to_active)??0).toFixed(0)," days to active"]})]}),a(Xv,"activation","bg-level-l2")]})]})})},Jv=({isOpen:e,onClose:s,onSubmit:r,isLoading:n})=>{const[a,l]=v.useState(""),[i,c]=v.useState(""),[o,d]=v.useState(""),[u,h]=v.useState("mid");if(!e)return null;const m=g=>{g.preventDefault(),r({clinic_name:a,contact_name:i||void 0,contact_email:o||void 0,tier:u})};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(P,{className:"w-full max-w-md",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"New Prospect"}),t.jsxs("form",{onSubmit:m,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Clinic Name *"}),t.jsx("input",{type:"text",value:a,onChange:g=>l(g.target.value),placeholder:"e.g., Acme Dental",className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light focus:border-accent-primary focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Contact Name"}),t.jsx("input",{type:"text",value:i,onChange:g=>c(g.target.value),placeholder:"e.g., Dr. Smith",className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light focus:border-accent-primary focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Contact Email"}),t.jsx("input",{type:"email",value:o,onChange:g=>d(g.target.value),placeholder:"e.g., contact@acmedental.com",className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light focus:border-accent-primary focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Practice Size"}),t.jsxs("select",{value:u,onChange:g=>h(g.target.value),className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light focus:border-accent-primary focus:outline-none",children:[t.jsx("option",{value:"small",children:"Small (1-5 providers)"}),t.jsx("option",{value:"mid",children:"Mid (6-15 providers)"}),t.jsx("option",{value:"large",children:"Large (15-50 providers)"})]})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 rounded-ios bg-fill-secondary text-label-primary hover:bg-fill-tertiary transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:!a||n,className:"flex-1 px-4 py-2 rounded-ios bg-accent-primary text-white hover:bg-accent-primary/90 transition-colors disabled:opacity-50",children:n?"Creating...":"Add Prospect"})]})]})]})})},Zv=()=>{const e=Ce(),[s,r]=v.useState("all"),[n,a]=v.useState(!1),{data:l=[],isLoading:i}=R0(),{data:c,isLoading:o}=M0(),d=Ax(),u=async x=>{try{const f=await d.mutateAsync(x);a(!1),e(`/sites/${f.site_id}`)}catch(f){console.error("Failed to create prospect:",f)}},h=["lead","discovery","proposal","contract","intake","creds","shipped"],m=["received","connectivity","scanning","baseline","compliant","active"],g=l.filter(x=>s==="all"?x.stage!=="active":s===1?h.includes(x.stage):m.includes(x.stage)&&x.stage!=="active"),p=l.filter(x=>x.stage==="active"),j=[...g].sort((x,f)=>(f.days_in_stage??0)-(x.days_in_stage??0)),w=l.filter(x=>{var f;return(((f=x.blockers)==null?void 0:f.length)??0)>0});return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-label-primary",children:"Onboarding Pipeline"}),t.jsxs("p",{className:"text-label-tertiary text-sm mt-1",children:[(c==null?void 0:c.total_prospects)??0," active prospects"]})]}),t.jsx("button",{onClick:()=>a(!0),className:"btn-primary",children:"+ New Prospect"})]}),t.jsx(Yv,{metrics:c,isLoading:o}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:`text-2xl font-bold ${((c==null?void 0:c.at_risk_count)??0)>0?"text-health-warning":"text-label-primary"}`,children:o?"-":(c==null?void 0:c.at_risk_count)??0}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"At Risk (>7 days)"})]}),t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:`text-2xl font-bold ${((c==null?void 0:c.stalled_count)??0)>0?"text-health-critical":"text-label-primary"}`,children:o?"-":(c==null?void 0:c.stalled_count)??0}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Stalled (>14 days)"})]}),t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:`text-2xl font-bold ${((c==null?void 0:c.connectivity_issues)??0)>0?"text-health-critical":"text-label-primary"}`,children:o?"-":(c==null?void 0:c.connectivity_issues)??0}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Connectivity Issues"})]}),t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-accent-primary",children:o?"-":p.length}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Recently Activated"})]})]}),w.length>0&&t.jsx(P,{className:"border-l-4 border-health-warning",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-health-warning/20 flex items-center justify-center flex-shrink-0",children:t.jsx("svg",{className:"w-4 h-4 text-health-warning",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold text-label-primary",children:[w.length," Prospect",w.length>1?"s":""," with Blockers"]}),t.jsx("p",{className:"text-sm text-label-secondary mt-1",children:w.map(x=>x.name).join(", ")})]})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-label-tertiary",children:"Show:"}),t.jsx("div",{className:"flex gap-1",children:[{value:"all",label:"All"},{value:1,label:"Phase 1"},{value:2,label:"Phase 2"}].map(x=>t.jsx("button",{onClick:()=>r(x.value),className:`px-3 py-1.5 text-sm rounded-ios-sm transition-colors ${s===x.value?"bg-accent-primary text-white":"bg-separator-light text-label-secondary hover:bg-separator-light/80"}`,children:x.label},x.value))}),t.jsxs("span",{className:"text-sm text-label-tertiary ml-4",children:[j.length," prospect",j.length!==1?"s":""]})]}),i?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(ke,{size:"lg"})}):j.length===0?t.jsxs(P,{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-accent-primary/10 flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),t.jsx("h3",{className:"font-semibold text-label-primary mb-2",children:"No prospects in pipeline"}),t.jsx("p",{className:"text-label-tertiary text-sm mb-4",children:'Click "New Prospect" to add your first client.'}),t.jsx("button",{onClick:()=>a(!0),className:"btn-primary",children:"+ New Prospect"})]}):t.jsx("div",{className:"space-y-4",children:j.map(x=>t.jsx(Kv,{client:x},x.id))}),p.length>0&&t.jsxs(P,{children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Recently Activated"}),t.jsx("div",{className:"space-y-2",children:p.slice(0,5).map(x=>t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-separator-light last:border-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-health-healthy/20 flex items-center justify-center",children:t.jsx("svg",{className:"w-4 h-4 text-health-healthy",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-label-primary",children:x.name}),t.jsx("p",{className:"text-xs text-label-tertiary",children:x.site_id&&`Site: ${x.site_id}`})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm font-medium text-health-healthy",children:"Active"}),t.jsx("p",{className:"text-xs text-label-tertiary",children:x.active_at?new Date(x.active_at).toLocaleDateString():"Recently"})]})]},x.id))})]}),t.jsx(Jv,{isOpen:n,onClose:()=>a(!1),onSubmit:u,isLoading:d.isPending})]})},ej=()=>{const{siteId:e}=Yt(),s=Ce(),{data:r,isLoading:n,error:a}=N0(e||null),{data:l=[]}=Hc({site_id:e,limit:10}),i=u=>u.charAt(0).toUpperCase()+u.slice(1),c=u=>u>=100?{text:"PASS",color:"text-health-healthy"}:u>=50?{text:"WARN",color:"text-health-warning"}:{text:"FAIL",color:"text-health-critical"},o=u=>{if(!u)return"Never";const h=new Date(u),g=new Date().getTime()-h.getTime(),p=Math.floor(g/6e4);return p<1?"Just now":p<60?`${p}m ago`:p<1440?`${Math.floor(p/60)}h ago`:h.toLocaleDateString()};if(n)return t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx(ke,{size:"lg"})});if(a||!r)return t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center",children:[t.jsx("div",{className:"w-16 h-16 mb-4 rounded-full bg-health-critical/10 flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-health-critical",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),t.jsx("h2",{className:"text-xl font-semibold text-label-primary mb-2",children:"Client Not Found"}),t.jsxs("p",{className:"text-label-tertiary mb-4",children:['Could not load data for "',e,'"']}),t.jsx("button",{onClick:()=>s("/"),className:"btn-primary",children:"Return to Dashboard"})]});const d=["patching","antivirus","backup","logging","firewall","encryption"];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>s("/"),className:"p-2 hover:bg-separator-light rounded-ios-sm transition-colors","aria-label":"Back to dashboard",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-label-primary",children:r.name}),t.jsxs("p",{className:"text-label-tertiary",children:[r.tier," Tier"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs(P,{className:"flex flex-col items-center justify-center py-8",children:[t.jsx(bl,{score:r.health.overall,size:"xl"}),t.jsx("p",{className:"mt-4 text-sm text-label-tertiary",children:"Overall Health"})]}),t.jsxs(P,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"font-semibold",children:"Connectivity"}),t.jsxs("span",{className:"text-lg font-bold text-accent-primary",children:[r.health.connectivity.score.toFixed(0),"%"]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[t.jsx("span",{className:"text-label-secondary",children:"Check-in Freshness"}),t.jsxs("span",{className:`font-medium ${c(r.health.connectivity.checkin_freshness).color}`,children:[r.health.connectivity.checkin_freshness,"%"]})]}),t.jsx("div",{className:"h-1.5 bg-separator-light rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-accent-primary rounded-full transition-all",style:{width:`${r.health.connectivity.checkin_freshness}%`}})})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[t.jsx("span",{className:"text-label-secondary",children:"Healing Success"}),t.jsxs("span",{className:`font-medium ${c(r.health.connectivity.healing_success_rate).color}`,children:[r.health.connectivity.healing_success_rate,"%"]})]}),t.jsx("div",{className:"h-1.5 bg-separator-light rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-accent-primary rounded-full transition-all",style:{width:`${r.health.connectivity.healing_success_rate}%`}})})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[t.jsx("span",{className:"text-label-secondary",children:"Order Execution"}),t.jsxs("span",{className:`font-medium ${c(r.health.connectivity.order_execution_rate).color}`,children:[r.health.connectivity.order_execution_rate,"%"]})]}),t.jsx("div",{className:"h-1.5 bg-separator-light rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-accent-primary rounded-full transition-all",style:{width:`${r.health.connectivity.order_execution_rate}%`}})})]})]})]}),t.jsxs(P,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"font-semibold",children:"Compliance"}),t.jsxs("span",{className:"text-lg font-bold text-accent-primary",children:[r.health.compliance.score.toFixed(0),"%"]})]}),t.jsx("div",{className:"space-y-2",children:d.map(u=>{const h=r.compliance_breakdown[u]??0,m=c(h*100);return t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-label-secondary",children:i(u)}),t.jsx("span",{className:`font-medium ${m.color}`,children:m.text})]},u)})})]})]}),t.jsxs(P,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-lg font-semibold",children:["Appliances (",r.appliances.length,")"]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-label-tertiary",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-health-healthy"}),r.appliances.filter(u=>u.is_online).length," online"]})]}),r.appliances.length===0?t.jsx("p",{className:"text-label-tertiary text-center py-8",children:"No appliances registered for this client."}):t.jsx("div",{className:"space-y-3",children:r.appliances.map(u=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-separator-light/50 rounded-ios-md",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${u.is_online?"bg-health-healthy":"bg-health-critical"}`}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-label-primary",children:u.hostname}),t.jsxs("p",{className:"text-xs text-label-tertiary",children:[u.ip_address||"No IP"," | v",u.agent_version||"?"]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-right text-xs text-label-tertiary",children:[t.jsx("p",{children:"Last check-in"}),t.jsx("p",{className:"font-medium text-label-secondary",children:o(u.last_checkin)})]}),u.health&&t.jsx(bl,{score:u.health.overall,size:"sm"})]})]},u.id))})]}),t.jsxs(P,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Recent Incidents"}),t.jsx("span",{className:"text-sm text-label-tertiary",children:"Last 10"})]}),l.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-health-healthy/10 flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-health-healthy",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),t.jsx("p",{className:"text-label-secondary font-medium",children:"No recent incidents"}),t.jsx("p",{className:"text-label-tertiary text-sm",children:"This client has been running smoothly."})]}):t.jsx("div",{className:"space-y-2",children:l.map(u=>t.jsx(Wc,{incident:u},u.id))})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-label-primary",children:r.appliances.length}),t.jsx("p",{className:"text-sm text-label-tertiary",children:"Total Appliances"})]}),t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-health-healthy",children:r.appliances.filter(u=>u.is_online).length}),t.jsx("p",{className:"text-sm text-label-tertiary",children:"Online"})]}),t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-label-primary",children:l.filter(u=>!u.resolved).length}),t.jsx("p",{className:"text-sm text-label-tertiary",children:"Open Incidents"})]}),t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-accent-primary",children:l.filter(u=>u.resolution_level==="L1").length}),t.jsx("p",{className:"text-sm text-label-tertiary",children:"L1 Resolved"})]})]})]})},Ix=v.createContext(void 0),Ea="/api",tj=({children:e})=>{const[s,r]=v.useState(null),[n,a]=v.useState(!0),[l,i]=v.useState([]),c=()=>localStorage.getItem("auth_token"),o=m=>{m?localStorage.setItem("auth_token",m):localStorage.removeItem("auth_token")};v.useEffect(()=>{(async()=>{const g=c();if(!g){a(!1);return}try{const p=await fetch(`${Ea}/auth/me`,{headers:{Authorization:`Bearer ${g}`}});if(p.ok){const j=await p.json();r({id:j.id,username:j.username,role:j.role,displayName:j.displayName})}else o(null),r(null)}catch(p){console.error("Session validation failed:",p)}finally{a(!1)}})()},[]);const d=async()=>{const m=c();if(m)try{const g=await fetch(`${Ea}/auth/audit-logs?limit=100`,{headers:{Authorization:`Bearer ${m}`}});if(g.ok){const p=await g.json();i(p.logs||[])}}catch(g){console.error("Failed to fetch audit logs:",g)}},u=async(m,g)=>{try{const j=await(await fetch(`${Ea}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m,password:g})})).json();return j.success&&j.token&&j.user?(o(j.token),r({id:j.user.id,username:j.user.username,role:j.user.role,displayName:j.user.displayName}),!0):!1}catch(p){return console.error("Login failed:",p),!1}},h=async()=>{const m=c();if(m)try{await fetch(`${Ea}/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${m}`}})}catch(g){console.error("Logout request failed:",g)}o(null),r(null),i([])};return t.jsx(Ix.Provider,{value:{user:s,isAuthenticated:!!s,isLoading:n,login:u,logout:h,auditLogs:l,refreshAuditLogs:d},children:e})},Ql=()=>{const e=v.useContext(Ix);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},sj=({onSuccess:e})=>{const{login:s}=Ql(),[r,n]=v.useState(""),[a,l]=v.useState(""),[i,c]=v.useState(""),[o,d]=v.useState(!1),u=async h=>{h.preventDefault(),c(""),d(!0);const m=await s(r,a);d(!1),m?e():c("Invalid username or password")};return t.jsx("div",{className:"min-h-screen bg-background-primary flex items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-md",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"w-16 h-16 bg-accent-primary rounded-ios-lg mx-auto flex items-center justify-center mb-4",children:t.jsx("span",{className:"text-white font-bold text-2xl",children:"M"})}),t.jsx("h1",{className:"text-2xl font-semibold text-label-primary",children:"Central Command"}),t.jsx("p",{className:"text-label-tertiary mt-1",children:"Sign in to continue"})]}),t.jsx("div",{className:"bg-white/80 backdrop-blur-xl rounded-ios-lg shadow-lg border border-white/50 p-8",children:t.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-ios-md",children:t.jsx("p",{className:"text-sm text-health-critical",children:i})}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-label-primary mb-2",children:"Username"}),t.jsx("input",{id:"username",type:"text",value:r,onChange:h=>n(h.target.value),required:!0,autoComplete:"username",className:"w-full px-4 py-3 bg-separator-light rounded-ios-md border-none outline-none focus:ring-2 focus:ring-accent-primary text-label-primary placeholder-label-tertiary",placeholder:"Enter username"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-label-primary mb-2",children:"Password"}),t.jsx("input",{id:"password",type:"password",value:a,onChange:h=>l(h.target.value),required:!0,autoComplete:"current-password",className:"w-full px-4 py-3 bg-separator-light rounded-ios-md border-none outline-none focus:ring-2 focus:ring-accent-primary text-label-primary placeholder-label-tertiary",placeholder:"Enter password"})]}),t.jsx("button",{type:"submit",disabled:o,className:"w-full py-3 bg-accent-primary text-white font-medium rounded-ios-md hover:bg-accent-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Signing in...":"Sign In"})]})}),t.jsx("p",{className:"text-xs text-label-tertiary text-center mt-8",children:"Malachor MSP Compliance Platform"})]})})},rj=e=>new Date(e).toLocaleString([],{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),nj=e=>{switch(e){case"LOGIN":case"LOGIN_SUCCESS":return"text-health-healthy bg-green-50";case"LOGOUT":return"text-label-secondary bg-gray-100";case"CREATE":case"UPDATE":return"text-ios-blue bg-blue-50";case"DELETE":case"LOGIN_FAILED":case"LOGIN_BLOCKED":return"text-health-critical bg-red-50";case"EXECUTE":return"text-ios-purple bg-purple-50";case"VIEW":return"text-label-tertiary bg-gray-50";default:return"text-label-secondary bg-gray-100"}},aj=()=>{const{auditLogs:e,user:s,refreshAuditLogs:r}=Ql(),[n,a]=v.useState("all"),[l,i]=v.useState("all"),[c,o]=v.useState("");v.useEffect(()=>{r()},[]);const d=Array.from(new Set(e.map(p=>p.action))),u=Array.from(new Set(e.map(p=>p.user))),h=e.filter(p=>{var f;const j=n==="all"||p.action===n,w=l==="all"||p.user===l,x=c===""||p.target.toLowerCase().includes(c.toLowerCase())||(((f=p.details)==null?void 0:f.toLowerCase().includes(c.toLowerCase()))??!1);return j&&w&&x}),m=e.filter(p=>{const j=new Date(p.timestamp),w=new Date;return j.toDateString()===w.toDateString()}).length,g=e.filter(p=>p.action==="LOGIN").length;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold",children:"Audit Logs"}),t.jsx("p",{className:"text-label-tertiary mt-1",children:"Track all user actions and system changes for accountability"})]}),(s==null?void 0:s.role)==="admin"&&t.jsxs("button",{onClick:()=>{if(confirm("Export audit logs to CSV?")){const p=[["Timestamp","User","Action","Target","Details"].join(","),...e.map(f=>[f.timestamp,f.user,f.action,`"${f.target}"`,`"${f.details||""}"`].join(","))].join(`
`),j=new Blob([p],{type:"text/csv"}),w=URL.createObjectURL(j),x=document.createElement("a");x.href=w,x.download=`audit-logs-${new Date().toISOString().split("T")[0]}.csv`,x.click()}},className:"btn-secondary flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export CSV"]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase tracking-wide",children:"Total Logs"}),t.jsx("p",{className:"text-2xl font-semibold mt-1",children:e.length})]}),t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase tracking-wide",children:"Today"}),t.jsx("p",{className:"text-2xl font-semibold mt-1",children:m})]}),t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase tracking-wide",children:"Login Events"}),t.jsx("p",{className:"text-2xl font-semibold text-health-healthy mt-1",children:g})]}),t.jsxs(P,{padding:"md",children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase tracking-wide",children:"Unique Users"}),t.jsx("p",{className:"text-2xl font-semibold mt-1",children:u.length})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-label-tertiary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Search logs...",value:c,onChange:p=>o(p.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/50 border border-separator-light rounded-ios-md text-sm focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-transparent"})]}),t.jsxs("select",{value:n,onChange:p=>a(p.target.value),className:"px-4 py-2 bg-white/50 border border-separator-light rounded-ios-md text-sm focus:outline-none focus:ring-2 focus:ring-accent-primary",children:[t.jsx("option",{value:"all",children:"All Actions"}),d.map(p=>t.jsx("option",{value:p,children:p},p))]}),t.jsxs("select",{value:l,onChange:p=>i(p.target.value),className:"px-4 py-2 bg-white/50 border border-separator-light rounded-ios-md text-sm focus:outline-none focus:ring-2 focus:ring-accent-primary",children:[t.jsx("option",{value:"all",children:"All Users"}),u.map(p=>t.jsx("option",{value:p,children:p},p))]})]}),t.jsx(P,{children:h.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("svg",{className:"w-12 h-12 text-label-tertiary mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),t.jsx("p",{className:"text-label-secondary",children:"No audit logs found"}),t.jsx("p",{className:"text-label-tertiary text-sm mt-1",children:e.length===0?"Actions will be logged here as you use the system":"Try adjusting your filters"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-light",children:[t.jsx("th",{className:"text-left text-xs font-semibold text-label-tertiary uppercase tracking-wide py-3 px-4",children:"Timestamp"}),t.jsx("th",{className:"text-left text-xs font-semibold text-label-tertiary uppercase tracking-wide py-3 px-4",children:"User"}),t.jsx("th",{className:"text-left text-xs font-semibold text-label-tertiary uppercase tracking-wide py-3 px-4",children:"Action"}),t.jsx("th",{className:"text-left text-xs font-semibold text-label-tertiary uppercase tracking-wide py-3 px-4",children:"Target"}),t.jsx("th",{className:"text-left text-xs font-semibold text-label-tertiary uppercase tracking-wide py-3 px-4",children:"Details"})]})}),t.jsx("tbody",{children:h.map(p=>t.jsxs("tr",{className:"border-b border-separator-light last:border-b-0 hover:bg-separator-light/50 transition-colors",children:[t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:"text-sm text-label-secondary font-mono",children:rj(p.timestamp)})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:"text-sm font-medium text-label-primary",children:p.user})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded ${nj(p.action)}`,children:p.action})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:"text-sm text-label-primary",children:p.target})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:"text-sm text-label-tertiary",children:p.details||"-"})})]},p.id))})]})})}),t.jsx(P,{padding:"sm",children:t.jsx("p",{className:"text-xs text-label-tertiary text-center",children:"Audit logs are stored server-side for HIPAA compliance. Export to CSV for external records."})})]})},lj=({status:e})=>{const s={online:{color:"bg-health-healthy",icon:"",label:"Online"},stale:{color:"bg-health-warning",icon:"",label:"Stale"},offline:{color:"bg-health-critical",icon:"",label:"Offline"},pending:{color:"bg-gray-400",icon:"",label:"Pending"}},r=s[e]||s.pending;return t.jsxs("span",{className:"inline-flex items-center gap-1.5 text-sm",children:[t.jsx("span",{children:r.icon}),t.jsx("span",{className:`font-medium ${e==="online"?"text-health-healthy":e==="stale"?"text-health-warning":e==="offline"?"text-health-critical":"text-label-tertiary"}`,children:r.label})]})};function ij(e){if(!e)return"Never";const s=new Date(e),n=new Date().getTime()-s.getTime(),a=Math.floor(n/6e4);if(a<1)return"Just now";if(a<60)return`${a} min ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}const oj=({site:e,onClick:s})=>t.jsxs("tr",{onClick:s,className:"hover:bg-fill-tertiary/50 cursor-pointer transition-colors",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-label-primary",children:e.clinic_name}),t.jsx("p",{className:"text-xs text-label-tertiary",children:e.site_id})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(lj,{status:e.live_status})}),t.jsx("td",{className:"px-4 py-3 text-sm text-label-secondary",children:ij(e.last_checkin)}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(Ue,{variant:e.onboarding_stage==="active"?"success":e.onboarding_stage==="connectivity"?"info":"default",children:e.onboarding_stage.replace("_"," ")})}),t.jsx("td",{className:"px-4 py-3 text-sm text-label-secondary",children:e.appliance_count}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(Ue,{variant:e.tier==="large"?"success":e.tier==="mid"?"info":"default",children:e.tier})})]}),cj=({isOpen:e,onClose:s,onSubmit:r,isLoading:n})=>{const[a,l]=v.useState(""),[i,c]=v.useState(""),[o,d]=v.useState(""),[u,h]=v.useState("mid");if(!e)return null;const m=g=>{g.preventDefault(),r({clinic_name:a,contact_name:i||void 0,contact_email:o||void 0,tier:u})};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(P,{className:"w-full max-w-md",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"New Site"}),t.jsxs("form",{onSubmit:m,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Clinic Name *"}),t.jsx("input",{type:"text",value:a,onChange:g=>l(g.target.value),className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light focus:border-accent-primary focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Contact Name"}),t.jsx("input",{type:"text",value:i,onChange:g=>c(g.target.value),className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light focus:border-accent-primary focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Contact Email"}),t.jsx("input",{type:"email",value:o,onChange:g=>d(g.target.value),className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light focus:border-accent-primary focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Tier"}),t.jsxs("select",{value:u,onChange:g=>h(g.target.value),className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light focus:border-accent-primary focus:outline-none",children:[t.jsx("option",{value:"small",children:"Small (1-5 providers)"}),t.jsx("option",{value:"mid",children:"Mid (6-15 providers)"}),t.jsx("option",{value:"large",children:"Large (15-50 providers)"})]})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 rounded-ios bg-fill-secondary text-label-primary hover:bg-fill-tertiary transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:!a||n,className:"flex-1 px-4 py-2 rounded-ios bg-accent-primary text-white hover:bg-accent-primary/90 transition-colors disabled:opacity-50",children:n?"Creating...":"Create Site"})]})]})]})})},dj=()=>{const e=Ce(),[s,r]=v.useState(!1),[n,a]=v.useState(void 0),{data:l,isLoading:i}=Lx(n),c=Ax(),o=(l==null?void 0:l.sites)||[],d={all:o.length,online:o.filter(h=>h.live_status==="online").length,offline:o.filter(h=>h.live_status==="offline").length,pending:o.filter(h=>h.live_status==="pending").length},u=async h=>{try{const m=await c.mutateAsync(h);r(!1),e(`/sites/${m.site_id}`)}catch(m){console.error("Failed to create site:",m)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-label-primary",children:"Sites"}),t.jsxs("p",{className:"text-label-tertiary text-sm mt-1",children:[o.length," client site",o.length!==1?"s":""]})]}),t.jsx("button",{onClick:()=>r(!0),className:"btn-primary",children:"+ New Site"})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-health-healthy",children:d.online}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Online"})]}),t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:`text-2xl font-bold ${d.offline>0?"text-health-critical":"text-label-primary"}`,children:d.offline}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Offline"})]}),t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:`text-2xl font-bold ${d.pending>0?"text-health-warning":"text-label-primary"}`,children:d.pending}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Pending"})]}),t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-accent-primary",children:d.all}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Total"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-label-tertiary",children:"Filter:"}),t.jsx("div",{className:"flex gap-1",children:[{value:void 0,label:"All"},{value:"online",label:"Online"},{value:"offline",label:"Offline"},{value:"pending",label:"Pending"}].map(h=>t.jsx("button",{onClick:()=>a(h.value),className:`px-3 py-1.5 text-sm rounded-ios-sm transition-colors ${n===h.value?"bg-accent-primary text-white":"bg-separator-light text-label-secondary hover:bg-separator-light/80"}`,children:h.label},h.value||"all"))})]}),t.jsx(P,{padding:"none",children:i?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(ke,{size:"lg"})}):o.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-accent-primary/10 flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),t.jsx("h3",{className:"font-semibold text-label-primary mb-2",children:"No sites yet"}),t.jsx("p",{className:"text-label-tertiary text-sm mb-4",children:'Click "New Site" to add your first client.'}),t.jsx("button",{onClick:()=>r(!0),className:"btn-primary",children:"+ New Site"})]}):t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-fill-secondary border-b border-separator-light",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-label-secondary uppercase tracking-wider",children:"Site"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-label-secondary uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-label-secondary uppercase tracking-wider",children:"Last Checkin"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-label-secondary uppercase tracking-wider",children:"Stage"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-label-secondary uppercase tracking-wider",children:"Appliances"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-label-secondary uppercase tracking-wider",children:"Tier"})]})}),t.jsx("tbody",{className:"divide-y divide-separator-light",children:o.map(h=>t.jsx(oj,{site:h,onClick:()=>e(`/sites/${h.site_id}`)},h.site_id))})]})}),t.jsx(cj,{isOpen:s,onClose:()=>r(!1),onSubmit:u,isLoading:c.isPending})]})};function uj(e){if(!e)return"Never";const s=new Date(e),n=new Date().getTime()-s.getTime(),a=Math.floor(n/6e4);if(a<1)return"Just now";if(a<60)return`${a} min ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}function hj(e){if(!e)return"Unknown";const s=Math.floor(e/86400),r=Math.floor(e%86400/3600),n=Math.floor(e%3600/60);return s>0?`${s}d ${r}h`:r>0?`${r}h ${n}m`:`${n}m`}const mr="1.0.18",ku="https://api.osiriscare.net/agent-packages",mj=({appliance:e,onCreateOrder:s,onDelete:r,isLoading:n})=>{const[a,l]=v.useState(!1),[i,c]=v.useState(!1),o=e.agent_version&&e.agent_version!==mr,d={online:"bg-health-healthy",stale:"bg-health-warning",offline:"bg-health-critical",pending:"bg-gray-400"},u=[{label:"View Logs",icon:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),onClick:()=>s(e.appliance_id,"view_logs")},{label:"Restart Agent",icon:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),onClick:()=>s(e.appliance_id,"restart_agent")},{label:"Update Agent",icon:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),onClick:()=>c(!0)},{label:"Delete Appliance",icon:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),onClick:()=>l(!0),danger:!0}];return t.jsxs(P,{className:"p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${d[e.live_status]}`}),t.jsx("h3",{className:"font-semibold text-label-primary",children:e.hostname||e.appliance_id})]}),t.jsx(Ue,{variant:e.live_status==="online"?"success":"default",children:e.live_status})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-label-tertiary",children:"MAC Address"}),t.jsx("p",{className:"text-label-secondary font-mono",children:e.mac_address||"-"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-label-tertiary",children:"IP Addresses"}),t.jsx("p",{className:"text-label-secondary font-mono",children:e.ip_addresses.length>0?e.ip_addresses.join(", "):"-"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-label-tertiary",children:"Agent Version"}),t.jsx("p",{className:"text-label-secondary",children:e.agent_version||"-"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-label-tertiary",children:"NixOS Version"}),t.jsx("p",{className:"text-label-secondary",children:e.nixos_version||"-"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-label-tertiary",children:"Last Checkin"}),t.jsx("p",{className:"text-label-secondary",children:uj(e.last_checkin)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-label-tertiary",children:"Uptime"}),t.jsx("p",{className:"text-label-secondary",children:hj(e.uptime_seconds)})]})]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-separator-light flex items-center justify-between",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>s(e.appliance_id,"force_checkin"),disabled:n,className:"px-3 py-1.5 text-xs rounded-ios bg-accent-primary/10 text-accent-primary hover:bg-accent-primary/20 disabled:opacity-50 transition-colors",children:"Force Checkin"}),t.jsx("button",{onClick:()=>s(e.appliance_id,"run_drift"),disabled:n,className:"px-3 py-1.5 text-xs rounded-ios bg-fill-secondary text-label-primary hover:bg-fill-tertiary disabled:opacity-50 transition-colors",children:"Run Drift"}),t.jsx("button",{onClick:()=>s(e.appliance_id,"sync_rules"),disabled:n,className:"px-3 py-1.5 text-xs rounded-ios bg-fill-secondary text-label-primary hover:bg-fill-tertiary disabled:opacity-50 transition-colors",children:"Sync Rules"}),o&&t.jsxs("button",{onClick:()=>c(!0),disabled:n,className:"px-3 py-1.5 text-xs rounded-ios bg-gradient-to-r from-blue-600 to-purple-500 hover:from-blue-700 hover:to-purple-600 text-white font-medium disabled:opacity-50 transition-all shadow-sm animate-pulse",children:["Push Update (",e.agent_version,"  ",mr,")"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[e.live_status==="offline"&&t.jsx("button",{onClick:()=>l(!0),disabled:n,className:"px-3 py-1.5 text-xs rounded-ios bg-gradient-to-r from-red-600 to-orange-500 hover:from-red-700 hover:to-orange-600 text-white font-medium disabled:opacity-50 transition-all shadow-sm",children:" Delete Stale"}),t.jsx(bv,{actions:u,label:"",disabled:n})]})]}),a&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(P,{className:"w-full max-w-sm",children:[t.jsx("h2",{className:"text-lg font-semibold text-label-primary mb-2",children:"Delete Appliance?"}),t.jsxs("p",{className:"text-label-secondary text-sm mb-4",children:["Are you sure you want to delete ",t.jsx("strong",{children:e.hostname||e.appliance_id}),"? This will remove it from the site and cancel any pending orders."]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-4 py-2 rounded-ios bg-fill-secondary text-label-primary",children:"Cancel"}),t.jsx("button",{onClick:()=>{r(e.appliance_id),l(!1)},className:"flex-1 px-4 py-2 rounded-ios bg-gradient-to-r from-red-600 to-orange-500 hover:from-red-700 hover:to-orange-600 text-white font-semibold shadow-md transition-all",children:"Delete Forever"})]})]})}),i&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(P,{className:"w-full max-w-md",children:[t.jsx("h2",{className:"text-lg font-semibold text-label-primary mb-2",children:"Push Agent Update"}),t.jsxs("p",{className:"text-label-secondary text-sm mb-4",children:["Update ",t.jsx("strong",{children:e.hostname||e.appliance_id})," from version"," ",t.jsx("code",{className:"bg-fill-secondary px-1 rounded",children:e.agent_version||"unknown"})," to"," ",t.jsx("code",{className:"bg-fill-secondary px-1 rounded",children:mr})]}),t.jsxs("div",{className:"bg-fill-secondary rounded-ios p-3 mb-4 text-sm",children:[t.jsx("p",{className:"text-label-tertiary mb-1",children:"Package URL:"}),t.jsxs("p",{className:"text-label-primary font-mono text-xs break-all",children:[ku,"/compliance_agent-",mr,".tar.gz"]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-4 py-2 rounded-ios bg-fill-secondary text-label-primary",children:"Cancel"}),t.jsx("button",{onClick:()=>{s(e.appliance_id,"update_agent",{package_url:`${ku}/compliance_agent-${mr}.tar.gz`,version:mr}),c(!1)},disabled:n,className:"flex-1 px-4 py-2 rounded-ios bg-gradient-to-r from-blue-600 to-purple-500 hover:from-blue-700 hover:to-purple-600 text-white font-semibold shadow-md transition-all disabled:opacity-50",children:"Push Update"})]})]})})]})},xj=({timestamps:e,stage:s})=>{const r=[{key:"lead_at",label:"Lead",icon:""},{key:"discovery_at",label:"Discovery",icon:""},{key:"proposal_at",label:"Proposal",icon:""},{key:"contract_at",label:"Contract",icon:""},{key:"intake_at",label:"Intake",icon:""},{key:"creds_at",label:"Credentials",icon:""},{key:"shipped_at",label:"Shipped",icon:""},{key:"received_at",label:"Received",icon:""},{key:"connectivity_at",label:"Connected",icon:""},{key:"scanning_at",label:"Scanning",icon:""},{key:"baseline_at",label:"Baseline",icon:""},{key:"active_at",label:"Active",icon:""}];return t.jsx("div",{className:"space-y-2",children:r.map(n=>{const a=e[n.key]!==null,l=s===n.key.replace("_at","");return t.jsxs("div",{className:`flex items-center gap-3 py-2 px-3 rounded-ios transition-colors ${l?"bg-accent-primary/10":a?"bg-fill-secondary":""}`,children:[t.jsx("span",{className:"text-lg",children:a?"":n.icon}),t.jsx("span",{className:`flex-1 ${a?"text-label-primary":"text-label-tertiary"}`,children:n.label}),e[n.key]&&t.jsx("span",{className:"text-xs text-label-tertiary",children:new Date(e[n.key]).toLocaleDateString()})]},n.key)})})},pj=({isOpen:e,onClose:s,onSubmit:r,isLoading:n})=>{const[a,l]=v.useState("router"),[i,c]=v.useState(""),[o,d]=v.useState(""),[u,h]=v.useState(""),[m,g]=v.useState("");if(!e)return null;const p=j=>{j.preventDefault(),r({credential_type:a,credential_name:i,username:o||void 0,password:u||void 0,host:m||void 0}),c(""),d(""),h(""),g("")};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(P,{className:"w-full max-w-md",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add Credential"}),t.jsxs("form",{onSubmit:p,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Type"}),t.jsxs("select",{value:a,onChange:j=>l(j.target.value),className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light",children:[t.jsx("option",{value:"router",children:"Router"}),t.jsx("option",{value:"active_directory",children:"Active Directory"}),t.jsx("option",{value:"ehr",children:"EHR System"}),t.jsx("option",{value:"backup",children:"Backup Service"}),t.jsx("option",{value:"other",children:"Other"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Name *"}),t.jsx("input",{type:"text",value:i,onChange:j=>c(j.target.value),placeholder:"e.g., Main Router, Domain Admin",className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Host/IP"}),t.jsx("input",{type:"text",value:m,onChange:j=>g(j.target.value),placeholder:"192.168.1.1",className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Username"}),t.jsx("input",{type:"text",value:o,onChange:j=>d(j.target.value),className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Password"}),t.jsx("input",{type:"password",value:u,onChange:j=>h(j.target.value),className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light"})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 rounded-ios bg-fill-secondary text-label-primary",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:!i||n,className:"flex-1 px-4 py-2 rounded-ios bg-accent-primary text-white disabled:opacity-50",children:n?"Adding...":"Add Credential"})]})]})]})})},fj=({applianceCount:e,onBroadcast:s,onClearStale:r,isLoading:n})=>{const[a,l]=v.useState(!1);return e===0?null:t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("span",{className:"text-label-tertiary text-sm mr-2",children:"Site Actions:"}),t.jsx("button",{onClick:()=>s("force_checkin"),disabled:n,className:"px-3 py-1.5 text-xs rounded-ios bg-accent-primary text-white hover:bg-accent-primary/90 disabled:opacity-50 transition-colors",children:"Force All Checkin"}),t.jsx("button",{onClick:()=>s("sync_rules"),disabled:n,className:"px-3 py-1.5 text-xs rounded-ios bg-fill-secondary text-label-primary hover:bg-fill-tertiary disabled:opacity-50 transition-colors",children:"Sync All Rules"}),t.jsx("button",{onClick:()=>l(!0),disabled:n,className:"px-3 py-1.5 text-xs rounded-ios bg-health-warning/10 text-health-warning hover:bg-health-warning/20 disabled:opacity-50 transition-colors",children:"Clear Stale"})]}),a&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(P,{className:"w-full max-w-sm",children:[t.jsx("h2",{className:"text-lg font-semibold text-label-primary mb-2",children:"Clear Stale Appliances?"}),t.jsx("p",{className:"text-label-secondary text-sm mb-4",children:"This will remove all appliances that haven't checked in for more than 24 hours. This action cannot be undone."}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-4 py-2 rounded-ios bg-fill-secondary text-label-primary",children:"Cancel"}),t.jsx("button",{onClick:()=>{r(),l(!1)},className:"flex-1 px-4 py-2 rounded-ios bg-health-warning text-white",children:"Clear Stale"})]})]})})]})},gj=()=>{const{siteId:e}=Yt(),s=Ce(),[r,n]=v.useState(!1),[a,l]=v.useState(null),[i,c]=v.useState(!1),[o,d]=v.useState(null),[u,h]=v.useState(!1),{data:m,isLoading:g,error:p}=T0(e||null),j=I0(),w=O0(),x=D0(),f=F0(),y=z0(),N=w.isPending||x.isPending||f.isPending||y.isPending,k=(F,E)=>{l({message:F,type:E}),setTimeout(()=>l(null),3e3)},S=async()=>{if(e){h(!0);try{const F=await fetch(`/api/portal/sites/${e}/generate-token`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!F.ok)throw new Error("Failed to generate portal link");const E=await F.json();d({url:E.portal_url,token:E.token}),c(!0)}catch(F){k(`Failed to generate portal link: ${F}`,"error")}finally{h(!1)}}},C=async(F,E,U)=>{if(e)try{await w.mutateAsync({siteId:e,applianceId:F,orderType:E,parameters:U}),k(`Order "${E}" sent to appliance`,"success")}catch(te){k(`Failed to create order: ${te}`,"error")}},_=async F=>{if(e)try{const E=await x.mutateAsync({siteId:e,orderType:F});k(`Order "${F}" broadcast to ${E.length} appliances`,"success")}catch(E){k(`Failed to broadcast order: ${E}`,"error")}},R=async F=>{if(e)try{await f.mutateAsync({siteId:e,applianceId:F}),k("Appliance deleted","success")}catch(E){k(`Failed to delete appliance: ${E}`,"error")}},L=async()=>{if(e)try{const F=await y.mutateAsync({siteId:e,staleHours:24});k(`Cleared ${F.deleted_count} stale appliances`,"success")}catch(F){k(`Failed to clear stale appliances: ${F}`,"error")}};if(g)return t.jsx("div",{className:"flex items-center justify-center py-24",children:t.jsx(ke,{size:"lg"})});if(p||!m)return t.jsxs(P,{className:"text-center py-12",children:[t.jsx("h2",{className:"text-xl font-semibold text-label-primary mb-2",children:"Site Not Found"}),t.jsxs("p",{className:"text-label-tertiary mb-4",children:['The site "',e,'" could not be found.']}),t.jsx("button",{onClick:()=>s("/sites"),className:"btn-primary",children:"Back to Sites"})]});const D=async F=>{try{await j.mutateAsync({siteId:m.site_id,data:F}),n(!1)}catch(E){console.error("Failed to add credential:",E)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>s("/sites"),className:"p-2 rounded-ios hover:bg-fill-secondary transition-colors",children:t.jsx("svg",{className:"w-5 h-5 text-label-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-2xl font-semibold text-label-primary",children:m.clinic_name}),t.jsx("p",{className:"text-label-tertiary text-sm",children:m.site_id})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:S,disabled:u,className:"px-3 py-1.5 text-sm bg-accent-primary hover:bg-accent-primary/90 text-white rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),u?"Generating...":"Generate Portal Link"]}),t.jsxs(Re,{to:`/sites/${e}/frameworks`,className:"px-3 py-1.5 text-sm bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Frameworks"]}),t.jsx(Ue,{variant:m.live_status==="online"?"success":m.live_status==="offline"?"error":"default",children:m.live_status})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs(P,{children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Contact Information"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"Contact Name"}),t.jsx("p",{className:"text-label-primary",children:m.contact_name||"-"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"Email"}),t.jsx("p",{className:"text-label-primary",children:m.contact_email||"-"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"Phone"}),t.jsx("p",{className:"text-label-primary",children:m.contact_phone||"-"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"Tier"}),t.jsx(Ue,{variant:m.tier==="large"?"success":m.tier==="mid"?"info":"default",children:m.tier})]}),m.address&&t.jsxs("div",{className:"col-span-2",children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"Address"}),t.jsx("p",{className:"text-label-primary",children:m.address})]})]})]}),t.jsxs(P,{children:[t.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["Appliances (",m.appliances.length,")"]}),t.jsx(fj,{applianceCount:m.appliances.length,onBroadcast:_,onClearStale:L,isLoading:N}),m.appliances.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-label-tertiary",children:"No appliances connected yet."}),t.jsx("p",{className:"text-label-tertiary text-sm mt-1",children:"The appliance will appear here when it phones home."})]}):t.jsx("div",{className:"space-y-4",children:m.appliances.map(F=>t.jsx(mj,{appliance:F,onCreateOrder:C,onDelete:R,isLoading:N},F.appliance_id))})]}),t.jsxs(P,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-lg font-semibold",children:["Credentials (",m.credentials.length,")"]}),t.jsx("button",{onClick:()=>n(!0),className:"text-sm text-accent-primary hover:text-accent-primary/80",children:"+ Add Credential"})]}),m.credentials.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-label-tertiary",children:"No credentials stored."}),t.jsx("p",{className:"text-label-tertiary text-sm mt-1",children:"Add router, AD, or other credentials for the appliance."})]}):t.jsx("div",{className:"space-y-2",children:m.credentials.map(F=>t.jsxs("div",{className:"flex items-center justify-between py-3 px-4 bg-fill-secondary rounded-ios",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-label-primary",children:F.credential_name}),t.jsx("p",{className:"text-xs text-label-tertiary",children:F.credential_type})]}),t.jsx(Ue,{variant:"default",children:"Stored"})]},F.id))})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs(P,{children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Onboarding Progress"}),t.jsx(xj,{timestamps:m.timestamps,stage:m.onboarding_stage})]}),m.notes&&t.jsxs(P,{children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Notes"}),t.jsx("p",{className:"text-label-secondary text-sm",children:m.notes})]}),m.blockers.length>0&&t.jsxs(P,{className:"border-l-4 border-health-warning",children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Blockers"}),t.jsx("ul",{className:"space-y-2",children:m.blockers.map((F,E)=>t.jsxs("li",{className:"text-sm text-label-secondary flex items-start gap-2",children:[t.jsx("span",{className:"text-health-warning",children:"!"}),F]},E))})]}),m.tracking_number&&t.jsxs(P,{children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Shipping"}),t.jsx("p",{className:"text-label-tertiary text-sm",children:"Carrier"}),t.jsx("p",{className:"text-label-primary",children:m.tracking_carrier||"Unknown"}),t.jsx("p",{className:"text-label-tertiary text-sm mt-2",children:"Tracking Number"}),t.jsx("p",{className:"text-label-primary font-mono text-sm",children:m.tracking_number})]})]})]}),t.jsx(pj,{isOpen:r,onClose:()=>n(!1),onSubmit:D,isLoading:j.isPending}),i&&o&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(P,{className:"w-full max-w-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-label-primary",children:"Client Portal Link"}),t.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-fill-secondary rounded-ios transition-colors",children:t.jsx("svg",{className:"w-5 h-5 text-label-tertiary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("p",{className:"text-label-secondary text-sm mb-4",children:"Share this link with your client to give them access to their compliance dashboard. The link does not expire."}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-tertiary mb-1",children:"Portal URL"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:o.url,readOnly:!0,className:"flex-1 px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light font-mono text-sm"}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(o.url),k("Portal URL copied to clipboard","success")},className:"px-4 py-2 rounded-ios bg-accent-primary text-white hover:bg-accent-primary/90 transition-colors",children:"Copy"})]})]}),t.jsx("div",{className:"pt-2 border-t border-separator-light",children:t.jsxs("p",{className:"text-xs text-label-tertiary",children:[t.jsx("strong",{children:"Security note:"})," This link provides read-only access to compliance reports and evidence. Generate a new link if you need to revoke access."]})})]}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 rounded-ios bg-fill-secondary text-label-primary hover:bg-fill-tertiary transition-colors",children:"Done"})})]})}),a&&t.jsx("div",{className:`fixed bottom-4 right-4 px-4 py-3 rounded-ios shadow-lg z-50 ${a.type==="success"?"bg-health-healthy text-white":"bg-health-critical text-white"}`,children:a.message})]})},Ni={overview:{title:"Platform Overview",icon:"",items:[{id:"what-is",title:"What is OsirisCare?",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{children:"OsirisCare is a HIPAA compliance automation platform designed for healthcare SMBs. It combines NixOS-based infrastructure, Model Context Protocol (MCP) orchestration, and LLM-powered remediation to deliver automated compliance monitoring and self-healing."}),t.jsx("h4",{className:"font-semibold mt-4",children:"Key Features"}),t.jsxs("ul",{className:"list-disc list-inside space-y-2 text-label-secondary",children:[t.jsx("li",{children:"Automated HIPAA compliance monitoring (8 core controls)"}),t.jsx("li",{children:"Three-tier auto-healing (L1 deterministic, L2 LLM, L3 human)"}),t.jsx("li",{children:"Immutable audit trail with cryptographic evidence"}),t.jsx("li",{children:"Client portal with magic-link access"}),t.jsx("li",{children:"Real-time drift detection and remediation"})]}),t.jsx("h4",{className:"font-semibold mt-4",children:"Architecture"}),t.jsxs("ul",{className:"list-disc list-inside space-y-2 text-label-secondary",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Central Command:"})," This dashboard - fleet management and monitoring"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"MCP Server:"})," API backend handling check-ins, orders, and evidence"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Compliance Appliance:"})," NixOS device at client site running checks"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Client Portal:"})," Read-only compliance dashboard for clients"]})]})]})},{id:"pricing",title:"Pricing Tiers",content:t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h4",{className:"font-semibold text-accent-primary",children:"Small"}),t.jsx("p",{className:"text-2xl font-bold mt-2",children:"$200/mo"}),t.jsx("p",{className:"text-sm text-label-tertiary",children:"1-5 providers"}),t.jsxs("ul",{className:"mt-3 text-sm space-y-1 text-label-secondary",children:[t.jsx("li",{children:"1 compliance appliance"}),t.jsx("li",{children:"8 core controls"}),t.jsx("li",{children:"Monthly compliance packet"}),t.jsx("li",{children:"Email support"})]})]}),t.jsxs("div",{className:"p-4 bg-accent-primary/10 rounded-ios border border-accent-primary",children:[t.jsx("h4",{className:"font-semibold text-accent-primary",children:"Mid (Popular)"}),t.jsx("p",{className:"text-2xl font-bold mt-2",children:"$500/mo"}),t.jsx("p",{className:"text-sm text-label-tertiary",children:"6-15 providers"}),t.jsxs("ul",{className:"mt-3 text-sm space-y-1 text-label-secondary",children:[t.jsx("li",{children:"Up to 3 appliances"}),t.jsx("li",{children:"8 core controls + custom"}),t.jsx("li",{children:"Weekly compliance reports"}),t.jsx("li",{children:"Priority support"})]})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h4",{className:"font-semibold text-accent-primary",children:"Large"}),t.jsx("p",{className:"text-2xl font-bold mt-2",children:"$1,500-3,000/mo"}),t.jsx("p",{className:"text-sm text-label-tertiary",children:"15-50 providers"}),t.jsxs("ul",{className:"mt-3 text-sm space-y-1 text-label-secondary",children:[t.jsx("li",{children:"Unlimited appliances"}),t.jsx("li",{children:"Full control customization"}),t.jsx("li",{children:"Daily reports + alerts"}),t.jsx("li",{children:"Dedicated support"})]})]})]})})}]},operations:{title:"Operations & SOPs",icon:"",items:[{id:"daily-ops",title:"Daily Operations Checklist",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-label-secondary",children:"Complete these tasks each business day to maintain fleet health and catch issues early."}),t.jsx("h4",{className:"font-semibold",children:"Morning Check (9:00 AM)"}),t.jsx("div",{className:"p-4 bg-fill-secondary rounded-ios",children:t.jsx("ul",{className:"space-y-2",children:["Review Central Command dashboard for offline appliances","Check for any L3 escalations requiring human intervention","Verify overnight backup jobs completed successfully","Review any new incidents from overnight auto-healing","Check email for client-reported issues"].map((e,s)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsxs("span",{className:"text-accent-primary font-mono text-sm",children:[s+1,"."]}),t.jsx("span",{className:"text-label-secondary text-sm",children:e})]},s))})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Afternoon Check (3:00 PM)"}),t.jsx("div",{className:"p-4 bg-fill-secondary rounded-ios",children:t.jsx("ul",{className:"space-y-2",children:["Review compliance scores - investigate any drops below 90%","Check patch status for critical vulnerabilities","Follow up on any pending client requests","Review pipeline stages - move clients through stages","Document any notable incidents in session log"].map((e,s)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsxs("span",{className:"text-accent-primary font-mono text-sm",children:[s+1,"."]}),t.jsx("span",{className:"text-label-secondary text-sm",children:e})]},s))})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Weekly Tasks (Fridays)"}),t.jsx("div",{className:"p-4 bg-fill-secondary rounded-ios",children:t.jsx("ul",{className:"space-y-2",children:["Generate weekly compliance reports for all active sites","Review L1 rule effectiveness - promote any new patterns","Check for appliance firmware/NixOS updates","Backup Central Command database","Review and close resolved incidents","Update client portal links if needed"].map((e,s)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsxs("span",{className:"text-accent-primary font-mono text-sm",children:[s+1,"."]}),t.jsx("span",{className:"text-label-secondary text-sm",children:e})]},s))})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Monthly Tasks (1st of Month)"}),t.jsx("div",{className:"p-4 bg-fill-secondary rounded-ios",children:t.jsx("ul",{className:"space-y-2",children:["Generate monthly compliance packets for all clients","Review and update baseline configurations","Audit privileged access across all sites","Test backup restore procedures (random site selection)","Review billing and ensure all active sites invoiced","Update documentation with any process changes"].map((e,s)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsxs("span",{className:"text-accent-primary font-mono text-sm",children:[s+1,"."]}),t.jsx("span",{className:"text-label-secondary text-sm",children:e})]},s))})})]})},{id:"new-clinic-sop",title:"SOP: Onboard New Clinic",content:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-accent-primary/10 border-l-4 border-accent-primary rounded-r-ios",children:[t.jsx("p",{className:"text-sm font-medium",children:"End-to-end procedure for onboarding a new clinic from signed contract to active monitoring."}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Estimated time: 2-3 hours hands-on over 5-7 days"})]}),t.jsx("h4",{className:"font-semibold",children:"Phase 1: Pre-Deployment (Day 1-2)"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-light",children:[t.jsx("th",{className:"text-left py-2 px-3 w-12",children:"#"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Task"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Details"})]})}),t.jsxs("tbody",{className:"text-label-secondary",children:[t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"1"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Collect signed documents"}),t.jsx("td",{className:"py-2 px-3",children:"MSA + BAA must be signed. Store in client folder."})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"2"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Create site in Central Command"}),t.jsxs("td",{className:"py-2 px-3",children:["Sites  Add Site. Use format: ",t.jsx("code",{className:"bg-fill-tertiary px-1 rounded",children:"clinic-name-XXXX"})]})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"3"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Generate API credentials"}),t.jsx("td",{className:"py-2 px-3",children:"Site Settings  Generate API Key. Save securely."})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"4"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Gather network info"}),t.jsx("td",{className:"py-2 px-3",children:"IP range, DHCP/static, firewall rules, existing IT contact."})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"5"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Provision appliance config"}),t.jsx("td",{className:"py-2 px-3",children:'Run generate-config.py with site ID. See "SOP: Image Appliance".'})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"6"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Flash and test appliance"}),t.jsx("td",{className:"py-2 px-3",children:"Write image to USB, boot in lab, verify check-in."})]})]})]})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Phase 2: Shipping (Day 2-3)"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-light",children:[t.jsx("th",{className:"text-left py-2 px-3 w-12",children:"#"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Task"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Details"})]})}),t.jsxs("tbody",{className:"text-label-secondary",children:[t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"7"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Package appliance"}),t.jsx("td",{className:"py-2 px-3",children:"Include: appliance, power cable, Ethernet cable, quick start card."})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"8"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Ship with tracking"}),t.jsx("td",{className:"py-2 px-3",children:'Use insured shipping. Update pipeline stage to "Shipped".'})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"9"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Send tracking + instructions"}),t.jsx("td",{className:"py-2 px-3",children:"Email client with tracking number and installation PDF."})]})]})]})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Phase 3: Activation (Day 4-7)"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-light",children:[t.jsx("th",{className:"text-left py-2 px-3 w-12",children:"#"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Task"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Details"})]})}),t.jsxs("tbody",{className:"text-label-secondary",children:[t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"10"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Confirm delivery"}),t.jsx("td",{className:"py-2 px-3",children:'Call/email client when delivered. Update to "Received".'})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"11"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Schedule install call"}),t.jsx("td",{className:"py-2 px-3",children:"15-30 min call while client plugs in appliance."})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"12"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Verify connectivity"}),t.jsx("td",{className:"py-2 px-3",children:'Watch Central Command for check-in. Update to "Connectivity".'})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"13"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Monitor initial scan"}),t.jsx("td",{className:"py-2 px-3",children:'Wait for network discovery to complete. Update to "Scanning".'})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"14"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Establish baseline"}),t.jsx("td",{className:"py-2 px-3",children:'Review discovered assets, set baseline. Update to "Baseline".'})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"15"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Achieve compliance"}),t.jsx("td",{className:"py-2 px-3",children:'Fix any failing controls. Target 8/8 passing. Update to "Compliant".'})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"16"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Generate portal link"}),t.jsx("td",{className:"py-2 px-3",children:"Create magic link, send to client with orientation doc."})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"17"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Orientation call"}),t.jsx("td",{className:"py-2 px-3",children:'Walk client through portal. Answer questions. Mark "Active".'})]})]})]})})]})},{id:"image-appliance-sop",title:"SOP: Image Appliance",content:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-accent-primary/10 border-l-4 border-accent-primary rounded-r-ios",children:[t.jsx("p",{className:"text-sm font-medium",children:"Build and flash a compliance appliance for deployment."}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Requires: Linux workstation, USB drive (8GB+), target hardware"})]}),t.jsx("h4",{className:"font-semibold",children:"Prerequisites"}),t.jsxs("ul",{className:"list-disc list-inside space-y-2 text-label-secondary text-sm",children:[t.jsx("li",{children:"Site created in Central Command with API key"}),t.jsx("li",{children:"Nix installed on build machine"}),t.jsx("li",{children:"Target hardware: HP T640 or equivalent (4GB+ RAM)"}),t.jsx("li",{children:"USB drive 8GB+ (will be erased)"})]}),t.jsx("h4",{className:"font-semibold mt-6",children:"Step 1: Generate Site Configuration"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`cd /path/to/Msp_Flakes

# Generate config for the site
python iso/provisioning/generate-config.py \\
  --site-id "clinic-smith-abc123" \\
  --site-name "Smith Family Practice" \\
  --timezone "America/New_York"

# Output:
# ./appliance-config/clinic-smith-abc123/
#  config.yaml        # Main configuration
#  certs/             # mTLS certificates
#     client.crt
#     client.key
#     ca.crt
#  registration.yaml  # For Central Command`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Step 2: Register Site in Central Command"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# Copy the API key from registration.yaml
cat appliance-config/clinic-smith-abc123/registration.yaml

# Add to Central Command via API or UI
curl -X POST https://api.osiriscare.net/api/sites \\
  -H "Authorization: Bearer $ADMIN_TOKEN" \\
  -H "Content-Type: application/json" \\
  -d '{
    "site_id": "clinic-smith-abc123",
    "site_name": "Smith Family Practice",
    "api_key": "sk-site-..."
  }'`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Step 3: Build the ISO"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# Build the appliance ISO (requires Linux or remote builder)
nix build -f flake-compliance.nix appliance-iso -o result-iso

# ISO will be at:
ls -lh result-iso/iso/osiriscare-appliance.iso
# -r--r--r-- 1 user user 850M Dec 31 12:00 osiriscare-appliance.iso`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Step 4: Flash to USB"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# Find USB device (CAREFUL - this erases the drive!)
lsblk
# Example: /dev/sdc

# Write ISO to USB
sudo dd if=result-iso/iso/osiriscare-appliance.iso \\
  of=/dev/sdX \\
  bs=4M \\
  status=progress \\
  conv=fsync

# Verify
sync`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Step 5: Copy Configuration to USB"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# Mount the USB config partition
sudo mkdir -p /mnt/usb
sudo mount /dev/sdX2 /mnt/usb

# Copy site configuration
sudo mkdir -p /mnt/usb/msp
sudo cp appliance-config/clinic-smith-abc123/config.yaml /mnt/usb/msp/
sudo cp -r appliance-config/clinic-smith-abc123/certs /mnt/usb/msp/

# Unmount
sudo umount /mnt/usb`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Step 6: Test in Lab"}),t.jsx("div",{className:"p-4 bg-fill-secondary rounded-ios",children:t.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-label-secondary text-sm",children:[t.jsx("li",{children:"Boot target hardware from USB"}),t.jsx("li",{children:"Wait for NixOS to boot (2-3 minutes)"}),t.jsx("li",{children:"Verify network connectivity via status page (port 80)"}),t.jsx("li",{children:"Check Central Command for check-in within 5 minutes"}),t.jsx("li",{children:"Verify all 8 controls reporting (may show warnings initially)"}),t.jsx("li",{children:"Label appliance with site ID"})]})}),t.jsxs("div",{className:"p-4 bg-health-warning/10 border-l-4 border-health-warning rounded-r-ios mt-4",children:[t.jsx("h4",{className:"font-semibold text-health-warning",children:"Troubleshooting"}),t.jsxs("ul",{className:"mt-2 text-sm text-label-secondary space-y-1",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"No boot:"})," Check BIOS boot order, ensure UEFI mode"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"No network:"})," Verify Ethernet cable, check DHCP"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"No check-in:"})," Verify config.yaml API key matches Central Command"]})]})]})]})},{id:"provision-site-sop",title:"SOP: Provision Site Credentials",content:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-accent-primary/10 border-l-4 border-accent-primary rounded-r-ios",children:[t.jsx("p",{className:"text-sm font-medium",children:"Generate all credentials needed for a new site deployment."}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Run before imaging appliance"})]}),t.jsx("h4",{className:"font-semibold",children:"What Gets Generated"}),t.jsxs("ul",{className:"list-disc list-inside space-y-2 text-label-secondary text-sm",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Site ID:"})," Unique identifier (format: clinic-name-XXXX)"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"API Key:"})," For appliance authentication to Central Command"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Portal Token:"})," Magic link token for client dashboard"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"mTLS Certificates:"})," Client cert for mutual TLS"]})]}),t.jsx("h4",{className:"font-semibold mt-6",children:"Via Central Command UI"}),t.jsx("div",{className:"p-4 bg-fill-secondary rounded-ios",children:t.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-label-secondary text-sm",children:[t.jsxs("li",{children:["Navigate to ",t.jsx("strong",{children:"Sites  Add Site"})]}),t.jsx("li",{children:'Enter site name (e.g., "Smith Family Practice")'}),t.jsx("li",{children:"Select pricing tier"}),t.jsxs("li",{children:["Click ",t.jsx("strong",{children:"Create Site"})]}),t.jsx("li",{children:"Copy the generated Site ID and API Key"}),t.jsx("li",{children:"Download the configuration bundle (.zip)"})]})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Via Command Line"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# Run the provisioning script
python iso/provisioning/generate-config.py \\
  --site-id "clinic-smith-abc123" \\
  --site-name "Smith Family Practice" \\
  --timezone "America/New_York" \\
  --output-dir ./appliance-config

# Output structure:
./appliance-config/clinic-smith-abc123/
 config.yaml           # Appliance config
 certs/
    client.crt        # mTLS client cert
    client.key        # mTLS private key (SECURE!)
    ca.crt            # CA certificate
 registration.yaml     # Central Command registration

# View generated credentials
cat registration.yaml
# site_id: clinic-smith-abc123
# api_key: sk-site-xxxxxxxx
# portal_token: YBnJGHrJS5151NC...
# portal_url: https://portal.osiriscare.net/...`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Register in Central Command"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# Add site via API
curl -X POST https://api.osiriscare.net/api/sites \\
  -H "Authorization: Bearer $ADMIN_TOKEN" \\
  -H "Content-Type: application/json" \\
  -d @registration.yaml

# Or manually add in UI:
# 1. Sites  Add Site
# 2. Enter site_id and api_key from registration.yaml
# 3. Save`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Security Notes"}),t.jsx("div",{className:"p-4 bg-health-critical/10 border-l-4 border-health-critical rounded-r-ios",children:t.jsxs("ul",{className:"text-sm text-label-secondary space-y-1",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"client.key"})," - Never share or commit to git"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"api_key"})," - Rotate if compromised"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"portal_token"})," - Can be regenerated if needed"]}),t.jsx("li",{children:"Store config bundles encrypted when not in use"})]})})]})},{id:"replace-appliance-sop",title:"SOP: Replace Failed Appliance",content:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-accent-primary/10 border-l-4 border-accent-primary rounded-r-ios",children:[t.jsx("p",{className:"text-sm font-medium",children:"Replace a failed or damaged appliance at an existing site."}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Preserves site credentials and compliance history"})]}),t.jsx("h4",{className:"font-semibold",children:"When to Replace"}),t.jsxs("ul",{className:"list-disc list-inside space-y-2 text-label-secondary text-sm",children:[t.jsx("li",{children:"Hardware failure (won't boot, storage failure)"}),t.jsx("li",{children:"Appliance damaged in shipping/handling"}),t.jsx("li",{children:"Upgrade to newer hardware model"}),t.jsx("li",{children:"Security incident requiring device wipe"})]}),t.jsx("h4",{className:"font-semibold mt-6",children:"Procedure"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-light",children:[t.jsx("th",{className:"text-left py-2 px-3 w-12",children:"#"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Task"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Notes"})]})}),t.jsxs("tbody",{className:"text-label-secondary",children:[t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"1"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Retrieve existing config"}),t.jsx("td",{className:"py-2 px-3",children:"Download from Central Command or use backup"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"2"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Flash new appliance"}),t.jsx("td",{className:"py-2 px-3",children:"Same ISO, same config.yaml and certs"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"3"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Test in lab"}),t.jsx("td",{className:"py-2 px-3",children:"Verify check-in with existing site ID"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"4"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Ship replacement"}),t.jsx("td",{className:"py-2 px-3",children:"Include return label for failed unit"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"5"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Coordinate swap"}),t.jsx("td",{className:"py-2 px-3",children:"Client unplugs old, plugs in new"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"6"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Verify connectivity"}),t.jsx("td",{className:"py-2 px-3",children:"Confirm check-ins resume in Central Command"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"7"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Dispose old unit"}),t.jsx("td",{className:"py-2 px-3",children:"Wipe storage, recycle hardware per policy"})]})]})]})}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios mt-4",children:[t.jsx("h4",{className:"font-semibold text-sm",children:"Key Point"}),t.jsx("p",{className:"text-sm text-label-secondary mt-1",children:"The site ID and API key remain unchanged. The new appliance simply continues where the old one left off. Compliance history is preserved in Central Command."})]})]})},{id:"offboard-clinic-sop",title:"SOP: Offboard Clinic",content:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-health-warning/10 border-l-4 border-health-warning rounded-r-ios",children:[t.jsx("p",{className:"text-sm font-medium",children:"Properly terminate service and preserve records for compliance."}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"HIPAA requires retention of records for 6 years"})]}),t.jsx("h4",{className:"font-semibold",children:"Pre-Offboarding"}),t.jsx("ul",{className:"space-y-2",children:["Confirm cancellation request in writing","Verify final invoice is paid","Schedule offboarding date with client","Export final compliance report"].map((e,s)=>t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",className:"rounded"}),t.jsx("span",{className:"text-label-secondary text-sm",children:e})]},s))}),t.jsx("h4",{className:"font-semibold mt-6",children:"Offboarding Tasks"}),t.jsx("ul",{className:"space-y-2",children:["Generate final compliance packet (PDF)","Export all evidence bundles to archive","Revoke API key in Central Command","Invalidate portal magic link",'Mark site as "Churned" in pipeline',"Archive site data (do not delete - 6 year retention)","Request appliance return (prepaid label)"].map((e,s)=>t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",className:"rounded"}),t.jsx("span",{className:"text-label-secondary text-sm",children:e})]},s))}),t.jsx("h4",{className:"font-semibold mt-6",children:"Post-Offboarding"}),t.jsx("ul",{className:"space-y-2",children:["Wipe returned appliance","Update inventory records","Document reason for churn","Schedule 90-day follow-up (win-back opportunity)"].map((e,s)=>t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",className:"rounded"}),t.jsx("span",{className:"text-label-secondary text-sm",children:e})]},s))}),t.jsx("h4",{className:"font-semibold mt-6",children:"Archive Commands"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# Export site data before archiving
curl https://api.osiriscare.net/api/sites/{site_id}/export \\
  -H "Authorization: Bearer $ADMIN_TOKEN" \\
  -o clinic-smith-export.tar.gz

# Archive contains:
# - All evidence bundles
# - Compliance history
# - Incident logs
# - Configuration snapshots

# Mark site as churned (preserves data, stops billing)
curl -X PATCH https://api.osiriscare.net/api/sites/{site_id} \\
  -H "Authorization: Bearer $ADMIN_TOKEN" \\
  -d '{"status": "churned", "churn_date": "2025-01-01"}'`})})]})},{id:"auto-provision-sop",title:"SOP: Zero-Touch Appliance Provisioning",content:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-accent-primary/10 border-l-4 border-accent-primary rounded-r-ios",children:[t.jsx("p",{className:"text-sm font-medium",children:"Configure appliances to auto-provision on first boot with zero manual config."}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"New in v9 - Eliminates manual SSH config at client sites"})]}),t.jsx("h4",{className:"font-semibold",children:"Two Provisioning Methods"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h5",{className:"font-semibold text-accent-primary",children:"Option 1: USB Config File"}),t.jsx("p",{className:"text-xs text-label-secondary mt-1",children:"Place config.yaml on USB drive. Appliance reads it on boot."}),t.jsx("p",{className:"text-xs text-label-tertiary mt-2",children:"Best for: Pre-configured shipments"})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h5",{className:"font-semibold text-accent-primary",children:"Option 4: MAC-Based Lookup"}),t.jsx("p",{className:"text-xs text-label-secondary mt-1",children:"Register MAC address in Central Command. Appliance fetches config via API."}),t.jsx("p",{className:"text-xs text-label-tertiary mt-2",children:"Best for: Pre-registered hardware"})]})]}),t.jsx("h4",{className:"font-semibold mt-6",children:"Method 1: USB Configuration"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# 1. Generate config for the site
python iso/provisioning/generate-config.py \\
  --site-id "clinic-smith-abc123" \\
  --site-name "Smith Family Practice"

# 2. Copy config to USB drive root
# The appliance checks these locations on boot:
#   /config.yaml
#   /msp/config.yaml
#   /osiriscare/config.yaml
#   /MSP/config.yaml

cp appliance-config/clinic-smith-abc123/config.yaml /Volumes/USB/config.yaml

# 3. Insert USB into appliance before first boot
# Config is copied to /var/lib/msp/config.yaml automatically`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Method 4: MAC-Based Provisioning"}),t.jsx("div",{className:"p-4 bg-fill-secondary rounded-ios mb-4",children:t.jsxs("p",{className:"text-sm text-label-secondary",children:[t.jsx("strong",{children:"Workflow:"})," Record the appliance MAC address  Register in Central Command  Ship appliance  Client plugs in  Appliance auto-fetches config"]})}),t.jsx("h5",{className:"font-semibold",children:"Step 1: Get MAC Address"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# From appliance boot screen or label on hardware
# Example: 84:3A:5B:91:B6:61

# Or via SSH if already booted:
ip link show | grep -A1 "state UP" | grep ether`})}),t.jsx("h5",{className:"font-semibold mt-4",children:"Step 2: Register MAC in Central Command"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# Register MAC  Site mapping via API
curl -X POST https://api.osiriscare.net/api/provision \\
  -H "Content-Type: application/json" \\
  -d '{
    "mac_address": "84:3A:5B:91:B6:61",
    "site_id": "clinic-smith-abc123",
    "api_key": "YOUR_SITE_API_KEY",
    "notes": "HP T640 for Smith Family Practice"
  }'

# Response:
{
  "status": "registered",
  "mac_address": "84:3A:5B:91:B6:61",
  "site_id": "clinic-smith-abc123",
  "message": "Appliance will auto-provision on first boot"
}`})}),t.jsx("h5",{className:"font-semibold mt-4",children:"Step 3: Verify Registration"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# Test that MAC returns config (URL-encode the colons)
curl https://api.osiriscare.net/api/provision/84%3A3A%3A5B%3A91%3AB6%3A61

# Response:
{
  "site_id": "clinic-smith-abc123",
  "site_name": "Smith Family Practice",
  "api_endpoint": "https://api.osiriscare.net",
  "api_key": "q5VihYAYhKMH-vtX-DXuzLrjqbhgM61S5KjgPM4UG4A"
}`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Boot Sequence"}),t.jsx("div",{className:"p-4 bg-fill-secondary rounded-ios",children:t.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-label-secondary text-sm",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Check for existing config"})," - Skip if /var/lib/msp/config.yaml exists"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Scan USB drives"})," - Look for config.yaml in standard locations"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"MAC lookup"})," - If no USB config, fetch from Central Command API"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Write config"})," - Save to /var/lib/msp/config.yaml"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Start agent"})," - Compliance agent begins phoning home"]})]})}),t.jsx("h4",{className:"font-semibold mt-6",children:"API Reference"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-light",children:[t.jsx("th",{className:"text-left py-2 px-3",children:"Endpoint"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Method"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Description"})]})}),t.jsxs("tbody",{className:"text-label-secondary",children:[t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono text-xs",children:"/api/provision/<mac>"}),t.jsx("td",{className:"py-2 px-3",children:"GET"}),t.jsx("td",{className:"py-2 px-3",children:"Get config for MAC address (used by appliance)"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono text-xs",children:"/api/provision"}),t.jsx("td",{className:"py-2 px-3",children:"POST"}),t.jsx("td",{className:"py-2 px-3",children:"Register MAC  Site mapping"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-2 px-3 font-mono text-xs",children:"/api/provision/<mac>"}),t.jsx("td",{className:"py-2 px-3",children:"DELETE"}),t.jsx("td",{className:"py-2 px-3",children:"Remove MAC registration"})]})]})]})}),t.jsxs("div",{className:"p-4 bg-health-warning/10 border-l-4 border-health-warning rounded-r-ios mt-4",children:[t.jsx("h4",{className:"font-semibold text-health-warning",children:"Troubleshooting"}),t.jsxs("ul",{className:"mt-2 text-sm text-label-secondary space-y-1",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"No auto-provision:"})," Check provision.log at /var/lib/msp/provision.log"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"USB not detected:"})," Ensure FAT32/ext4 format, try different USB port"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"MAC not found:"})," Verify MAC format (colons, uppercase), check registration"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Network timeout:"})," Ensure outbound HTTPS to api.osiriscare.net"]})]})]})]})},{id:"partner-qr-provision-sop",title:"SOP: Partner QR Code Provisioning",content:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-accent-primary/10 border-l-4 border-accent-primary rounded-r-ios",children:[t.jsx("p",{className:"text-sm font-medium",children:"Enable partners to onboard appliances using QR codes."}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"New in Partner Infrastructure - Datto-style white-label distribution"})]}),t.jsx("h4",{className:"font-semibold",children:"Partner Provisioning Flow"}),t.jsx("div",{className:"p-4 bg-fill-secondary rounded-ios",children:t.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-label-secondary text-sm",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Partner logs into dashboard"})," - /partner/login with API key"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Partner creates provision code"})," - Enters target client name"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"QR code generated"})," - Contains claim URL with 16-char code"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Partner ships appliance"})," - Includes QR code printout or sticker"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Client powers on appliance"})," - Enters provisioning mode (no config)"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Technician scans QR"})," - Or manually enters 16-character code"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Appliance calls /api/partners/claim"})," - With code + MAC address"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Server creates site"})," - Under partner's umbrella"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Appliance receives config"})," - site_id, API key, partner branding"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Normal operation begins"})," - Phone-home every 60 seconds"]})]})}),t.jsx("h4",{className:"font-semibold mt-6",children:"For Partners: Creating Provision Codes"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# 1. Log into Partner Dashboard
https://dashboard.osiriscare.net/partner/login

# Enter your API key (provided by OsirisCare)

# 2. Navigate to "Provision Codes" tab

# 3. Click "New Provision Code"
#    - Enter target client name (e.g., "Smith Family Practice")
#    - Code expires in 30 days by default

# 4. Click "QR" button to display the QR code
#    - Print or screenshot for technician
#    - Code displayed: XXXX-XXXX-XXXX-XXXX (16 chars)`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"For Partners: Via API"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# Create provision code via API
curl -X POST https://api.osiriscare.net/api/partners/me/provisions \\
  -H "X-API-Key: YOUR_PARTNER_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "target_client_name": "Smith Family Practice",
    "expires_days": 30
  }'

# Response:
{
  "id": "abc123...",
  "provision_code": "ABCD1234EFGH5678",
  "qr_content": "https://api.osiriscare.net/api/partners/claim?code=ABCD1234EFGH5678",
  "status": "pending",
  "expires_at": "2026-02-04T00:00:00Z"
}`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"For Technicians: Provisioning an Appliance"}),t.jsx("div",{className:"p-4 bg-fill-secondary rounded-ios",children:t.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-label-secondary text-sm",children:[t.jsx("li",{children:"Power on the appliance (no prior config)"}),t.jsx("li",{children:"Wait for NixOS to boot (2-3 minutes)"}),t.jsx("li",{children:"Provisioning screen appears automatically"}),t.jsxs("li",{children:["Either:",t.jsxs("ul",{className:"ml-6 mt-1 list-disc list-inside",children:[t.jsx("li",{children:"Scan the QR code with a phone/tablet"}),t.jsx("li",{children:"Or enter the 16-character code manually"})]})]}),t.jsx("li",{children:'Appliance shows "Provisioning..." then "Complete!"'}),t.jsx("li",{children:"Agent starts automatically, begins checking in"})]})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Appliance CLI Provisioning"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# If appliance boots without config.yaml, it enters provisioning mode:

============================================================
  OsirisCare Appliance Provisioning
============================================================

MAC Address: 84:3A:5B:91:B6:61
Hostname:    osiriscare-appliance

Enter your provision code (from partner dashboard):
Format: XXXXXXXXXXXXXXXX (16 characters)

Provision Code: ABCD1234EFGH5678

Provisioning...

============================================================
  Provisioning Complete!
============================================================

Site ID:     partner-clinic-abc123
Partner:     NEPA IT Solutions
Config:      /var/lib/msp/config.yaml

The agent will now restart in normal operation mode.`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Revenue Model"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h5",{className:"font-semibold text-accent-primary",children:"Default Split"}),t.jsx("p",{className:"text-2xl font-bold mt-2",children:"40% / 60%"}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Partner gets 40%, OsirisCare 60%"})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h5",{className:"font-semibold text-accent-primary",children:"Custom Arrangements"}),t.jsx("p",{className:"text-sm text-label-secondary mt-2",children:"Revenue share can be customized per partner (10-60% range). Contact OsirisCare sales for volume pricing."})]})]}),t.jsx("h4",{className:"font-semibold mt-6",children:"API Reference"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-light",children:[t.jsx("th",{className:"text-left py-2 px-3",children:"Endpoint"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Method"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Auth"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Description"})]})}),t.jsxs("tbody",{className:"text-label-secondary",children:[t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono text-xs",children:"/api/partners/me"}),t.jsx("td",{className:"py-2 px-3",children:"GET"}),t.jsx("td",{className:"py-2 px-3",children:"X-API-Key"}),t.jsx("td",{className:"py-2 px-3",children:"Get partner info and stats"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono text-xs",children:"/api/partners/me/provisions"}),t.jsx("td",{className:"py-2 px-3",children:"GET"}),t.jsx("td",{className:"py-2 px-3",children:"X-API-Key"}),t.jsx("td",{className:"py-2 px-3",children:"List provision codes"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono text-xs",children:"/api/partners/me/provisions"}),t.jsx("td",{className:"py-2 px-3",children:"POST"}),t.jsx("td",{className:"py-2 px-3",children:"X-API-Key"}),t.jsx("td",{className:"py-2 px-3",children:"Create provision code"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono text-xs",children:"/api/partners/me/sites"}),t.jsx("td",{className:"py-2 px-3",children:"GET"}),t.jsx("td",{className:"py-2 px-3",children:"X-API-Key"}),t.jsx("td",{className:"py-2 px-3",children:"List partner's sites"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-2 px-3 font-mono text-xs",children:"/api/partners/claim"}),t.jsx("td",{className:"py-2 px-3",children:"POST"}),t.jsx("td",{className:"py-2 px-3",children:"Public"}),t.jsx("td",{className:"py-2 px-3",children:"Claim code (appliance calls)"})]})]})]})}),t.jsxs("div",{className:"p-4 bg-health-warning/10 border-l-4 border-health-warning rounded-r-ios mt-4",children:[t.jsx("h4",{className:"font-semibold text-health-warning",children:"Troubleshooting"}),t.jsxs("ul",{className:"mt-2 text-sm text-label-secondary space-y-1",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Code not found:"})," Verify code is 16 characters, case-insensitive"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Code expired:"})," Create a new provision code in partner dashboard"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Code already claimed:"})," Each code can only be used once"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Network error:"})," Ensure appliance has internet access to api.osiriscare.net"]})]})]})]})},{id:"incident-response-sop",title:"SOP: L3 Incident Response",content:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-health-critical/10 border-l-4 border-health-critical rounded-r-ios",children:[t.jsx("p",{className:"text-sm font-medium",children:"Handle incidents that auto-healing cannot resolve."}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Target response: 4 hours during business hours"})]}),t.jsx("h4",{className:"font-semibold",children:"When L3 Escalation Occurs"}),t.jsxs("ul",{className:"list-disc list-inside space-y-2 text-label-secondary text-sm",children:[t.jsx("li",{children:"L1 deterministic rules don't match"}),t.jsx("li",{children:"L2 LLM planner cannot generate safe remediation"}),t.jsx("li",{children:"Action requires human judgment or approval"}),t.jsx("li",{children:"Client has custom exception or policy"})]}),t.jsx("h4",{className:"font-semibold mt-6",children:"Response Procedure"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-light",children:[t.jsx("th",{className:"text-left py-2 px-3 w-12",children:"#"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Task"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Time"})]})}),t.jsxs("tbody",{className:"text-label-secondary",children:[t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"1"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Acknowledge incident in Central Command"}),t.jsx("td",{className:"py-2 px-3",children:"15 min"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"2"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Review incident details and evidence"}),t.jsx("td",{className:"py-2 px-3",children:"15 min"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"3"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Assess severity and impact"}),t.jsx("td",{className:"py-2 px-3",children:"10 min"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"4"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Develop remediation plan"}),t.jsx("td",{className:"py-2 px-3",children:"30 min"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"5"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Execute remediation (maintenance window if disruptive)"}),t.jsx("td",{className:"py-2 px-3",children:"Varies"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"6"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Verify fix and document"}),t.jsx("td",{className:"py-2 px-3",children:"15 min"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"7"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Create L1 rule if pattern is repeatable"}),t.jsx("td",{className:"py-2 px-3",children:"30 min"})]})]})]})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Severity Levels"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"p-4 bg-health-critical/10 rounded-ios",children:[t.jsx("h5",{className:"font-semibold text-health-critical",children:"Critical"}),t.jsx("p",{className:"text-xs text-label-secondary mt-1",children:"Active breach, data exposure, complete outage"}),t.jsx("p",{className:"text-xs text-label-tertiary mt-2",children:"Response: Immediate"})]}),t.jsxs("div",{className:"p-4 bg-health-warning/10 rounded-ios",children:[t.jsx("h5",{className:"font-semibold text-health-warning",children:"High"}),t.jsx("p",{className:"text-xs text-label-secondary mt-1",children:"Control failure, compliance gap, partial outage"}),t.jsx("p",{className:"text-xs text-label-tertiary mt-2",children:"Response: 4 hours"})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h5",{className:"font-semibold",children:"Medium/Low"}),t.jsx("p",{className:"text-xs text-label-secondary mt-1",children:"Warning conditions, optimization opportunities"}),t.jsx("p",{className:"text-xs text-label-tertiary mt-2",children:"Response: 24 hours"})]})]}),t.jsx("h4",{className:"font-semibold mt-6",children:"Promote to L1 Rule"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# After successful manual remediation, create L1 rule
# in mcp-server/runbooks/

# Example: RB-DISK-002.yaml
id: RB-DISK-002
name: Clear temp files when disk > 90%
trigger:
  control: storage_posture
  condition: disk_usage > 90
actions:
  - type: shell
    command: "find /tmp -mtime +7 -delete"
  - type: shell
    command: "journalctl --vacuum-time=7d"
outcome: success
evidence:
  - disk_usage_before
  - disk_usage_after`})})]})},{id:"backup-sop",title:"SOP: Central Command Backup & Restore",content:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-accent-primary/10 border-l-4 border-accent-primary rounded-r-ios",children:[t.jsx("p",{className:"text-sm font-medium",children:"Automated encrypted backups to Hetzner Storage Box via Restic."}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Hourly backups  24 hourly, 7 daily, 4 weekly, 6 monthly retention"})]}),t.jsx("h4",{className:"font-semibold",children:"What's Backed Up"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h5",{className:"font-semibold text-accent-primary",children:"PostgreSQL"}),t.jsx("p",{className:"text-xs text-label-secondary mt-1",children:"Sites, appliances, incidents, evidence, portal tokens"})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h5",{className:"font-semibold text-accent-primary",children:"MinIO"}),t.jsx("p",{className:"text-xs text-label-secondary mt-1",children:"Evidence bundles, compliance reports, audit logs"})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h5",{className:"font-semibold text-accent-primary",children:"Configs"}),t.jsx("p",{className:"text-xs text-label-secondary mt-1",children:"Docker configs, environment files, SSL certs"})]})]}),t.jsx("h4",{className:"font-semibold mt-6",children:"Check Backup Status"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# API endpoint for dashboard
curl https://api.osiriscare.net/api/backup/status

# List available snapshots
curl https://api.osiriscare.net/api/backup/snapshots

# Manual status check on VPS
ssh root@178.156.162.116 "cat /opt/backups/status/latest.json"

# View systemd timer status
ssh root@178.156.162.116 "systemctl list-timers | grep osiris"`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Manual Backup"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# Run backup manually (e.g., before major changes)
ssh root@178.156.162.116 "/opt/backups/scripts/backup.sh"

# Check backup size and stats
ssh root@178.156.162.116 "RESTIC_REPOSITORY='sftp:storagebox:/backups' \\
  RESTIC_PASSWORD_FILE=/root/.restic-password \\
  restic -o 'sftp.command=ssh storagebox -s sftp' stats"`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Disaster Recovery Procedure"}),t.jsxs("div",{className:"p-4 bg-health-critical/10 border-l-4 border-health-critical rounded-r-ios mb-4",children:[t.jsx("p",{className:"text-sm font-medium",children:"Only use this procedure for full disaster recovery."}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Will stop services and restore from backup snapshot"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-light",children:[t.jsx("th",{className:"text-left py-2 px-3 w-12",children:"#"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Step"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Command / Action"})]})}),t.jsxs("tbody",{className:"text-label-secondary",children:[t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"1"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"SSH to VPS"}),t.jsx("td",{className:"py-2 px-3",children:t.jsx("code",{className:"text-xs",children:"ssh root@178.156.162.116"})})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"2"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"List snapshots"}),t.jsx("td",{className:"py-2 px-3",children:t.jsx("code",{className:"text-xs",children:"/opt/backups/scripts/restore.sh --list"})})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"3"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Run restore"}),t.jsx("td",{className:"py-2 px-3",children:t.jsx("code",{className:"text-xs",children:"/opt/backups/scripts/restore.sh --snapshot SNAPSHOT_ID"})})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"4"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Verify services"}),t.jsx("td",{className:"py-2 px-3",children:t.jsx("code",{className:"text-xs",children:"docker compose ps && curl localhost:8000/health"})})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-2 px-3 font-mono",children:"5"}),t.jsx("td",{className:"py-2 px-3 font-medium",children:"Test dashboard"}),t.jsx("td",{className:"py-2 px-3",children:"Login to Central Command, verify data"})]})]})]})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Backup Credentials (Secure Storage)"}),t.jsx("div",{className:"p-4 bg-health-warning/10 border-l-4 border-health-warning rounded-r-ios",children:t.jsxs("p",{className:"text-sm text-label-secondary",children:[t.jsx("strong",{children:"Storage Box:"})," u526501.your-storagebox.de:23",t.jsx("br",{}),t.jsx("strong",{children:"Restic Password File:"})," /root/.restic-password",t.jsx("br",{}),t.jsx("strong",{children:"SSH Key:"})," /root/.ssh/storagebox_backup",t.jsx("br",{}),t.jsx("strong",{children:"Retention:"})," 24 hourly, 7 daily, 4 weekly, 6 monthly",t.jsx("br",{}),t.jsx("strong",{children:"Location:"})," Hetzner FSN1 (Falkenstein, Germany)"]})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Hetzner Cloud Snapshots"}),t.jsxs("div",{className:"p-4 bg-accent-primary/10 border-l-4 border-accent-primary rounded-r-ios mb-4",children:[t.jsx("p",{className:"text-sm font-medium",children:"Full server disk images for bare-metal recovery."}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Weekly snapshots complement Restic backups for complete disaster recovery."})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[t.jsxs("div",{className:"p-3 bg-fill-secondary rounded-ios text-center",children:[t.jsx("div",{className:"text-accent-primary font-bold",children:"Weekly"}),t.jsx("div",{className:"text-xs text-label-tertiary",children:"Frequency"})]}),t.jsxs("div",{className:"p-3 bg-fill-secondary rounded-ios text-center",children:[t.jsx("div",{className:"text-accent-primary font-bold",children:"4"}),t.jsx("div",{className:"text-xs text-label-tertiary",children:"Retention"})]}),t.jsxs("div",{className:"p-3 bg-fill-secondary rounded-ios text-center",children:[t.jsx("div",{className:"text-accent-primary font-bold",children:"~75 GB"}),t.jsx("div",{className:"text-xs text-label-tertiary",children:"Per Snapshot"})]}),t.jsxs("div",{className:"p-3 bg-fill-secondary rounded-ios text-center",children:[t.jsx("div",{className:"text-accent-primary font-bold",children:"~$4/mo"}),t.jsx("div",{className:"text-xs text-label-tertiary",children:"Est. Cost"})]})]}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# Check snapshot status
curl https://api.osiriscare.net/api/snapshot/status

# Manual snapshot
ssh root@178.156.162.116 "/opt/backups/scripts/hetzner-snapshot.sh"

# List snapshots via hcloud
ssh root@178.156.162.116 "export HCLOUD_TOKEN=\\$(cat /root/.hcloud-token) && hcloud image list --type snapshot"

# Restore from snapshot (Hetzner Console)
# Servers  mcp-osiriscare-net  Rebuild  Select snapshot`})}),t.jsx("div",{className:"p-4 bg-fill-secondary rounded-ios mt-4",children:t.jsxs("p",{className:"text-sm text-label-secondary",children:[t.jsx("strong",{children:"Schedule:"})," Sundays 04:00 UTC (after Restic integrity check)",t.jsx("br",{}),t.jsx("strong",{children:"Token:"})," /root/.hcloud-token (600 permissions)",t.jsx("br",{}),t.jsx("strong",{children:"Script:"})," /opt/backups/scripts/hetzner-snapshot.sh"]})})]})},{id:"disaster-recovery-sop",title:"SOP: Disaster Recovery Runbook",content:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-health-critical/10 border-l-4 border-health-critical rounded-r-ios",children:[t.jsx("p",{className:"text-sm font-medium",children:"Complete VPS recovery procedure for Central Command."}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Target RTO: 30 minutes | RPO: 1 hour (Restic) or 1 week (Snapshot)"})]}),t.jsx("h4",{className:"font-semibold",children:"Phase 1: Assess (2 min)"}),t.jsx("div",{className:"p-4 bg-fill-secondary rounded-ios",children:t.jsxs("ul",{className:"space-y-2 text-sm text-label-secondary",children:[t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-accent-primary",children:"1."}),t.jsxs("span",{children:["Check if VPS is responding: ",t.jsx("code",{className:"bg-gray-900 px-1 rounded",children:"ssh root@178.156.162.116"})]})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-accent-primary",children:"2."}),t.jsxs("span",{children:["Check Hetzner status: ",t.jsx("a",{href:"https://status.hetzner.com",className:"text-accent-primary underline",children:"status.hetzner.com"})]})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-accent-primary",children:"3."}),t.jsx("span",{children:"Determine: Network issue? Server crash? Data corruption?"})]})]})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Phase 2: Decide Recovery Path"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h5",{className:"font-semibold text-accent-primary",children:"Option A: Restic Restore"}),t.jsx("p",{className:"text-xs text-label-secondary mt-1",children:"Server alive, data corrupted"}),t.jsx("p",{className:"text-xs text-label-tertiary mt-2",children:"RPO: ~1 hour | Time: 10-15 min"})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h5",{className:"font-semibold text-accent-primary",children:"Option B: Snapshot Rebuild"}),t.jsx("p",{className:"text-xs text-label-secondary mt-1",children:"Server dead, need new instance"}),t.jsx("p",{className:"text-xs text-label-tertiary mt-2",children:"RPO: ~1 week | Time: 15-20 min"})]})]}),t.jsx("h4",{className:"font-semibold mt-6",children:"Option A: Restic Restore (Server Alive)"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# SSH to the server
ssh root@178.156.162.116

# List available snapshots
/opt/backups/scripts/restore.sh --list

# Run interactive restore
/opt/backups/scripts/restore.sh

# Or specify snapshot ID directly
/opt/backups/scripts/restore.sh latest

# Verify services
docker compose ps
curl http://localhost:8000/health`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Option B: Hetzner Snapshot Rebuild (Server Dead)"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# Step 1: Create new server from snapshot
# Hetzner Console  Servers  Create Server
# - Location: ash-dc1 (or any available)
# - Type: CPX31 (or better)
# - Image: Snapshots  osiriscare-weekly-YYYY-MM-DD
# - SSH Key: Select your key
# - Create

# Note the NEW IP address
NEW_IP="xxx.xxx.xxx.xxx"

# Step 2: SSH to new server
ssh root@$NEW_IP

# Step 3: Restore latest database from Restic
/opt/backups/scripts/restore.sh latest

# Step 4: Verify services
docker compose ps
curl http://localhost:8000/health`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Phase 3: Update DNS (if IP changed)"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm overflow-x-auto",children:t.jsx("pre",{children:`# Cloudflare Dashboard (recommended)
# 1. Login to Cloudflare
# 2. Select osiriscare.net
# 3. DNS  Update A records:
#    - api.osiriscare.net  NEW_IP
#    - dashboard.osiriscare.net  NEW_IP

# Wait for propagation (usually 1-5 min with Cloudflare)

# Verify DNS
dig api.osiriscare.net +short`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Phase 4: Verify & Monitor"}),t.jsx("div",{className:"p-4 bg-fill-secondary rounded-ios",children:t.jsxs("ul",{className:"space-y-2 text-sm text-label-secondary",children:[t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",className:"rounded"}),t.jsxs("span",{children:["API responding: ",t.jsx("code",{className:"bg-gray-900 px-1 rounded",children:"curl https://api.osiriscare.net/health"})]})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",className:"rounded"}),t.jsxs("span",{children:["Dashboard accessible: ",t.jsx("code",{className:"bg-gray-900 px-1 rounded",children:"https://dashboard.osiriscare.net"})]})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",className:"rounded"}),t.jsxs("span",{children:["Appliances checking in: ",t.jsx("code",{className:"bg-gray-900 px-1 rounded",children:"docker compose logs -f mcp-server | grep checkin"})]})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",className:"rounded"}),t.jsx("span",{children:"Portal links working (test magic link login)"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",className:"rounded"}),t.jsxs("span",{children:["Backup timers running: ",t.jsx("code",{className:"bg-gray-900 px-1 rounded",children:"systemctl list-timers | grep osiris"})]})]})]})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Credentials Reference"}),t.jsx("div",{className:"p-4 bg-health-warning/10 border-l-4 border-health-warning rounded-r-ios",children:t.jsxs("p",{className:"text-sm text-label-secondary",children:[t.jsx("strong",{children:"VPS:"})," root@178.156.162.116 (SSH key auth)",t.jsx("br",{}),t.jsx("strong",{children:"Storage Box:"})," u526501.your-storagebox.de:23",t.jsx("br",{}),t.jsx("strong",{children:"Restic Password:"})," /root/.restic-password",t.jsx("br",{}),t.jsx("strong",{children:"Hetzner Token:"})," /root/.hcloud-token",t.jsx("br",{}),t.jsx("strong",{children:"Hetzner Console:"})," console.hetzner.cloud (credentials in password manager)",t.jsx("br",{}),t.jsx("strong",{children:"Cloudflare:"})," dash.cloudflare.com (credentials in password manager)"]})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Backup Schedule Summary"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-light",children:[t.jsx("th",{className:"text-left py-2 px-3",children:"Time (UTC)"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Day"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Task"}),t.jsx("th",{className:"text-left py-2 px-3",children:"RPO"})]})}),t.jsxs("tbody",{className:"text-label-secondary",children:[t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3",children:"XX:01"}),t.jsx("td",{className:"py-2 px-3",children:"Hourly"}),t.jsx("td",{className:"py-2 px-3",children:"Restic backup to Storage Box"}),t.jsx("td",{className:"py-2 px-3 text-health-good",children:"1 hour"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3",children:"03:00"}),t.jsx("td",{className:"py-2 px-3",children:"Sunday"}),t.jsx("td",{className:"py-2 px-3",children:"Restic integrity check"}),t.jsx("td",{className:"py-2 px-3",children:"-"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-2 px-3",children:"04:00"}),t.jsx("td",{className:"py-2 px-3",children:"Sunday"}),t.jsx("td",{className:"py-2 px-3",children:"Hetzner Cloud snapshot"}),t.jsx("td",{className:"py-2 px-3 text-health-warning",children:"1 week"})]})]})]})}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios mt-4",children:[t.jsx("h5",{className:"font-semibold text-sm",children:"Total Backup Cost"}),t.jsxs("p",{className:"text-sm text-label-secondary mt-1",children:["Storage Box (1TB): ~$4/mo + Hetzner Snapshots (~300GB): ~$4/mo = ",t.jsx("strong",{children:"~$8.50/mo"})]})]})]})}]},onboarding:{title:"Client Onboarding",icon:"",items:[{id:"pipeline",title:"Onboarding Pipeline Stages",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-semibold",children:"Phase 1: Acquisition (Lead  Shipped)"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-light",children:[t.jsx("th",{className:"text-left py-2 px-3",children:"Stage"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Description"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Actions"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Target"})]})}),t.jsxs("tbody",{className:"text-label-secondary",children:[t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Lead"}),t.jsx("td",{className:"py-2 px-3",children:"Initial contact/referral received"}),t.jsx("td",{className:"py-2 px-3",children:"Log prospect, schedule discovery"}),t.jsx("td",{className:"py-2 px-3",children:"1-2 days"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Discovery"}),t.jsx("td",{className:"py-2 px-3",children:"Needs assessment call"}),t.jsx("td",{className:"py-2 px-3",children:"Document requirements, assess fit"}),t.jsx("td",{className:"py-2 px-3",children:"1-3 days"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Proposal"}),t.jsx("td",{className:"py-2 px-3",children:"Pricing and scope presented"}),t.jsx("td",{className:"py-2 px-3",children:"Send proposal, follow up"}),t.jsx("td",{className:"py-2 px-3",children:"3-5 days"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Contract"}),t.jsx("td",{className:"py-2 px-3",children:"Agreement signing"}),t.jsx("td",{className:"py-2 px-3",children:"Send MSA + BAA, collect signature"}),t.jsx("td",{className:"py-2 px-3",children:"1-3 days"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Intake"}),t.jsx("td",{className:"py-2 px-3",children:"Information gathering"}),t.jsx("td",{className:"py-2 px-3",children:"Collect network info, contacts"}),t.jsx("td",{className:"py-2 px-3",children:"2-5 days"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Credentials"}),t.jsx("td",{className:"py-2 px-3",children:"Access provisioned"}),t.jsx("td",{className:"py-2 px-3",children:"Generate site ID, API keys"}),t.jsx("td",{className:"py-2 px-3",children:"1 day"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Shipped"}),t.jsx("td",{className:"py-2 px-3",children:"Appliance sent"}),t.jsx("td",{className:"py-2 px-3",children:"Configure appliance, ship"}),t.jsx("td",{className:"py-2 px-3",children:"1-2 days"})]})]})]})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Phase 2: Activation (Received  Active)"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-light",children:[t.jsx("th",{className:"text-left py-2 px-3",children:"Stage"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Description"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Actions"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Target"})]})}),t.jsxs("tbody",{className:"text-label-secondary",children:[t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Received"}),t.jsx("td",{className:"py-2 px-3",children:"Client has appliance"}),t.jsx("td",{className:"py-2 px-3",children:"Confirm delivery, schedule install"}),t.jsx("td",{className:"py-2 px-3",children:"1 day"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Connectivity"}),t.jsx("td",{className:"py-2 px-3",children:"Appliance phoning home"}),t.jsx("td",{className:"py-2 px-3",children:"Verify check-in, troubleshoot"}),t.jsx("td",{className:"py-2 px-3",children:"1-2 days"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Scanning"}),t.jsx("td",{className:"py-2 px-3",children:"Discovery running"}),t.jsx("td",{className:"py-2 px-3",children:"Monitor scans, review assets"}),t.jsx("td",{className:"py-2 px-3",children:"1-2 days"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Baseline"}),t.jsx("td",{className:"py-2 px-3",children:"Baseline established"}),t.jsx("td",{className:"py-2 px-3",children:"Review baseline, set thresholds"}),t.jsx("td",{className:"py-2 px-3",children:"1 day"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Compliant"}),t.jsx("td",{className:"py-2 px-3",children:"All controls passing"}),t.jsx("td",{className:"py-2 px-3",children:"Verify 8/8 controls, fix issues"}),t.jsx("td",{className:"py-2 px-3",children:"1-3 days"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Active"}),t.jsx("td",{className:"py-2 px-3",children:"Live and monitored"}),t.jsx("td",{className:"py-2 px-3",children:"Generate portal link, hand off"}),t.jsx("td",{className:"py-2 px-3",children:"-"})]})]})]})})]})},{id:"checklist",title:"Onboarding Checklist",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-semibold",children:"Pre-Onboarding"}),t.jsx("ul",{className:"space-y-2",children:["Signed MSA and BAA received","Payment method on file","Primary contact identified","Network diagram or description obtained","Current IT provider contact (if applicable)"].map((e,s)=>t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",className:"rounded"}),t.jsx("span",{className:"text-label-secondary",children:e})]},s))}),t.jsx("h4",{className:"font-semibold mt-6",children:"Appliance Setup"}),t.jsx("ul",{className:"space-y-2",children:["Site ID generated in Central Command","API key created and secured","Appliance flashed with client config","Appliance tested in lab (check-in verified)","Tracking number sent to client"].map((e,s)=>t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",className:"rounded"}),t.jsx("span",{className:"text-label-secondary",children:e})]},s))}),t.jsx("h4",{className:"font-semibold mt-6",children:"Activation"}),t.jsx("ul",{className:"space-y-2",children:["Appliance receiving check-ins","Network scan completed","Baseline configuration saved","All 8 controls passing","Portal magic link generated and sent","Client orientation call completed"].map((e,s)=>t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",className:"rounded"}),t.jsx("span",{className:"text-label-secondary",children:e})]},s))})]})}]},appliance:{title:"Appliance Setup",icon:"",items:[{id:"hardware",title:"Hardware Requirements",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-semibold",children:"Minimum Specifications"}),t.jsxs("ul",{className:"list-disc list-inside space-y-2 text-label-secondary",children:[t.jsx("li",{children:"Intel N100 or equivalent (4 cores, 2.0+ GHz)"}),t.jsx("li",{children:"8GB RAM minimum, 16GB recommended"}),t.jsx("li",{children:"128GB NVMe SSD (LUKS encrypted)"}),t.jsx("li",{children:"2x Gigabit Ethernet ports"}),t.jsx("li",{children:"TPM 2.0 (optional, for secure boot)"})]}),t.jsx("h4",{className:"font-semibold mt-6",children:"Recommended Hardware"}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("p",{className:"font-medium",children:"Beelink S12 Pro Mini PC"}),t.jsxs("ul",{className:"mt-2 text-sm text-label-secondary space-y-1",children:[t.jsx("li",{children:"Intel N100 (4C/4T, 3.4GHz boost)"}),t.jsx("li",{children:"16GB DDR5 RAM"}),t.jsx("li",{children:"500GB NVMe SSD"}),t.jsx("li",{children:"Dual 2.5GbE NICs"}),t.jsx("li",{children:"~$200 retail"})]})]}),t.jsx("h4",{className:"font-semibold mt-6",children:"Network Requirements"}),t.jsxs("ul",{className:"list-disc list-inside space-y-2 text-label-secondary",children:[t.jsx("li",{children:"Static IP or DHCP reservation"}),t.jsx("li",{children:"Outbound HTTPS (443) to api.osiriscare.net"}),t.jsx("li",{children:"LAN access to monitored devices"}),t.jsx("li",{children:"No inbound ports required"})]})]})},{id:"flashing",title:"Flashing the Appliance",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-semibold",children:"Step 1: Generate Configuration"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm",children:t.jsx("pre",{children:`# In Central Command, create the site first
# Then generate the appliance config:

nix build .#appliance-image \\
  --argstr siteId "clinic-name-abc123" \\
  --argstr apiKey "sk_live_..." \\
  --argstr apiUrl "https://api.osiriscare.net"`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Step 2: Write to USB"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm",children:t.jsx("pre",{children:`# Find USB device
lsblk

# Write image (replace /dev/sdX)
sudo dd if=result/nixos.img of=/dev/sdX \\
  bs=4M status=progress conv=fsync`})}),t.jsx("h4",{className:"font-semibold mt-6",children:"Step 3: Boot and Verify"}),t.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-label-secondary",children:[t.jsx("li",{children:"Insert USB into target device, power on"}),t.jsx("li",{children:"Wait for NixOS to boot (2-3 minutes)"}),t.jsx("li",{children:"Appliance will auto-connect via DHCP"}),t.jsx("li",{children:"Check Central Command for check-in within 5 minutes"}),t.jsx("li",{children:"If no check-in, verify network and check logs"})]})]})},{id:"troubleshooting-appliance",title:"Appliance Troubleshooting",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-semibold",children:"No Check-In After Boot"}),t.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-label-secondary",children:[t.jsx("li",{children:"Verify Ethernet cable is connected (check link lights)"}),t.jsxs("li",{children:["Confirm DHCP is working: ",t.jsx("code",{className:"bg-fill-secondary px-1 rounded",children:"journalctl -u systemd-networkd"})]}),t.jsxs("li",{children:["Test DNS: ",t.jsx("code",{className:"bg-fill-secondary px-1 rounded",children:"ping api.osiriscare.net"})]}),t.jsxs("li",{children:["Check agent logs: ",t.jsx("code",{className:"bg-fill-secondary px-1 rounded",children:"journalctl -u compliance-agent"})]}),t.jsxs("li",{children:["Verify API key is correct in ",t.jsx("code",{className:"bg-fill-secondary px-1 rounded",children:"/etc/compliance-agent/config.yaml"})]})]}),t.jsx("h4",{className:"font-semibold mt-6",children:"Connectivity Drops"}),t.jsxs("ul",{className:"list-disc list-inside space-y-2 text-label-secondary",children:[t.jsx("li",{children:"Check for firewall blocking outbound 443"}),t.jsx("li",{children:"Verify static IP hasn't changed"}),t.jsxs("li",{children:["Review ",t.jsx("code",{className:"bg-fill-secondary px-1 rounded",children:"/var/log/mcp-client.log"})]}),t.jsxs("li",{children:["Restart agent: ",t.jsx("code",{className:"bg-fill-secondary px-1 rounded",children:"systemctl restart compliance-agent"})]})]}),t.jsx("h4",{className:"font-semibold mt-6",children:"Remote Access (Emergency)"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm",children:t.jsx("pre",{children:`# SSH is enabled for admin user
ssh admin@<appliance-ip>

# View real-time logs
journalctl -u compliance-agent -f

# Manual check-in
/opt/compliance-agent/bin/phone-home --now`})})]})}]},compliance:{title:"Compliance Controls",icon:"",items:[{id:"controls",title:"8 Core HIPAA Controls",content:t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-light",children:[t.jsx("th",{className:"text-left py-2 px-3",children:"Control"}),t.jsx("th",{className:"text-left py-2 px-3",children:"Description"}),t.jsx("th",{className:"text-left py-2 px-3",children:"HIPAA Reference"})]})}),t.jsxs("tbody",{className:"text-label-secondary",children:[t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Endpoint Drift"}),t.jsx("td",{className:"py-2 px-3",children:"Configuration matches approved baseline"}),t.jsx("td",{className:"py-2 px-3",children:"164.308(a)(1)(ii)(D), 164.310(d)(1)"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Patch Freshness"}),t.jsx("td",{className:"py-2 px-3",children:"Critical patches applied within 72 hours"}),t.jsx("td",{className:"py-2 px-3",children:"164.308(a)(5)(ii)(B)"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Backup Success"}),t.jsx("td",{className:"py-2 px-3",children:"Daily backups + monthly restore test"}),t.jsx("td",{className:"py-2 px-3",children:"164.308(a)(7)(ii)(A), 164.310(d)(2)(iv)"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"MFA Coverage"}),t.jsx("td",{className:"py-2 px-3",children:"MFA required for all human accounts"}),t.jsx("td",{className:"py-2 px-3",children:"164.312(a)(2)(i), 164.308(a)(4)(ii)(C)"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Privileged Access"}),t.jsx("td",{className:"py-2 px-3",children:"Admin accounts reviewed and limited"}),t.jsx("td",{className:"py-2 px-3",children:"164.308(a)(3)(ii)(B), 164.308(a)(4)(ii)(B)"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Git Protections"}),t.jsx("td",{className:"py-2 px-3",children:"Config tracked in version control"}),t.jsx("td",{className:"py-2 px-3",children:"164.312(b), 164.308(a)(5)(ii)(D)"})]}),t.jsxs("tr",{className:"border-b border-separator-light/50",children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Secrets Hygiene"}),t.jsx("td",{className:"py-2 px-3",children:"No plaintext credentials in files"}),t.jsx("td",{className:"py-2 px-3",children:"164.312(a)(2)(i), 164.308(a)(4)(ii)(B)"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-2 px-3 font-medium",children:"Storage Posture"}),t.jsx("td",{className:"py-2 px-3",children:"Encryption at rest + proper permissions"}),t.jsx("td",{className:"py-2 px-3",children:"164.310(d)(2)(iii), 164.312(a)(1)"})]})]})]})})})},{id:"auto-healing",title:"Three-Tier Auto-Healing",content:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h4",{className:"font-semibold text-level-l1",children:"L1: Deterministic (70-80%)"}),t.jsx("p",{className:"text-sm text-label-secondary mt-1",children:"YAML-based rules executed in <100ms at zero cost. Handles known issues like service restarts, log rotation, and configuration resets."})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h4",{className:"font-semibold text-level-l2",children:"L2: LLM Planner (15-20%)"}),t.jsx("p",{className:"text-sm text-label-secondary mt-1",children:"GPT-4 powered analysis for novel issues. Generates remediation plans in 2-5 seconds at ~$0.001 per incident. Successful patterns promote to L1."})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h4",{className:"font-semibold text-level-l3",children:"L3: Human Escalation (5-10%)"}),t.jsx("p",{className:"text-sm text-label-secondary mt-1",children:"Complex or sensitive issues requiring human judgment. Creates tickets with full context and recommended actions."})]})]})}]},portal:{title:"Client Portal",icon:"",items:[{id:"generating-links",title:"Generating Portal Links",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-label-secondary",children:"Portal links are magic URLs that give clients read-only access to their compliance dashboard. No login required - the token in the URL authenticates access."}),t.jsx("h4",{className:"font-semibold mt-4",children:"Via Central Command"}),t.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-label-secondary",children:[t.jsx("li",{children:"Navigate to Sites  [Client Name]"}),t.jsx("li",{children:'Click "Generate Portal Link" button'}),t.jsx("li",{children:"Copy the URL and send to client"})]}),t.jsx("h4",{className:"font-semibold mt-4",children:"Via API"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-green-400 font-mono text-sm",children:t.jsx("pre",{children:`curl -X POST https://api.osiriscare.net/api/portal/sites/{site_id}/generate-token

# Response:
{
  "portal_url": "https://portal.osiriscare.net/portal/site/{site_id}?token=...",
  "token": "YBnJGHrJS5151NC-...",
  "expires": "never"
}`})}),t.jsx("h4",{className:"font-semibold mt-4",children:"Portal Features"}),t.jsxs("ul",{className:"list-disc list-inside space-y-2 text-label-secondary",children:[t.jsx("li",{children:"Real-time compliance score and KPIs"}),t.jsx("li",{children:"8 control status tiles with HIPAA mappings"}),t.jsx("li",{children:"Recent incident log with auto-fix status"}),t.jsx("li",{children:"Evidence bundle downloads"}),t.jsx("li",{children:"Monthly compliance packet (PDF)"})]})]})},{id:"client-access-sop",title:"SOP: Client Portal Access Guide",content:t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"p-4 bg-accent-primary/10 border border-accent-primary rounded-ios",children:t.jsxs("p",{className:"text-sm",children:[t.jsx("strong",{children:"Purpose:"})," This SOP provides step-by-step instructions for administrators to help clients access their HIPAA compliance portal. Use this guide when onboarding new clients or when clients need assistance."]})}),t.jsx("h4",{className:"font-semibold text-lg",children:"Step 1: Generate Portal Link"}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios space-y-3",children:[t.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-label-secondary",children:[t.jsx("li",{children:"Log in to Central Command (msp.osiriscare.net)"}),t.jsxs("li",{children:["Navigate to ",t.jsx("strong",{children:"Sites"})," in the sidebar"]}),t.jsx("li",{children:"Click on the client's site name"}),t.jsxs("li",{children:["Click the ",t.jsx("strong",{children:'"Generate Portal Link"'})," button"]}),t.jsx("li",{children:"Copy the generated URL"})]}),t.jsx("p",{className:"text-xs text-label-tertiary mt-2",children:"Note: Links do not expire by default. Generate a new link if you suspect the old one was compromised."})]}),t.jsx("h4",{className:"font-semibold text-lg",children:"Step 2: Send to Client"}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("p",{className:"text-sm text-label-secondary mb-3",children:"Use the email template below. Copy and customize with client details:"}),t.jsx("div",{className:"p-4 bg-gray-900 rounded-ios text-gray-300 text-sm font-mono whitespace-pre-wrap",children:`Subject: Your HIPAA Compliance Portal Access - [Practice Name]

Hi [Contact Name],

Your HIPAA compliance monitoring portal is now active. You can access your real-time compliance dashboard at any time using this secure link:

[PASTE PORTAL LINK HERE]

What You'll See:
 Overall compliance health score
 Status of all 8 HIPAA security controls
 Recent automated remediation activity
 Evidence bundle archive for audit purposes

No login required - simply click the link to view your dashboard.

Tips:
 Bookmark this link for easy access
 Share with your compliance officer or practice manager
 The dashboard updates in real-time as our appliance monitors your systems

Questions? Reply to this email or call us at [Support Number].

Best regards,
[Your Name]
OsirisCare Compliance Team`})]}),t.jsx("h4",{className:"font-semibold text-lg",children:"Step 3: Walk Client Through Portal"}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("p",{className:"text-sm text-label-secondary mb-3",children:"During initial setup, offer a brief walkthrough. Key sections to explain:"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3",children:[t.jsxs("div",{className:"p-3 bg-background-primary rounded-ios",children:[t.jsx("h5",{className:"font-medium text-accent-primary",children:"Health Score"}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Overall percentage showing compliance status. Green (90%+) = healthy, Yellow (70-89%) = attention needed, Red (<70%) = critical issues."})]}),t.jsxs("div",{className:"p-3 bg-background-primary rounded-ios",children:[t.jsx("h5",{className:"font-medium text-accent-primary",children:"Control Tiles"}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"8 tiles showing each HIPAA control status. Click any tile to see details and which HIPAA sections it addresses (e.g., 164.308, 164.312)."})]}),t.jsxs("div",{className:"p-3 bg-background-primary rounded-ios",children:[t.jsx("h5",{className:"font-medium text-accent-primary",children:"Auto-Fix Log"}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Shows recent automated remediations. Clients can see what was fixed without needing to take action - demonstrates system value."})]}),t.jsxs("div",{className:"p-3 bg-background-primary rounded-ios",children:[t.jsx("h5",{className:"font-medium text-accent-primary",children:"Evidence Bundles"}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Cryptographically signed compliance checks. These serve as audit evidence for HIPAA compliance reviews."})]})]})]}),t.jsx("h4",{className:"font-semibold text-lg",children:"Common Client Questions"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("p",{className:"font-medium",children:'"Do I need to log in?"'}),t.jsx("p",{className:"text-sm text-label-tertiary mt-1",children:"No. The portal uses a secure magic link - just click the URL we sent. No username or password needed. The link itself contains your secure access token."})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("p",{className:"font-medium",children:'"Who can I share this link with?"'}),t.jsx("p",{className:"text-sm text-label-tertiary mt-1",children:"Share only with authorized personnel at your practice - compliance officers, practice managers, or administrators. Anyone with the link can view your compliance data. Contact us if you need the link revoked and regenerated."})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("p",{className:"font-medium",children:'"How often does this update?"'}),t.jsx("p",{className:"text-sm text-label-tertiary mt-1",children:"Real-time. The appliance at your site performs checks every 60 seconds and reports status continuously. What you see on the portal is current as of the page load."})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("p",{className:"font-medium",children:'"What do I do if something is red/failing?"'}),t.jsx("p",{className:"text-sm text-label-tertiary mt-1",children:"Nothing, usually! Our system automatically remediates most issues within seconds. If a control stays red, we're already alerted and working on it. You'll see it turn green once resolved."})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("p",{className:"font-medium",children:'"Can I download reports for auditors?"'}),t.jsx("p",{className:"text-sm text-label-tertiary mt-1",children:'Yes. Click "Download Monthly Report" to get a PDF compliance packet. For specific evidence bundles, use the "Evidence" section to download signed proof of compliance checks.'})]})]}),t.jsx("h4",{className:"font-semibold text-lg",children:"Troubleshooting Client Access"}),t.jsxs("div",{className:"p-4 bg-health-warning/10 border-l-4 border-health-warning rounded-r-ios",children:[t.jsx("h5",{className:"font-medium",children:'If client reports "Page Not Found" or "Invalid Token":'}),t.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-label-secondary space-y-1",children:[t.jsx("li",{children:`Verify the URL wasn't truncated in email (check for "..." in link)`}),t.jsx("li",{children:"Generate a fresh portal link from Central Command"}),t.jsx("li",{children:"Send the new link directly (avoid copy-paste through multiple apps)"}),t.jsx("li",{children:"If issue persists, check site status in Central Command"})]})]})]})},{id:"portal-security",title:"Portal Security & Link Management",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-label-secondary",children:"Portal links use secure tokens that provide read-only access. Understanding security implications helps you advise clients appropriately."}),t.jsx("h4",{className:"font-semibold",children:"Token Security Model"}),t.jsxs("ul",{className:"list-disc list-inside space-y-2 text-label-secondary",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Read-only access:"})," Clients cannot modify settings or data"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Site-scoped:"})," Each token only works for one specific site"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"No expiration by default:"})," Links remain valid until regenerated"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"No authentication required:"})," Anyone with the link can access"]})]}),t.jsx("h4",{className:"font-semibold mt-4",children:"When to Regenerate Links"}),t.jsx("div",{className:"p-4 bg-health-critical/10 border-l-4 border-health-critical rounded-r-ios",children:t.jsxs("ul",{className:"space-y-2 text-sm text-label-secondary",children:[t.jsx("li",{children:" Employee with portal access leaves the practice"}),t.jsx("li",{children:" Link was accidentally shared publicly"}),t.jsx("li",{children:" Client suspects unauthorized access"}),t.jsx("li",{children:" As part of regular security rotation (recommended quarterly)"})]})}),t.jsx("h4",{className:"font-semibold mt-4",children:"Regenerating a Link"}),t.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-label-secondary",children:[t.jsx("li",{children:"Go to Sites  [Client Name] in Central Command"}),t.jsx("li",{children:'Click "Generate Portal Link" (this invalidates the old token)'}),t.jsx("li",{children:"Send the new link to authorized client contacts"}),t.jsx("li",{children:"Confirm with client that old bookmarks should be updated"})]}),t.jsx("h4",{className:"font-semibold mt-4",children:"Data Visible on Portal"}),t.jsx("p",{className:"text-sm text-label-secondary mb-2",children:"Clients can view (but not download raw data for):"}),t.jsxs("ul",{className:"list-disc list-inside space-y-1 text-label-secondary text-sm",children:[t.jsx("li",{children:"Compliance scores and health metrics"}),t.jsx("li",{children:"Control pass/fail status with HIPAA mappings"}),t.jsx("li",{children:"Incident history and auto-fix logs"}),t.jsx("li",{children:"Evidence bundle summaries (downloadable as signed bundles)"}),t.jsx("li",{children:"Monthly compliance reports (downloadable as PDF)"})]}),t.jsx("div",{className:"p-4 bg-accent-primary/10 rounded-ios mt-4",children:t.jsxs("p",{className:"text-sm",children:[t.jsx("strong",{children:"Note:"})," No PHI or sensitive system credentials are ever exposed through the client portal. All evidence is scrubbed of personally identifiable information before display."]})})]})}]},troubleshooting:{title:"Troubleshooting",icon:"",items:[{id:"common-issues",title:"Common Issues",content:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-health-critical/10 border-l-4 border-health-critical rounded-r-ios",children:[t.jsx("h4",{className:"font-semibold text-health-critical",children:"Appliance Not Checking In"}),t.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-label-secondary space-y-1",children:[t.jsx("li",{children:"Verify network connectivity (ping api.osiriscare.net)"}),t.jsx("li",{children:"Check firewall allows outbound HTTPS (443)"}),t.jsx("li",{children:"Verify API key in config matches Central Command"}),t.jsx("li",{children:"Review agent logs: journalctl -u compliance-agent"}),t.jsx("li",{children:"Restart agent: systemctl restart compliance-agent"})]})]}),t.jsxs("div",{className:"p-4 bg-health-warning/10 border-l-4 border-health-warning rounded-r-ios",children:[t.jsx("h4",{className:"font-semibold text-health-warning",children:"Control Failing Unexpectedly"}),t.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-label-secondary space-y-1",children:[t.jsx("li",{children:"Check control details for specific failure reason"}),t.jsx("li",{children:"Verify baseline configuration is current"}),t.jsx("li",{children:"Review recent changes in git log"}),t.jsx("li",{children:"Check if exception should be applied"}),t.jsx("li",{children:"Contact support if issue persists"})]})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary border-l-4 border-separator-light rounded-r-ios",children:[t.jsx("h4",{className:"font-semibold",children:"Portal Link Not Working"}),t.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-label-secondary space-y-1",children:[t.jsx("li",{children:"Verify URL is complete (token parameter present)"}),t.jsx("li",{children:"Generate a new link if token may be compromised"}),t.jsx("li",{children:"Check that site exists and is active"}),t.jsx("li",{children:"Try accessing directly via portal.osiriscare.net"})]})]})]})},{id:"support",title:"Getting Support",content:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h4",{className:"font-semibold",children:"Email Support"}),t.jsx("p",{className:"text-sm text-label-secondary mt-1",children:"support@osiriscare.net"}),t.jsx("p",{className:"text-xs text-label-tertiary mt-2",children:"Response within 24 hours"})]}),t.jsxs("div",{className:"p-4 bg-fill-secondary rounded-ios",children:[t.jsx("h4",{className:"font-semibold",children:"Emergency Line"}),t.jsx("p",{className:"text-sm text-label-secondary mt-1",children:"(570) 555-0123"}),t.jsx("p",{className:"text-xs text-label-tertiary mt-2",children:"Critical issues only"})]})]}),t.jsx("h4",{className:"font-semibold mt-4",children:"When Contacting Support"}),t.jsxs("ul",{className:"list-disc list-inside space-y-2 text-label-secondary",children:[t.jsx("li",{children:"Include Site ID and appliance hostname"}),t.jsx("li",{children:"Describe the issue and when it started"}),t.jsx("li",{children:"Attach relevant log excerpts"}),t.jsx("li",{children:"Note any recent changes made"})]})]})}]}},yj=()=>{const[e,s]=v.useState("overview"),[r,n]=v.useState(Ni.overview.items[0].id),a=Ni[e],l=a.items.find(i=>i.id===r)||a.items[0];return t.jsxs("div",{className:"flex gap-6 min-h-[calc(100vh-200px)]",children:[t.jsx("div",{className:"w-64 flex-shrink-0",children:t.jsxs(P,{className:"sticky top-6",children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Documentation"}),t.jsx("nav",{className:"space-y-1",children:Object.entries(Ni).map(([i,c])=>t.jsxs("div",{children:[t.jsxs("button",{onClick:()=>{s(i),n(c.items[0].id)},className:`w-full text-left px-3 py-2 rounded-ios text-sm font-medium transition-colors flex items-center gap-2 ${e===i?"bg-accent-primary text-white":"text-label-secondary hover:bg-fill-secondary"}`,children:[t.jsx("span",{children:c.icon}),c.title]}),e===i&&t.jsx("div",{className:"ml-6 mt-1 space-y-1",children:c.items.map(o=>t.jsx("button",{onClick:()=>n(o.id),className:`w-full text-left px-3 py-1.5 rounded-ios-sm text-xs transition-colors ${r===o.id?"bg-accent-primary/20 text-accent-primary":"text-label-tertiary hover:text-label-secondary"}`,children:o.title},o.id))})]},i))})]})}),t.jsx("div",{className:"flex-1",children:t.jsxs(P,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("span",{className:"text-2xl",children:a.icon}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase tracking-wide",children:a.title}),t.jsx("h1",{className:"text-xl font-semibold",children:l.title})]})]}),t.jsx("div",{className:"prose prose-sm max-w-none text-label-primary",children:l.content})]})})]})};function vj(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}const jj=({partner:e,onClick:s})=>t.jsxs("tr",{onClick:s,className:"hover:bg-fill-tertiary/50 cursor-pointer transition-colors",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[e.logo_url?t.jsx("img",{src:e.logo_url,alt:e.brand_name,className:"w-8 h-8 rounded"}):t.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:e.primary_color||"#4F46E5"},children:e.brand_name.charAt(0)}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-label-primary",children:e.brand_name}),t.jsx("p",{className:"text-xs text-label-tertiary",children:e.slug})]})]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-label-secondary",children:e.contact_email}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(Ue,{variant:e.status==="active"?"success":e.status==="suspended"?"warning":"default",children:e.status})}),t.jsx("td",{className:"px-4 py-3 text-sm text-label-secondary",children:e.site_count}),t.jsxs("td",{className:"px-4 py-3 text-sm text-label-secondary",children:[e.revenue_share_percent,"%"]}),t.jsx("td",{className:"px-4 py-3 text-sm text-label-tertiary",children:vj(e.created_at)})]}),bj=({isOpen:e,onClose:s,onSubmit:r,isLoading:n})=>{const[a,l]=v.useState(""),[i,c]=v.useState(""),[o,d]=v.useState(""),[u,h]=v.useState(""),[m,g]=v.useState("#4F46E5"),[p,j]=v.useState(40);if(v.useEffect(()=>{const x=a.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");c(x)},[a]),v.useEffect(()=>{!u&&a&&h(a)},[a]),!e)return null;const w=x=>{x.preventDefault(),r({name:a,slug:i,contact_email:o,brand_name:u,primary_color:m,revenue_share_percent:p})};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(P,{className:"w-full max-w-lg",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"New Partner"}),t.jsxs("form",{onSubmit:w,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Partner Name *"}),t.jsx("input",{type:"text",value:a,onChange:x=>l(x.target.value),placeholder:"NEPA IT Solutions",className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light focus:border-accent-primary focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Slug"}),t.jsx("input",{type:"text",value:i,onChange:x=>c(x.target.value),placeholder:"nepa-it",className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light focus:border-accent-primary focus:outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Contact Email *"}),t.jsx("input",{type:"email",value:o,onChange:x=>d(x.target.value),placeholder:"partner@example.com",className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light focus:border-accent-primary focus:outline-none",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Brand Name"}),t.jsx("input",{type:"text",value:u,onChange:x=>h(x.target.value),placeholder:"Partner Care",className:"w-full px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light focus:border-accent-primary focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Brand Color"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"color",value:m,onChange:x=>g(x.target.value),className:"w-10 h-10 rounded cursor-pointer"}),t.jsx("input",{type:"text",value:m,onChange:x=>g(x.target.value),className:"flex-1 px-3 py-2 rounded-ios bg-fill-secondary text-label-primary border border-separator-light focus:border-accent-primary focus:outline-none"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Revenue Share (Partner %)"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("input",{type:"range",min:"10",max:"60",value:p,onChange:x=>j(parseInt(x.target.value)),className:"flex-1"}),t.jsxs("span",{className:"text-sm font-medium text-label-primary w-16",children:[p,"% / ",100-p,"%"]})]}),t.jsxs("p",{className:"text-xs text-label-tertiary mt-1",children:["Partner gets ",p,"%, OsirisCare gets ",100-p,"%"]})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 rounded-ios bg-fill-secondary text-label-primary hover:bg-fill-tertiary transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:!a||!o||n,className:"flex-1 px-4 py-2 rounded-ios bg-accent-primary text-white hover:bg-accent-primary/90 transition-colors disabled:opacity-50",children:n?"Creating...":"Create Partner"})]})]})]})})},Nj=({partner:e,onClose:s,onCopyApiKey:r})=>e?t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(P,{className:"w-full max-w-lg",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-white font-bold text-xl",style:{backgroundColor:e.primary_color||"#4F46E5"},children:e.brand_name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-label-primary",children:e.brand_name}),t.jsx("p",{className:"text-sm text-label-tertiary",children:e.slug})]})]}),t.jsx(Ue,{variant:e.status==="active"?"success":"warning",children:e.status})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase",children:"Sites"}),t.jsx("p",{className:"text-2xl font-bold text-accent-primary",children:e.site_count})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase",children:"Revenue Share"}),t.jsxs("p",{className:"text-2xl font-bold text-label-primary",children:[e.revenue_share_percent,"%"]})]})]}),t.jsxs("div",{className:"border-t border-separator-light pt-4",children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase mb-2",children:"Contact"}),t.jsx("p",{className:"text-sm text-label-primary",children:e.contact_email})]}),t.jsxs("div",{className:"border-t border-separator-light pt-4",children:[t.jsx("p",{className:"text-xs text-label-tertiary uppercase mb-2",children:"Partner Dashboard"}),t.jsx("p",{className:"text-sm text-label-secondary",children:"Partners can access their dashboard at:"}),t.jsx("code",{className:"block mt-1 px-3 py-2 bg-fill-secondary rounded text-sm",children:"https://dashboard.osiriscare.net/partner/login"})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsxs("button",{onClick:()=>r(e.id),className:"flex-1 px-4 py-2 rounded-ios bg-fill-secondary text-label-primary hover:bg-fill-tertiary transition-colors flex items-center justify-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"Regenerate API Key"]}),t.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 rounded-ios bg-accent-primary text-white hover:bg-accent-primary/90 transition-colors",children:"Close"})]})]})]})}):null,wj=()=>{const[e,s]=v.useState([]),[r,n]=v.useState(!0),[a,l]=v.useState(!1),[i,c]=v.useState(null),[o,d]=v.useState(!1),[u,h]=v.useState(void 0);v.useEffect(()=>{m()},[]);const m=async()=>{n(!0);try{const x=await fetch("/api/partners");if(x.ok){const f=await x.json();s(f.partners||[])}}catch(x){console.error("Failed to fetch partners:",x)}finally{n(!1)}},g=async x=>{d(!0);try{const f=await fetch("/api/partners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(f.ok){const y=await f.json();l(!1),m(),y.api_key&&alert(`Partner created!

API Key (copy now, won't be shown again):
${y.api_key}`)}else{const y=await f.json();alert(`Failed to create partner: ${y.detail||"Unknown error"}`)}}catch(f){console.error("Failed to create partner:",f),alert("Failed to create partner")}finally{d(!1)}},p=async x=>{alert("API key regeneration not yet implemented. Contact engineering to reset partner API keys.")},j=u?e.filter(x=>x.status===u):e,w={total:e.length,active:e.filter(x=>x.status==="active").length,totalSites:e.reduce((x,f)=>x+f.site_count,0)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-label-primary",children:"Partners"}),t.jsx("p",{className:"text-label-tertiary text-sm mt-1",children:"Manage MSP partners and resellers"})]}),t.jsx("button",{onClick:()=>l(!0),className:"btn-primary",children:"+ New Partner"})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-accent-primary",children:w.total}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Total Partners"})]}),t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-health-healthy",children:w.active}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Active"})]}),t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-label-primary",children:w.totalSites}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Total Sites"})]}),t.jsxs(P,{padding:"md",className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-health-warning",children:"40%"}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Avg. Revenue Share"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-label-tertiary",children:"Filter:"}),t.jsx("div",{className:"flex gap-1",children:[{value:void 0,label:"All"},{value:"active",label:"Active"},{value:"suspended",label:"Suspended"},{value:"inactive",label:"Inactive"}].map(x=>t.jsx("button",{onClick:()=>h(x.value),className:`px-3 py-1.5 text-sm rounded-ios-sm transition-colors ${u===x.value?"bg-accent-primary text-white":"bg-separator-light text-label-secondary hover:bg-separator-light/80"}`,children:x.label},x.value||"all"))})]}),t.jsx(P,{padding:"none",children:r?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(ke,{size:"lg"})}):j.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-accent-primary/10 flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),t.jsx("h3",{className:"font-semibold text-label-primary mb-2",children:"No partners yet"}),t.jsx("p",{className:"text-label-tertiary text-sm mb-4",children:'Click "New Partner" to add your first reseller.'}),t.jsx("button",{onClick:()=>l(!0),className:"btn-primary",children:"+ New Partner"})]}):t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-fill-secondary border-b border-separator-light",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-label-secondary uppercase tracking-wider",children:"Partner"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-label-secondary uppercase tracking-wider",children:"Contact"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-label-secondary uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-label-secondary uppercase tracking-wider",children:"Sites"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-label-secondary uppercase tracking-wider",children:"Revenue %"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-label-secondary uppercase tracking-wider",children:"Created"})]})}),t.jsx("tbody",{className:"divide-y divide-separator-light",children:j.map(x=>t.jsx(jj,{partner:x,onClick:()=>c(x)},x.id))})]})}),t.jsx(bj,{isOpen:a,onClose:()=>l(!1),onSubmit:g,isLoading:o}),t.jsx(Nj,{partner:i,onClose:()=>c(null),onCopyApiKey:p})]})};function kj(e){const s=new Date(e),n=new Date().getTime()-s.getTime(),a=Math.floor(n/6e4);if(a<1)return"Just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);if(l<24)return`${l}h ago`;const i=Math.floor(l/24);return i<7?`${i}d ago`:s.toLocaleDateString()}const Cj=({severity:e})=>{const s={critical:t.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500/20 flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),warning:t.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-500/20 flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),info:t.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),success:t.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})};return s[e]||s.info},Sj=({notification:e,onMarkRead:s,onDismiss:r})=>t.jsx("div",{className:`p-4 rounded-ios border transition-all ${e.is_read?"bg-fill-secondary/50 border-separator-light":"bg-fill-primary border-accent-primary/30 shadow-sm"}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(Cj,{severity:e.severity}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{children:[t.jsx("h3",{className:`font-medium ${e.is_read?"text-label-secondary":"text-label-primary"}`,children:e.title}),t.jsx("p",{className:"text-sm text-label-tertiary mt-0.5",children:e.message})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[t.jsx(Ue,{variant:e.severity==="critical"?"error":e.severity==="warning"?"warning":"default",children:e.category}),t.jsx("span",{className:"text-xs text-label-tertiary whitespace-nowrap",children:kj(e.created_at)})]})]}),e.site_id&&t.jsxs("p",{className:"text-xs text-label-tertiary mt-2",children:["Site: ",e.site_id]}),t.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[!e.is_read&&t.jsx("button",{onClick:()=>s(e.id),className:"text-xs text-accent-primary hover:text-accent-primary/80",children:"Mark as read"}),t.jsx("button",{onClick:()=>r(e.id),className:"text-xs text-label-tertiary hover:text-label-secondary",children:"Dismiss"})]})]})]})}),_j=()=>{const[e,s]=v.useState("all"),[r,n]=v.useState(!1),[a,l]=v.useState(!1),{data:i,isLoading:c}=$0({severity:e!=="all"?e:void 0,unread_only:r}),{data:o}=Rx(),d=U0(),u=B0(),h=H0(),m=W0(),g=f=>{d.mutate(f)},p=f=>{h.mutate(f)},j=()=>{u.mutate()},w=()=>{m.mutate({severity:"critical",category:"security",title:"Test Critical Alert",message:"This is a test critical alert. If SMTP is configured, an email should be sent to administrator@osiriscare.net."}),l(!1)},x=()=>{m.mutate({severity:"warning",category:"compliance",title:"Test Warning Alert",message:"This is a test warning notification to verify the notification system is working."}),l(!1)};return c?t.jsx("div",{className:"flex items-center justify-center py-24",children:t.jsx(ke,{size:"lg"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-label-primary",children:"Notifications"}),t.jsxs("p",{className:"text-label-tertiary text-sm mt-1",children:[(o==null?void 0:o.unread)||0," unread notifications"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 text-sm rounded-ios bg-fill-secondary text-label-primary border border-separator-light hover:bg-fill-tertiary transition-colors",children:"Test Alert"}),o&&o.unread>0&&t.jsx("button",{onClick:j,className:"px-4 py-2 text-sm rounded-ios bg-accent-primary text-white hover:bg-accent-primary/90 transition-colors",children:"Mark all as read"})]})]}),a&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(P,{className:"w-full max-w-md p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-label-primary mb-4",children:"Test Notification System"}),t.jsx("p",{className:"text-sm text-label-secondary mb-4",children:"Send a test notification to verify the system. Critical alerts will also trigger an email if SMTP is configured."}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("button",{onClick:w,disabled:m.isPending,className:"w-full px-4 py-3 text-sm rounded-ios bg-red-500 text-white hover:bg-red-600 transition-colors flex items-center justify-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Test Critical Alert (+ Email)"]}),t.jsxs("button",{onClick:x,disabled:m.isPending,className:"w-full px-4 py-3 text-sm rounded-ios bg-yellow-500 text-white hover:bg-yellow-600 transition-colors flex items-center justify-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Test Warning Alert"]}),t.jsx("button",{onClick:()=>l(!1),className:"w-full px-4 py-2 text-sm rounded-ios bg-fill-secondary text-label-primary border border-separator-light hover:bg-fill-tertiary transition-colors",children:"Cancel"})]})]})}),o&&t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsxs(P,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-red-500",children:o.critical}),t.jsx("div",{className:"text-xs text-label-tertiary",children:"Critical"})]}),t.jsxs(P,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:o.warning}),t.jsx("div",{className:"text-xs text-label-tertiary",children:"Warnings"})]}),t.jsxs(P,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-500",children:o.info}),t.jsx("div",{className:"text-xs text-label-tertiary",children:"Info"})]}),t.jsxs(P,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-500",children:o.success}),t.jsx("div",{className:"text-xs text-label-tertiary",children:"Success"})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-label-tertiary",children:"Filter:"}),t.jsxs("select",{value:e,onChange:f=>s(f.target.value),className:"px-3 py-1.5 text-sm rounded-ios bg-fill-secondary text-label-primary border border-separator-light",children:[t.jsx("option",{value:"all",children:"All"}),t.jsx("option",{value:"critical",children:"Critical"}),t.jsx("option",{value:"warning",children:"Warning"}),t.jsx("option",{value:"info",children:"Info"}),t.jsx("option",{value:"success",children:"Success"})]})]}),t.jsxs("label",{className:"flex items-center gap-2 text-sm text-label-secondary cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:r,onChange:f=>n(f.target.checked),className:"rounded"}),"Unread only"]})]}),t.jsx(P,{children:i&&i.length>0?t.jsx("div",{className:"space-y-3",children:i.map(f=>t.jsx(Sj,{notification:f,onMarkRead:g,onDismiss:p},f.id))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx("svg",{className:"w-12 h-12 mx-auto text-label-tertiary mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),t.jsx("h3",{className:"text-lg font-medium text-label-primary mb-1",children:"All caught up!"}),t.jsx("p",{className:"text-label-tertiary",children:"No notifications to display."})]})})]})},Cu={email_enabled:!0,email_recipients:[],email_from_name:null,slack_enabled:!1,slack_webhook_url:null,slack_channel:"#incidents",slack_username:"OsirisCare",slack_icon_emoji:":warning:",pagerduty_enabled:!1,pagerduty_routing_key:null,pagerduty_service_id:null,teams_enabled:!1,teams_webhook_url:null,webhook_enabled:!1,webhook_url:null,webhook_secret:null,webhook_headers:null,escalation_timeout_minutes:60,auto_acknowledge:!1,include_raw_data:!0},xn=({title:e,description:s,icon:r,enabled:n,onToggle:a,onTest:l,testResult:i,children:c})=>t.jsxs(P,{className:"p-6",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-ios flex items-center justify-center ${n?"bg-accent-primary/20 text-accent-primary":"bg-fill-tertiary text-label-tertiary"}`,children:r}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-label-primary",children:e}),t.jsx("p",{className:"text-xs text-label-tertiary",children:s})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[n&&l&&t.jsx("button",{onClick:l,disabled:(i==null?void 0:i.status)==="pending",className:"px-3 py-1.5 text-xs rounded-ios bg-fill-secondary text-label-primary border border-separator-light hover:bg-fill-tertiary transition-colors disabled:opacity-50",children:(i==null?void 0:i.status)==="pending"?"Testing...":"Test"}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:n,onChange:a,className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-fill-tertiary peer-focus:ring-2 peer-focus:ring-accent-primary/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-primary"})]})]})]}),i&&i.status!=="pending"&&t.jsx("div",{className:`mb-4 p-3 rounded-ios text-sm ${i.status==="success"?"bg-green-500/10 text-green-500 border border-green-500/20":"bg-red-500/10 text-red-500 border border-red-500/20"}`,children:i.status==="success"?"Test notification sent successfully!":`Test failed: ${i.message}`}),n&&t.jsx("div",{className:"space-y-4 pt-4 border-t border-separator-light",children:c})]}),kt=({label:e,type:s="text",value:r,onChange:n,placeholder:a,helpText:l,required:i})=>t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:[e," ",i&&t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:s,value:r,onChange:c=>n(c.target.value),placeholder:a,className:"w-full px-3 py-2 text-sm rounded-ios bg-fill-secondary text-label-primary border border-separator-light focus:border-accent-primary focus:ring-1 focus:ring-accent-primary"}),l&&t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:l})]}),Pj=({label:e,values:s,onChange:r,placeholder:n})=>{const[a,l]=v.useState(""),i=o=>{if(o.key==="Enter"||o.key===","){o.preventDefault();const d=a.trim();d&&!s.includes(d)&&(r([...s,d]),l(""))}},c=o=>{r(s.filter((d,u)=>u!==o))};return t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:e}),t.jsxs("div",{className:"flex flex-wrap gap-2 p-2 rounded-ios bg-fill-secondary border border-separator-light min-h-[42px]",children:[s.map((o,d)=>t.jsxs(Ue,{variant:"default",className:"flex items-center gap-1",children:[o,t.jsx("button",{onClick:()=>c(d),className:"ml-1 hover:text-red-500",children:"x"})]},d)),t.jsx("input",{type:"text",value:a,onChange:o=>l(o.target.value),onKeyDown:i,placeholder:s.length===0?n:"",className:"flex-1 min-w-[150px] bg-transparent outline-none text-sm text-label-primary"})]}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Press Enter or comma to add"})]})},Ej=()=>{const[e,s]=v.useState(Cu),[r,n]=v.useState(!0),[a,l]=v.useState(!1),[i,c]=v.useState(null),[o,d]=v.useState({});v.useEffect(()=>{u()},[]);const u=async()=>{try{const p=await fetch("/api/partners/me/notifications/settings",{headers:{"X-API-Key":localStorage.getItem("partner_api_key")||""}});if(p.ok){const j=await p.json();s({...Cu,...j})}}catch(p){console.error("Failed to load notification settings:",p)}finally{n(!1)}},h=async()=>{l(!0),c(null);try{const p=await fetch("/api/partners/me/notifications/settings",{method:"PUT",headers:{"Content-Type":"application/json","X-API-Key":localStorage.getItem("partner_api_key")||""},body:JSON.stringify(e)});if(p.ok)c({type:"success",text:"Settings saved successfully!"});else{const j=await p.text();c({type:"error",text:`Failed to save: ${j}`})}}catch{c({type:"error",text:"Failed to save settings. Please try again."})}finally{l(!1)}},m=async p=>{d(j=>({...j,[p]:{channel:p,status:"pending"}}));try{const w=await(await fetch(`/api/partners/me/notifications/settings/test?channel=${p}`,{method:"POST",headers:{"X-API-Key":localStorage.getItem("partner_api_key")||""}})).json();d(x=>({...x,[p]:{channel:p,status:w.status==="sent"?"success":"failed",message:w.error}}))}catch{d(w=>({...w,[p]:{channel:p,status:"failed",message:"Connection error"}}))}},g=p=>{s(j=>({...j,...p}))};return r?t.jsx("div",{className:"flex items-center justify-center py-24",children:t.jsx(ke,{size:"lg"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-label-primary",children:"Notification Settings"}),t.jsx("p",{className:"text-label-tertiary text-sm mt-1",children:"Configure how you receive L3 escalation alerts"})]}),t.jsx("button",{onClick:h,disabled:a,className:"px-4 py-2 text-sm rounded-ios bg-accent-primary text-white hover:bg-accent-primary/90 transition-colors disabled:opacity-50",children:a?"Saving...":"Save Settings"})]}),i&&t.jsx("div",{className:`p-4 rounded-ios ${i.type==="success"?"bg-green-500/10 text-green-500 border border-green-500/20":"bg-red-500/10 text-red-500 border border-red-500/20"}`,children:i.text}),t.jsxs(xn,{title:"Email",description:"Receive escalation alerts via email",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),enabled:e.email_enabled,onToggle:()=>g({email_enabled:!e.email_enabled}),onTest:()=>m("email"),testResult:o.email,children:[t.jsx(Pj,{label:"Recipients",values:e.email_recipients,onChange:p=>g({email_recipients:p}),placeholder:"Enter email addresses"}),t.jsx(kt,{label:"From Name",value:e.email_from_name||"",onChange:p=>g({email_from_name:p}),placeholder:"OsirisCare Alerts",helpText:"Display name for outgoing emails"})]}),t.jsxs(xn,{title:"Slack",description:"Post escalation alerts to a Slack channel",icon:t.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})}),enabled:e.slack_enabled,onToggle:()=>g({slack_enabled:!e.slack_enabled}),onTest:()=>m("slack"),testResult:o.slack,children:[t.jsx(kt,{label:"Webhook URL",value:e.slack_webhook_url||"",onChange:p=>g({slack_webhook_url:p}),placeholder:"https://hooks.slack.com/services/...",required:!0}),t.jsx(kt,{label:"Channel",value:e.slack_channel||"",onChange:p=>g({slack_channel:p}),placeholder:"#incidents"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(kt,{label:"Bot Username",value:e.slack_username,onChange:p=>g({slack_username:p}),placeholder:"OsirisCare"}),t.jsx(kt,{label:"Icon Emoji",value:e.slack_icon_emoji,onChange:p=>g({slack_icon_emoji:p}),placeholder:":warning:"})]})]}),t.jsxs(xn,{title:"PagerDuty",description:"Create PagerDuty incidents for critical alerts",icon:t.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M9.211 0c-2.06 0-3.801 1.67-3.801 3.73v16.54c0 2.06 1.741 3.73 3.801 3.73h5.578c2.06 0 3.801-1.67 3.801-3.73V3.73C18.59 1.67 16.849 0 14.789 0H9.211zm2.894 5.94a4.04 4.04 0 0 1 4.04 4.04 4.04 4.04 0 0 1-4.04 4.04 4.04 4.04 0 0 1-4.04-4.04 4.04 4.04 0 0 1 4.04-4.04z"})}),enabled:e.pagerduty_enabled,onToggle:()=>g({pagerduty_enabled:!e.pagerduty_enabled}),onTest:()=>m("pagerduty"),testResult:o.pagerduty,children:[t.jsx(kt,{label:"Routing Key",type:"password",value:e.pagerduty_routing_key||"",onChange:p=>g({pagerduty_routing_key:p}),placeholder:"Enter your PagerDuty routing key",helpText:"Events API v2 routing key from your PagerDuty service",required:!0}),t.jsx(kt,{label:"Service ID",value:e.pagerduty_service_id||"",onChange:p=>g({pagerduty_service_id:p}),placeholder:"P123ABC",helpText:"Optional: Service ID for reference"})]}),t.jsx(xn,{title:"Microsoft Teams",description:"Post alerts to a Teams channel",icon:t.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M20.625 8.066h-3.748v7.873h-2.19V8.066H10.94V6.123h9.684v1.943zm-10.59 7.873H8.66v-4.654c0-.93.046-1.547-.098-1.862-.145-.315-.457-.473-.94-.473-.506 0-.867.172-1.082.517-.214.346-.32.84-.32 1.483v4.989H4.846V8.066h1.282v.986c.368-.397.72-.685 1.056-.862.335-.176.744-.265 1.227-.265.774 0 1.377.232 1.808.696.432.464.647 1.144.647 2.039v5.279H10.035z"})}),enabled:e.teams_enabled,onToggle:()=>g({teams_enabled:!e.teams_enabled}),onTest:()=>m("teams"),testResult:o.teams,children:t.jsx(kt,{label:"Webhook URL",value:e.teams_webhook_url||"",onChange:p=>g({teams_webhook_url:p}),placeholder:"https://outlook.office.com/webhook/...",helpText:"Incoming webhook URL from your Teams channel connector",required:!0})}),t.jsxs(xn,{title:"Webhook",description:"Send alerts to a custom webhook (PSA/RMM integration)",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),enabled:e.webhook_enabled,onToggle:()=>g({webhook_enabled:!e.webhook_enabled}),onTest:()=>m("webhook"),testResult:o.webhook,children:[t.jsx(kt,{label:"Webhook URL",value:e.webhook_url||"",onChange:p=>g({webhook_url:p}),placeholder:"https://your-psa.com/api/webhook",required:!0}),t.jsx(kt,{label:"Signing Secret",type:"password",value:e.webhook_secret||"",onChange:p=>g({webhook_secret:p}),placeholder:"Optional HMAC signing secret",helpText:"If provided, requests will include X-OsirisCare-Signature header"})]}),t.jsxs(P,{className:"p-6",children:[t.jsx("h3",{className:"font-medium text-label-primary mb-4",children:"Escalation Behavior"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Escalation Timeout (minutes)"}),t.jsx("input",{type:"number",min:5,max:1440,value:e.escalation_timeout_minutes,onChange:p=>g({escalation_timeout_minutes:parseInt(p.target.value)||60}),className:"w-32 px-3 py-2 text-sm rounded-ios bg-fill-secondary text-label-primary border border-separator-light"}),t.jsx("p",{className:"text-xs text-label-tertiary mt-1",children:"Re-notify if not acknowledged within this time"})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:e.auto_acknowledge,onChange:p=>g({auto_acknowledge:p.target.checked}),className:"w-4 h-4 rounded border-separator-light text-accent-primary focus:ring-accent-primary/30"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-label-primary",children:"Auto-acknowledge"}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Automatically mark tickets as acknowledged when notification is sent"})]})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:e.include_raw_data,onChange:p=>g({include_raw_data:p.target.checked}),className:"w-4 h-4 rounded border-separator-light text-accent-primary focus:ring-accent-primary/30"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-label-primary",children:"Include raw data"}),t.jsx("p",{className:"text-xs text-label-tertiary",children:"Include full incident data in webhook payloads"})]})]})]})]})]})},Lj=()=>{const[e,s]=v.useState("all"),{data:r=[],isLoading:n,error:a}=Hc({limit:100}),l=r.filter(o=>e==="active"?!o.resolved:e==="resolved"?o.resolved:!0),i=r.filter(o=>!o.resolved).length,c=r.filter(o=>o.resolved).length;return t.jsx("div",{className:"space-y-6",children:t.jsxs(P,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold text-label-primary",children:"All Incidents"}),t.jsxs("p",{className:"text-sm text-label-tertiary mt-1",children:[r.length," total incidents"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>s("all"),className:`px-3 py-1.5 text-sm rounded-ios-md transition-colors ${e==="all"?"bg-accent-primary text-white":"bg-fill-tertiary text-label-secondary hover:bg-fill-secondary"}`,children:["All (",r.length,")"]}),t.jsxs("button",{onClick:()=>s("active"),className:`px-3 py-1.5 text-sm rounded-ios-md transition-colors ${e==="active"?"bg-health-warning text-white":"bg-fill-tertiary text-label-secondary hover:bg-fill-secondary"}`,children:["Active (",i,")"]}),t.jsxs("button",{onClick:()=>s("resolved"),className:`px-3 py-1.5 text-sm rounded-ios-md transition-colors ${e==="resolved"?"bg-health-healthy text-white":"bg-fill-tertiary text-label-secondary hover:bg-fill-secondary"}`,children:["Resolved (",c,")"]})]})]}),a&&t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-health-critical",children:a.message})}),n&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-8 h-8 border-2 border-accent-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-label-tertiary",children:"Loading incidents..."})]}),!n&&!a&&l.length===0&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-health-healthy mb-2",children:t.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsx("p",{className:"text-label-secondary",children:"No incidents to display"}),t.jsx("p",{className:"text-label-tertiary text-sm mt-1",children:e!=="all"?"Try adjusting your filter":"All systems operating normally"})]}),!n&&!a&&l.length>0&&t.jsx("div",{className:"space-y-2",children:l.map(o=>t.jsx(Wc,{incident:o,compact:!1,onClick:()=>console.log("View incident",o.id)},o.id))})]})})};function Ox(e){return e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Never"}const Dx=({role:e})=>{const s={admin:"error",operator:"warning",readonly:"default"};return t.jsx(Ue,{variant:s[e]||"default",children:e})},Fx=({status:e})=>{const s={active:"success",disabled:"error",pending:"warning",expired:"default",revoked:"default"};return t.jsx(Ue,{variant:s[e]||"default",children:e})},Aj=({user:e,currentUserId:s,onEdit:r,onToggleStatus:n,onDelete:a,onResetPassword:l})=>{const i=e.id===s;return t.jsxs("tr",{className:"hover:bg-fill-tertiary/50 transition-colors",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-accent-primary flex items-center justify-center text-white font-bold text-sm",children:(e.display_name||e.username).charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium text-label-primary",children:[e.display_name||e.username,i&&t.jsx("span",{className:"text-xs text-label-tertiary ml-2",children:"(you)"})]}),t.jsx("p",{className:"text-xs text-label-tertiary",children:e.username})]})]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-label-secondary",children:e.email||"-"}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(Dx,{role:e.role})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(Fx,{status:e.status})}),t.jsx("td",{className:"px-4 py-3 text-sm text-label-tertiary",children:Ox(e.last_login)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>r(e),className:"text-xs text-accent-primary hover:underline",children:"Edit"}),t.jsx("button",{onClick:()=>l(e),className:"text-xs text-label-secondary hover:text-label-primary",children:"Reset Password"}),!i&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>n(e),className:`text-xs ${e.status==="active"?"text-yellow-500":"text-green-500"} hover:underline`,children:e.status==="active"?"Disable":"Enable"}),t.jsx("button",{onClick:()=>a(e),className:"text-xs text-red-500 hover:underline",children:"Delete"})]})]})})]})},Rj=({invite:e,onResend:s,onRevoke:r})=>{const n=new Date(e.expires_at)<new Date;return t.jsxs("tr",{className:"hover:bg-fill-tertiary/50 transition-colors",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-label-primary",children:e.email}),e.display_name&&t.jsx("p",{className:"text-xs text-label-tertiary",children:e.display_name})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(Dx,{role:e.role})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(Fx,{status:n?"expired":e.status})}),t.jsx("td",{className:"px-4 py-3 text-sm text-label-tertiary",children:e.invited_by_name||"Unknown"}),t.jsx("td",{className:"px-4 py-3 text-sm text-label-tertiary",children:Ox(e.expires_at)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>s(e),className:"text-xs text-accent-primary hover:underline",children:"Resend"}),t.jsx("button",{onClick:()=>r(e),className:"text-xs text-red-500 hover:underline",children:"Revoke"})]})})]})},Mj=({isOpen:e,onClose:s,onSubmit:r,isLoading:n,error:a})=>{const[l,i]=v.useState(""),[c,o]=v.useState("operator"),[d,u]=v.useState("");if(!e)return null;const h=m=>{m.preventDefault(),r({email:l,role:c,display_name:d||void 0})};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(P,{className:"w-full max-w-md",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Invite User"}),t.jsxs("form",{onSubmit:h,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Email Address *"}),t.jsx("input",{type:"email",value:l,onChange:m=>i(m.target.value),className:"w-full px-3 py-2 bg-fill-secondary border border-separator-default rounded-lg text-label-primary focus:outline-none focus:border-accent-primary",placeholder:"user@example.com",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Display Name"}),t.jsx("input",{type:"text",value:d,onChange:m=>u(m.target.value),className:"w-full px-3 py-2 bg-fill-secondary border border-separator-default rounded-lg text-label-primary focus:outline-none focus:border-accent-primary",placeholder:"John Doe"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Role *"}),t.jsxs("select",{value:c,onChange:m=>o(m.target.value),className:"w-full px-3 py-2 bg-fill-secondary border border-separator-default rounded-lg text-label-primary focus:outline-none focus:border-accent-primary",children:[t.jsx("option",{value:"admin",children:"Admin - Full access including user management"}),t.jsx("option",{value:"operator",children:"Operator - View and execute actions"}),t.jsx("option",{value:"readonly",children:"Readonly - View only access"})]})]}),a&&t.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm",children:a}),t.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-label-secondary hover:text-label-primary transition-colors",disabled:n,children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-accent-primary text-white rounded-lg hover:bg-accent-primary/90 transition-colors disabled:opacity-50",disabled:n||!l,children:n?t.jsx(ke,{size:"sm"}):"Send Invite"})]})]})]})})},Tj=({user:e,onClose:s,onSubmit:r,isLoading:n,error:a})=>{const[l,i]=v.useState((e==null?void 0:e.role)||"operator"),[c,o]=v.useState((e==null?void 0:e.display_name)||"");if(v.useEffect(()=>{e&&(i(e.role),o(e.display_name||""))},[e]),!e)return null;const d=u=>{u.preventDefault(),r(e.id,{role:l!==e.role?l:void 0,display_name:c!==e.display_name?c:void 0})};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(P,{className:"w-full max-w-md",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Edit User"}),t.jsxs("form",{onSubmit:d,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Username"}),t.jsx("input",{type:"text",value:e.username,disabled:!0,className:"w-full px-3 py-2 bg-fill-tertiary border border-separator-default rounded-lg text-label-tertiary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Display Name"}),t.jsx("input",{type:"text",value:c,onChange:u=>o(u.target.value),className:"w-full px-3 py-2 bg-fill-secondary border border-separator-default rounded-lg text-label-primary focus:outline-none focus:border-accent-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Role"}),t.jsxs("select",{value:l,onChange:u=>i(u.target.value),className:"w-full px-3 py-2 bg-fill-secondary border border-separator-default rounded-lg text-label-primary focus:outline-none focus:border-accent-primary",children:[t.jsx("option",{value:"admin",children:"Admin"}),t.jsx("option",{value:"operator",children:"Operator"}),t.jsx("option",{value:"readonly",children:"Readonly"})]})]}),a&&t.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm",children:a}),t.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-label-secondary hover:text-label-primary transition-colors",disabled:n,children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-accent-primary text-white rounded-lg hover:bg-accent-primary/90 transition-colors disabled:opacity-50",disabled:n,children:n?t.jsx(ke,{size:"sm"}):"Save Changes"})]})]})]})})},Ij=({user:e,onClose:s,onSubmit:r,isLoading:n,error:a})=>{const[l,i]=v.useState(""),[c,o]=v.useState("");if(!e)return null;const d=m=>{m.preventDefault(),l===c&&r(e.id,l)},u=l===c,h=l.length>=8;return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(P,{className:"w-full max-w-md",children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Reset Password for ",e.display_name||e.username]}),t.jsxs("form",{onSubmit:d,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"New Password *"}),t.jsx("input",{type:"password",value:l,onChange:m=>i(m.target.value),className:"w-full px-3 py-2 bg-fill-secondary border border-separator-default rounded-lg text-label-primary focus:outline-none focus:border-accent-primary",placeholder:"Minimum 8 characters",required:!0}),l&&!h&&t.jsx("p",{className:"text-xs text-red-400 mt-1",children:"Password must be at least 8 characters"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Confirm Password *"}),t.jsx("input",{type:"password",value:c,onChange:m=>o(m.target.value),className:"w-full px-3 py-2 bg-fill-secondary border border-separator-default rounded-lg text-label-primary focus:outline-none focus:border-accent-primary",required:!0}),c&&!u&&t.jsx("p",{className:"text-xs text-red-400 mt-1",children:"Passwords do not match"})]}),a&&t.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm",children:a}),t.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-label-secondary hover:text-label-primary transition-colors",disabled:n,children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-accent-primary text-white rounded-lg hover:bg-accent-primary/90 transition-colors disabled:opacity-50",disabled:n||!h||!u,children:n?t.jsx(ke,{size:"sm"}):"Reset Password"})]})]})]})})};function Oj(){const[e,s]=v.useState("users"),[r,n]=v.useState([]),[a,l]=v.useState([]),[i,c]=v.useState(!0),[o,d]=v.useState(null),[u,h]=v.useState(!1),[m,g]=v.useState(null),[p,j]=v.useState(null),[w,x]=v.useState(!1),[f,y]=v.useState(null),N=ne.useMemo(()=>{try{return JSON.parse(localStorage.getItem("user")||"{}").id||""}catch{return""}},[]),k=async()=>{c(!0),d(null);try{const[E,U]=await Promise.all([mt.getUsers(),mt.getInvites()]);n(E),l(U)}catch(E){d(E instanceof Error?E.message:"Failed to load users")}finally{c(!1)}};v.useEffect(()=>{k()},[]);const S=async E=>{x(!0),y(null);try{await mt.inviteUser(E),h(!1),k()}catch(U){y(U instanceof Error?U.message:"Failed to send invite")}finally{x(!1)}},C=async(E,U)=>{x(!0),y(null);try{await mt.updateUser(E,U),g(null),k()}catch(te){y(te instanceof Error?te.message:"Failed to update user")}finally{x(!1)}},_=async E=>{if(confirm(`Are you sure you want to ${E.status==="active"?"disable":"enable"} ${E.display_name||E.username}?`))try{await mt.updateUser(E.id,{status:E.status==="active"?"disabled":"active"}),k()}catch(U){d(U instanceof Error?U.message:"Failed to update user status")}},R=async E=>{if(confirm(`Are you sure you want to delete ${E.display_name||E.username}? This cannot be undone.`))try{await mt.deleteUser(E.id),k()}catch(U){d(U instanceof Error?U.message:"Failed to delete user")}},L=async(E,U)=>{x(!0),y(null);try{await mt.adminResetPassword(E,U),j(null),alert("Password reset successfully")}catch(te){y(te instanceof Error?te.message:"Failed to reset password")}finally{x(!1)}},D=async E=>{try{await mt.resendInvite(E.id),alert("Invite resent successfully"),k()}catch(U){d(U instanceof Error?U.message:"Failed to resend invite")}},F=async E=>{if(confirm(`Are you sure you want to revoke the invite for ${E.email}?`))try{await mt.revokeInvite(E.id),k()}catch(U){d(U instanceof Error?U.message:"Failed to revoke invite")}};return i?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(ke,{})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-label-primary",children:"User Management"}),t.jsx("p",{className:"text-label-tertiary mt-1",children:"Manage admin users and role-based access control"})]}),t.jsxs("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-accent-primary text-white rounded-lg hover:bg-accent-primary/90 transition-colors flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Invite User"]})]}),o&&t.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400",children:o}),t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsxs(P,{className:"p-4",children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"Total Users"}),t.jsx("p",{className:"text-2xl font-bold text-label-primary",children:r.length})]}),t.jsxs(P,{className:"p-4",children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"Active"}),t.jsx("p",{className:"text-2xl font-bold text-green-400",children:r.filter(E=>E.status==="active").length})]}),t.jsxs(P,{className:"p-4",children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"Admins"}),t.jsx("p",{className:"text-2xl font-bold text-purple-400",children:r.filter(E=>E.role==="admin").length})]}),t.jsxs(P,{className:"p-4",children:[t.jsx("p",{className:"text-label-tertiary text-sm",children:"Pending Invites"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:a.length})]})]}),t.jsxs("div",{className:"flex gap-1 bg-fill-secondary p-1 rounded-lg w-fit",children:[t.jsxs("button",{onClick:()=>s("users"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e==="users"?"bg-accent-primary text-white":"text-label-secondary hover:text-label-primary"}`,children:["Users (",r.length,")"]}),t.jsxs("button",{onClick:()=>s("invites"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e==="invites"?"bg-accent-primary text-white":"text-label-secondary hover:text-label-primary"}`,children:["Pending Invites (",a.length,")"]})]}),t.jsx(P,{children:e==="users"?t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-default",children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-label-tertiary",children:"User"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-label-tertiary",children:"Email"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-label-tertiary",children:"Role"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-label-tertiary",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-label-tertiary",children:"Last Login"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-label-tertiary",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-separator-default",children:r.map(E=>t.jsx(Aj,{user:E,currentUserId:N,onEdit:g,onToggleStatus:_,onDelete:R,onResetPassword:j},E.id))})]}):t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-separator-default",children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-label-tertiary",children:"Email"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-label-tertiary",children:"Role"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-label-tertiary",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-label-tertiary",children:"Invited By"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-label-tertiary",children:"Expires"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-label-tertiary",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-separator-default",children:a.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-label-tertiary",children:"No pending invites"})}):a.map(E=>t.jsx(Rj,{invite:E,onResend:D,onRevoke:F},E.id))})]})}),t.jsx(Mj,{isOpen:u,onClose:()=>{h(!1),y(null)},onSubmit:S,isLoading:w,error:f}),t.jsx(Tj,{user:m,onClose:()=>{g(null),y(null)},onSubmit:C,isLoading:w,error:f}),t.jsx(Ij,{user:p,onClose:()=>{j(null),y(null)},onSubmit:L,isLoading:w,error:f})]})}const Dj={hipaa:"HIPAA",soc2:"SOC 2",pci_dss:"PCI DSS",nist_csf:"NIST CSF",cis:"CIS Controls"},Fj={hipaa:"blue",soc2:"purple",pci_dss:"green",nist_csf:"orange",cis:"teal"},zj=["hipaa","soc2","pci_dss","nist_csf","cis"],Su=[{value:"healthcare",label:"Healthcare",primary:"hipaa"},{value:"technology",label:"Technology / SaaS",primary:"soc2"},{value:"retail",label:"Retail / E-commerce",primary:"pci_dss"},{value:"finance",label:"Financial Services",primary:"soc2"},{value:"government",label:"Government",primary:"nist_csf"},{value:"general",label:"General / Other",primary:"nist_csf"}];function $j({framework:e,enabled:s,isPrimary:r,score:n,metadata:a,onToggle:l,onSetPrimary:i}){const c=Fj[e];return t.jsxs("div",{className:`bg-gray-800 rounded-lg p-4 border-2 transition-all ${s?`border-${c}-500`:"border-gray-700"} ${r?"ring-2 ring-yellow-500":""}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[Dj[e],r&&t.jsx("span",{className:"text-xs bg-yellow-500 text-black px-2 py-0.5 rounded",children:"Primary"})]}),a&&t.jsx("p",{className:"text-sm text-gray-400",children:a.version})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s,onChange:l}),t.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),a&&t.jsx("p",{className:"text-sm text-gray-400 mb-3",children:a.description}),n&&s&&t.jsxs("div",{className:"mb-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Compliance Score"}),t.jsxs("span",{className:`text-lg font-bold ${n.is_compliant?"text-green-400":n.at_risk?"text-red-400":"text-yellow-400"}`,children:[n.score_percentage.toFixed(1),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full ${n.is_compliant?"bg-green-500":n.at_risk?"bg-red-500":"bg-yellow-500"}`,style:{width:`${n.score_percentage}%`}})}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[t.jsxs("span",{children:[n.passing_controls," passing"]}),t.jsxs("span",{children:[n.failing_controls," failing"]}),t.jsxs("span",{children:[n.unknown_controls," unknown"]})]})]}),s&&!r&&t.jsx("button",{onClick:i,className:"text-sm text-blue-400 hover:text-blue-300",children:"Set as primary"})]})}function Uj(){const{siteId:e}=Yt(),[s,r]=v.useState([]),[n,a]=v.useState(null),[l,i]=v.useState(null),[c,o]=v.useState([]),[d,u]=v.useState(null),[h,m]=v.useState(!0),[g,p]=v.useState(!1),[j,w]=v.useState(null),[x,f]=v.useState(null);v.useEffect(()=>{async function C(){if(e)try{m(!0);const[_,R]=await Promise.all([ia.getAppliances(e),Pa.getMetadata()]);r(_.appliances),u(R.frameworks||R),_.appliances.length>0&&a(_.appliances[0].appliance_id)}catch(_){w(_ instanceof Error?_.message:"Failed to load data")}finally{m(!1)}}C()},[e]),v.useEffect(()=>{async function C(){if(n)try{const[_,R]=await Promise.all([Pa.getConfig(n).catch(()=>null),Pa.getScores(n).catch(()=>[])]);i(_||{appliance_id:n,site_id:e||"",enabled_frameworks:["hipaa"],primary_framework:"hipaa",industry:"healthcare",framework_metadata:{},created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),o(R)}catch(_){console.error("Failed to load appliance config:",_)}}C()},[n,e]);const y=C=>{if(!l)return;const _=l.enabled_frameworks.includes(C);let R;if(_){if(C===l.primary_framework){w("Cannot disable the primary framework. Set a different primary first.");return}R=l.enabled_frameworks.filter(L=>L!==C)}else R=[...l.enabled_frameworks,C];i({...l,enabled_frameworks:R}),w(null)},N=C=>{if(!l)return;const _=l.enabled_frameworks.includes(C)?l.enabled_frameworks:[...l.enabled_frameworks,C];i({...l,enabled_frameworks:_,primary_framework:C})},k=C=>{if(!l)return;const _=Su.find(D=>D.value===C),R=(_==null?void 0:_.primary)||"nist_csf",L=l.enabled_frameworks.includes(R)?l.enabled_frameworks:[...l.enabled_frameworks,R];i({...l,industry:C,enabled_frameworks:L,primary_framework:R})},S=async()=>{if(!(!l||!n))try{p(!0),w(null),await Pa.updateConfig(n,{enabled_frameworks:l.enabled_frameworks,primary_framework:l.primary_framework,industry:l.industry,framework_metadata:l.framework_metadata}),f("Framework configuration saved successfully"),setTimeout(()=>f(null),3e3)}catch(C){w(C instanceof Error?C.message:"Failed to save configuration")}finally{p(!1)}};return h?t.jsx("div",{className:"min-h-screen bg-gray-900 p-6 flex items-center justify-center",children:t.jsx("div",{className:"text-gray-400",children:"Loading..."})}):t.jsx("div",{className:"min-h-screen bg-gray-900 p-6",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx(Re,{to:`/sites/${e}`,className:"text-blue-400 hover:text-blue-300 text-sm mb-2 inline-block",children:"Back to Site"}),t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Multi-Framework Compliance Configuration"}),t.jsx("p",{className:"text-gray-400 mt-1",children:"Configure which compliance frameworks this appliance reports against. One check can satisfy controls across multiple frameworks."})]}),j&&t.jsx("div",{className:"bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded mb-4",children:j}),x&&t.jsx("div",{className:"bg-green-900/50 border border-green-500 text-green-200 px-4 py-3 rounded mb-4",children:x}),s.length>1&&t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Select Appliance"}),t.jsx("select",{value:n||"",onChange:C=>a(C.target.value),className:"bg-gray-800 border border-gray-600 text-white rounded-lg px-4 py-2 w-full max-w-md",children:s.map(C=>t.jsx("option",{value:C.appliance_id,children:C.hostname||C.appliance_id},C.appliance_id))})]}),l&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Industry"}),t.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Select your industry to get recommended frameworks and set the primary framework."}),t.jsx("select",{value:l.industry,onChange:C=>k(C.target.value),className:"bg-gray-700 border border-gray-600 text-white rounded-lg px-4 py-2 w-full max-w-md",children:Su.map(C=>t.jsx("option",{value:C.value,children:C.label},C.value))})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:zj.map(C=>t.jsx($j,{framework:C,enabled:l.enabled_frameworks.includes(C),isPrimary:l.primary_framework===C,score:c.find(_=>_.framework===C),metadata:d==null?void 0:d[C],onToggle:()=>y(C),onSetPrimary:()=>N(C)},C))}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:S,disabled:g,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 disabled:cursor-not-allowed text-white font-medium px-6 py-2 rounded-lg transition-colors",children:g?"Saving...":"Save Configuration"})})]}),s.length===0&&t.jsx("div",{className:"text-center text-gray-400 py-12",children:"No appliances found for this site. Deploy an appliance first to configure frameworks."})]})})}function zx({provider:e,size:s=24}){const r=Wt[e];return t.jsx("div",{className:"flex items-center justify-center rounded-lg",style:{width:s+8,height:s+8,backgroundColor:r.color+"20"},children:t.jsx("span",{className:"font-bold text-sm",style:{color:r.color},children:e==="aws"?"AWS":e==="google_workspace"?"G":e==="okta"?"O":"M"})})}function Bj({status:e}){const s={active:{label:"Active",color:"#16A34A",bgColor:"#DCFCE7"},pending_oauth:{label:"Pending OAuth",color:"#CA8A04",bgColor:"#FEF3C7"},error:{label:"Error",color:"#DC2626",bgColor:"#FEE2E2"},paused:{label:"Paused",color:"#6B7280",bgColor:"#F3F4F6"},disconnected:{label:"Disconnected",color:"#9CA3AF",bgColor:"#F3F4F6"}},r=s[e]||s.disconnected;return t.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full",style:{color:r.color,backgroundColor:r.bgColor},children:r.label})}function Hj({health:e}){const s={healthy:{label:"Healthy",color:"#16A34A",bgColor:"#DCFCE7"},warning:{label:"Warning",color:"#CA8A04",bgColor:"#FEF3C7"},critical:{label:"Critical",color:"#DC2626",bgColor:"#FEE2E2"},error:{label:"Error",color:"#9CA3AF",bgColor:"#F3F4F6"}},r=s[e.status]||s.error;return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full",style:{color:r.color,backgroundColor:r.bgColor},children:r.label}),e.critical_count>0&&t.jsxs("span",{className:"text-xs text-red-400",children:[e.critical_count," critical"]}),e.high_count>0&&t.jsxs("span",{className:"text-xs text-orange-400",children:[e.high_count," high"]})]})}function Wj({integration:e,siteId:s,onSync:r,onDelete:n,syncing:a}){const[l,i]=v.useState(!1),c=Wt[e.provider],o=d=>d?new Date(d).toLocaleString():"Never";return t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 hover:border-gray-600 transition-colors",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(zx,{provider:e.provider}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:e.name}),t.jsx("p",{className:"text-sm text-gray-400",children:c.name})]})]}),t.jsx(Bj,{status:e.status})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Resources"}),t.jsx("p",{className:"text-lg font-semibold text-white",children:e.resource_count})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Health"}),t.jsx(Hj,{health:e.health})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Last Sync"}),t.jsx("p",{className:"text-sm text-gray-300",children:o(e.last_sync)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Next Sync"}),t.jsx("p",{className:"text-sm text-gray-300",children:o(e.next_sync)})]})]}),e.health.last_error&&t.jsx("div",{className:"mb-4 p-2 bg-red-900/20 border border-red-800 rounded text-sm text-red-400",children:e.health.last_error}),t.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-700",children:[t.jsx(Re,{to:`/sites/${s}/integrations/${e.id}`,className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"View Resources"}),t.jsx("button",{onClick:r,disabled:a||e.status!=="active",className:"px-3 py-1.5 text-sm bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Syncing...":"Sync Now"}),l?t.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[t.jsx("span",{className:"text-sm text-gray-400",children:"Confirm?"}),t.jsx("button",{onClick:n,className:"px-2 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Yes"}),t.jsx("button",{onClick:()=>i(!1),className:"px-2 py-1 text-sm bg-gray-600 text-white rounded hover:bg-gray-500",children:"No"})]}):t.jsx("button",{onClick:()=>i(!0),className:"px-3 py-1.5 text-sm text-red-400 hover:text-red-300 transition-colors ml-auto",children:"Delete"})]})]})}function Vj({siteId:e}){const{data:s,isLoading:r}=lv(e);if(r||!s)return null;const n={healthy:"text-green-400",warning:"text-yellow-400",critical:"text-red-400"};return t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 mb-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-400",children:"Overall Status"}),t.jsx("p",{className:`text-xl font-bold ${n[s.overall_status]||"text-gray-400"}`,children:s.overall_status.charAt(0).toUpperCase()+s.overall_status.slice(1)})]}),t.jsx("div",{className:"h-10 w-px bg-gray-700"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-400",children:"Integrations"}),t.jsx("p",{className:"text-xl font-bold text-white",children:s.total_integrations})]})]}),t.jsxs("div",{className:"flex items-center gap-6",children:[s.total_critical>0&&t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-red-400",children:s.total_critical}),t.jsx("p",{className:"text-xs text-gray-400",children:"Critical"})]}),s.total_high>0&&t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-orange-400",children:s.total_high}),t.jsx("p",{className:"text-xs text-gray-400",children:"High"})]})]})]})})}function Qj({siteId:e}){return t.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 border border-gray-700 text-center",children:[t.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("h3",{className:"mt-4 text-lg font-medium text-white",children:"No cloud integrations"}),t.jsx("p",{className:"mt-2 text-gray-400",children:"Connect your cloud accounts to collect compliance evidence automatically."}),t.jsxs(Re,{to:`/sites/${e}/integrations/setup`,className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Integration"]})]})}function Kj(){const{siteId:e}=Yt(),[s,r]=v.useState(null),{data:n,isLoading:a,error:l}=ev(e||null),i=Tx(),c=rv();if(!e)return t.jsx("div",{className:"p-6 text-center text-gray-400",children:"Please select a site to view integrations."});const o=async u=>{r(u);try{await i.mutateAsync({siteId:e,integrationId:u})}catch(h){console.error("Sync failed:",h)}finally{r(null)}},d=async u=>{try{await c.mutateAsync({siteId:e,integrationId:u})}catch(h){console.error("Delete failed:",h)}};return t.jsxs("div",{className:"min-h-screen bg-gray-900 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1",children:[t.jsx(Re,{to:"/sites",className:"hover:text-white",children:"Sites"}),t.jsx("span",{children:"/"}),t.jsx(Re,{to:`/sites/${e}`,className:"hover:text-white",children:e}),t.jsx("span",{children:"/"}),t.jsx("span",{className:"text-white",children:"Integrations"})]}),t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Cloud Integrations"}),t.jsx("p",{className:"text-gray-400 mt-1",children:"Connect cloud accounts to collect compliance evidence"})]}),t.jsxs(Re,{to:`/sites/${e}/integrations/setup`,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Integration"]})]}),t.jsx(Vj,{siteId:e}),l&&t.jsx("div",{className:"bg-red-900/20 border border-red-800 rounded-lg p-4 mb-6",children:t.jsxs("p",{className:"text-red-400",children:["Failed to load integrations: ",l.message]})}),a&&t.jsx("div",{className:"flex items-center justify-center p-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),!a&&(n==null?void 0:n.length)===0&&t.jsx(Qj,{siteId:e}),!a&&n&&n.length>0&&t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(u=>t.jsx(Wj,{integration:u,siteId:e,onSync:()=>o(u.id),onDelete:()=>d(u.id),syncing:s===u.id},u.id))}),t.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-800",children:[t.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Supported Providers"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(Wt).map(([u,h])=>t.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(zx,{provider:u,size:20}),t.jsx("span",{className:"font-medium text-white",children:h.name})]}),t.jsx("p",{className:"text-xs text-gray-400",children:h.description})]},u))})]})]})}function qj({provider:e,selected:s,onSelect:r}){const n=Wt[e];return t.jsxs("button",{onClick:r,className:`text-left p-4 rounded-lg border-2 transition-all ${s?"border-blue-500 bg-blue-500/10":"border-gray-700 bg-gray-800 hover:border-gray-600"}`,children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center font-bold",style:{backgroundColor:n.color+"20",color:n.color},children:e==="aws"?"AWS":e==="google_workspace"?"G":e==="okta"?"O":"M"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-white",children:n.name}),t.jsx("span",{className:"text-xs text-gray-400",children:n.setupType==="oauth"?"OAuth 2.0":"IAM Role"})]})]}),t.jsx("p",{className:"text-sm text-gray-400",children:n.description})]})}function Gj({values:e,onChange:s,onGenerateExternalId:r,generatingId:n}){const{data:a}=iv(),[l,i]=v.useState(!1);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Integration Name *"}),t.jsx("input",{type:"text",value:e.name||"",onChange:c=>s("name",c.target.value),placeholder:"e.g., Production AWS Account",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"IAM Role ARN *"}),t.jsx("input",{type:"text",value:e.aws_role_arn||"",onChange:c=>s("aws_role_arn",c.target.value),placeholder:"arn:aws:iam::123456789012:role/OsirisCareAuditRole",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The ARN of the IAM role we will assume to access your AWS account"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"External ID *"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:e.aws_external_id||"",onChange:c=>s("aws_external_id",c.target.value),placeholder:"Click 'Generate' to create a secure ID",className:"flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"}),t.jsx("button",{type:"button",onClick:r,disabled:n,className:"px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-500 disabled:opacity-50",children:n?"Generating...":"Generate"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"A unique ID to prevent confused deputy attacks. Include this in your role's trust policy."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Regions (comma-separated)"}),t.jsx("input",{type:"text",value:(e.aws_regions||["us-east-1"]).join(", "),onChange:c=>s("aws_regions",c.target.value.split(",").map(o=>o.trim()).filter(Boolean)),placeholder:"us-east-1, us-west-2",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[t.jsxs("button",{type:"button",onClick:()=>i(!l),className:"text-blue-400 hover:text-blue-300 text-sm flex items-center gap-1",children:[l?"Hide":"Show"," IAM Role Setup Instructions",t.jsx("svg",{className:`w-4 h-4 transition-transform ${l?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&a&&t.jsxs("div",{className:"mt-4 space-y-4",children:[t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[t.jsx("h4",{className:"font-medium text-white mb-2",children:"Setup Instructions"}),t.jsx("pre",{className:"text-xs text-gray-300 whitespace-pre-wrap overflow-x-auto",children:a.instructions})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-medium text-white",children:"CloudFormation Template"}),t.jsx("button",{type:"button",onClick:()=>navigator.clipboard.writeText(a.cloudformation_template.replace("YOUR_EXTERNAL_ID_HERE",e.aws_external_id||"YOUR_EXTERNAL_ID_HERE")),className:"text-xs text-blue-400 hover:text-blue-300",children:"Copy"})]}),t.jsx("pre",{className:"text-xs text-gray-300 overflow-x-auto max-h-48 overflow-y-auto bg-gray-900 p-2 rounded",children:a.cloudformation_template.replace("YOUR_EXTERNAL_ID_HERE",e.aws_external_id||"YOUR_EXTERNAL_ID_HERE")})]})]})]})]})}function Xj({provider:e,values:s,onChange:r}){const n=Wt[e];return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Integration Name *"}),t.jsx("input",{type:"text",value:s.name||"",onChange:a=>r("name",a.target.value),placeholder:`e.g., ${n.name} Production`,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"OAuth Client ID *"}),t.jsx("input",{type:"text",value:s.oauth_client_id||"",onChange:a=>r("oauth_client_id",a.target.value),placeholder:"Client ID from your OAuth app",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"OAuth Client Secret *"}),t.jsx("input",{type:"password",value:s.oauth_client_secret||"",onChange:a=>r("oauth_client_secret",a.target.value),placeholder:"Client secret from your OAuth app",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e==="azure_ad"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Tenant ID *"}),t.jsx("input",{type:"text",value:s.oauth_tenant_id||"",onChange:a=>r("oauth_tenant_id",a.target.value),placeholder:"Azure AD tenant ID (GUID)",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"})]}),e==="okta"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Okta Domain *"}),t.jsx("input",{type:"text",value:s.okta_domain||"",onChange:a=>r("okta_domain",a.target.value),placeholder:"yourcompany.okta.com",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e==="google_workspace"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Customer ID (optional)"}),t.jsx("input",{type:"text",value:s.google_customer_id||"",onChange:a=>r("google_customer_id",a.target.value),placeholder:"my_customer (default)",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave blank to use "my_customer" which refers to your own domain'})]}),t.jsxs("div",{className:"p-4 bg-blue-900/20 border border-blue-800 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-blue-400 mb-2",children:"OAuth App Setup"}),t.jsxs("p",{className:"text-sm text-gray-300",children:[e==="google_workspace"&&t.jsxs(t.Fragment,{children:["Create an OAuth app in the Google Cloud Console with the Admin SDK API enabled. Required scopes: ",t.jsx("code",{className:"text-xs bg-gray-800 px-1 rounded",children:"admin.directory.user.readonly"}),","," ",t.jsx("code",{className:"text-xs bg-gray-800 px-1 rounded",children:"admin.directory.group.readonly"})]}),e==="azure_ad"&&t.jsxs(t.Fragment,{children:["Register an application in Azure AD with the Microsoft Graph API permissions. Required permissions: ",t.jsx("code",{className:"text-xs bg-gray-800 px-1 rounded",children:"User.Read.All"}),","," ",t.jsx("code",{className:"text-xs bg-gray-800 px-1 rounded",children:"Group.Read.All"}),","," ",t.jsx("code",{className:"text-xs bg-gray-800 px-1 rounded",children:"Policy.Read.All"})]}),e==="okta"&&t.jsxs(t.Fragment,{children:["Create an OAuth app in your Okta Admin Console with the Okta API scopes. Required scopes: ",t.jsx("code",{className:"text-xs bg-gray-800 px-1 rounded",children:"okta.users.read"}),","," ",t.jsx("code",{className:"text-xs bg-gray-800 px-1 rounded",children:"okta.groups.read"})]})]})]})]})}function Yj(){const{siteId:e}=Yt(),s=Ce(),[r,n]=v.useState("provider"),[a,l]=v.useState(null),[i,c]=v.useState({}),[o,d]=v.useState(null),u=sv(),h=ov();if(!e)return t.jsx("div",{className:"p-6 text-gray-400",children:"Site ID required"});const m=x=>{l(x),c({provider:x,aws_regions:["us-east-1"]})},g=(x,f)=>{c(y=>({...y,[x]:f}))},p=async()=>{try{const x=await h.mutateAsync();c(f=>({...f,aws_external_id:x.external_id}))}catch{d("Failed to generate external ID")}},j=async()=>{if(!a||!i.name){d("Please fill in all required fields");return}d(null);try{const x=await u.mutateAsync({siteId:e,data:{...i,provider:a}});if(x.auth_url){window.location.href=x.auth_url;return}n("complete")}catch(x){d(x.message||"Failed to create integration")}},w=()=>!a||!i.name?!1:a==="aws"?!!(i.aws_role_arn&&i.aws_external_id):a==="azure_ad"?!!(i.oauth_client_id&&i.oauth_client_secret&&i.oauth_tenant_id):a==="okta"?!!(i.oauth_client_id&&i.oauth_client_secret&&i.okta_domain):!!(i.oauth_client_id&&i.oauth_client_secret);return t.jsxs("div",{className:"min-h-screen bg-gray-900 p-6",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1",children:[t.jsx(Re,{to:"/sites",className:"hover:text-white",children:"Sites"}),t.jsx("span",{children:"/"}),t.jsx(Re,{to:`/sites/${e}`,className:"hover:text-white",children:e}),t.jsx("span",{children:"/"}),t.jsx(Re,{to:`/sites/${e}/integrations`,className:"hover:text-white",children:"Integrations"}),t.jsx("span",{children:"/"}),t.jsx("span",{className:"text-white",children:"Setup"})]}),t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Add Cloud Integration"})]}),t.jsx("div",{className:"flex items-center gap-4 mb-8",children:["provider","credentials","complete"].map((x,f)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-medium ${r===x?"bg-blue-600 text-white":f<["provider","credentials","complete"].indexOf(r)?"bg-green-600 text-white":"bg-gray-700 text-gray-400"}`,children:f+1}),t.jsx("span",{className:"ml-2 text-sm text-gray-400 capitalize",children:x}),f<2&&t.jsx("div",{className:"w-8 h-px bg-gray-700 mx-4"})]},x))}),o&&t.jsx("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-800 rounded-lg",children:t.jsx("p",{className:"text-red-400",children:o})}),t.jsxs("div",{className:"max-w-2xl",children:[r==="provider"&&t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Select Provider"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:Object.keys(Wt).map(x=>t.jsx(qj,{provider:x,selected:a===x,onSelect:()=>m(x)},x))}),t.jsx("button",{onClick:()=>n("credentials"),disabled:!a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue"})]}),r==="credentials"&&a&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("button",{onClick:()=>n("provider"),className:"text-gray-400 hover:text-white",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Configure ",Wt[a].name]})]}),a==="aws"?t.jsx(Gj,{values:i,onChange:g,onGenerateExternalId:p,generatingId:h.isPending}):t.jsx(Xj,{provider:a,values:i,onChange:g}),t.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[t.jsx("button",{onClick:j,disabled:!w()||u.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u.isPending?"Creating...":a==="aws"?"Test & Create":"Continue to OAuth"}),t.jsx("button",{onClick:()=>s(`/sites/${e}/integrations`),className:"px-4 py-2 text-gray-400 hover:text-white",children:"Cancel"})]})]}),r==="complete"&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),t.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Integration Created!"}),t.jsxs("p",{className:"text-gray-400 mb-6",children:["Your ",a&&Wt[a].name," integration has been configured. The initial sync will begin shortly."]}),t.jsx(Re,{to:`/sites/${e}/integrations`,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 inline-block",children:"View Integrations"})]})]})]})}function Jj({level:e}){const r=Zs[e||"unknown"]||Zs.unknown;return t.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded",style:{color:r.color,backgroundColor:r.bgColor},children:r.label})}function Zj({status:e}){const s={pass:{icon:"",color:"text-green-400"},fail:{icon:"",color:"text-red-400"},critical:{icon:"!",color:"text-red-500"},warning:{icon:"",color:"text-yellow-400"},info:{icon:"i",color:"text-blue-400"}},{icon:r,color:n}=s[e]||s.info;return t.jsx("span",{className:`font-bold ${n}`,children:r})}function eb({resource:e}){const[s,r]=v.useState(!1),n=Mx[e.resource_type]||e.resource_type,a=e.compliance_checks||[],l=a.filter(c=>c.status==="fail"||c.status==="critical"),i=a.filter(c=>c.status==="warning");return t.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700",children:[t.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-750 transition-colors",onClick:()=>r(!s),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-xs text-gray-500 uppercase",children:n}),t.jsx(Jj,{level:e.risk_level})]}),t.jsx("h3",{className:"font-medium text-white",children:e.name}),t.jsx("p",{className:"text-xs text-gray-500 font-mono mt-1",children:e.resource_id})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[l.length>0&&t.jsxs("span",{className:"text-red-400",children:[l.length," failing"]}),i.length>0&&t.jsxs("span",{className:"text-yellow-400",children:[i.length," warnings"]}),t.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${s?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),s&&t.jsxs("div",{className:"px-4 pb-4 border-t border-gray-700 pt-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Compliance Checks"}),t.jsx("div",{className:"space-y-2",children:Object.entries(e.compliance_checks).map(([c,o])=>t.jsx("div",{className:`p-3 rounded-lg ${o.status==="fail"||o.status==="critical"?"bg-red-900/20 border border-red-800":o.status==="warning"?"bg-yellow-900/20 border border-yellow-800":"bg-gray-900/50 border border-gray-700"}`,children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(Zj,{status:o.status}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-medium text-white",children:o.check}),t.jsx("span",{className:"text-xs text-gray-500",children:o.control})]}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:o.description}),o.details&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.details})]})]})},c))})]})]})}function tb({lastSync:e,onSync:s,syncing:r}){const n=a=>a?new Date(a).toLocaleString():"Never";return t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-400",children:"Last synchronized"}),t.jsx("p",{className:"text-white font-medium",children:n(e)})]}),t.jsx("button",{onClick:s,disabled:r,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:r?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Syncing..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Sync Now"]})})]})}function sb({resourceTypes:e,selectedType:s,onTypeChange:r,selectedRisk:n,onRiskChange:a}){return t.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Resource Type"}),t.jsxs("select",{value:s||"",onChange:l=>r(l.target.value||null),className:"px-3 py-1.5 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:[t.jsx("option",{value:"",children:"All Types"}),e.map(l=>t.jsx("option",{value:l,children:Mx[l]||l},l))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Risk Level"}),t.jsxs("select",{value:n||"",onChange:l=>a(l.target.value||null),className:"px-3 py-1.5 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:[t.jsx("option",{value:"",children:"All Levels"}),Object.keys(Zs).map(l=>t.jsx("option",{value:l,children:Zs[l].label},l))]})]})]})}function rb({total:e,byRisk:s}){return t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[t.jsx("p",{className:"text-2xl font-bold text-white",children:e}),t.jsx("p",{className:"text-sm text-gray-400",children:"Total Resources"})]}),["critical","high","medium","low"].map(r=>t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",style:{borderLeftColor:Zs[r].color,borderLeftWidth:3},children:[t.jsx("p",{className:"text-2xl font-bold",style:{color:Zs[r].color},children:s[r]||0}),t.jsx("p",{className:"text-sm text-gray-400",children:Zs[r].label})]},r))]})}function nb(){const{siteId:e,integrationId:s}=Yt(),[r,n]=v.useState(null),[a,l]=v.useState(null),[i,c]=v.useState(0),[o,d]=v.useState(null),u=50,{data:h,isLoading:m}=tv(e||null,s||null),{data:g,isLoading:p}=nv(e||null,s||null,{resource_type:r||void 0,risk_level:a||void 0,limit:u,offset:i*u}),j=Tx(),w=cv(),{data:x}=av(e||null,s||null,o);if(v.useEffect(()=>{x&&["completed","failed","timeout"].includes(x.status)&&(d(null),e&&s&&w(e,s))},[x==null?void 0:x.status]),!e||!s)return t.jsx("div",{className:"p-6 text-gray-400",children:"Missing site or integration ID"});const f=async()=>{try{const R=await j.mutateAsync({siteId:e,integrationId:s});d(R.job_id)}catch(R){console.error("Sync failed:",R)}},y=(g==null?void 0:g.resources)||[],N=(g==null?void 0:g.total)||0,k={critical:0,high:0,medium:0,low:0,unknown:0};y.forEach(R=>{const L=R.risk_level||"unknown";k[L]=(k[L]||0)+1});const S=Array.from(new Set(y.map(R=>R.resource_type))),C=h?Wt[h.provider]:null,_=o!==null&&(x==null?void 0:x.status)==="running";return t.jsxs("div",{className:"min-h-screen bg-gray-900 p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-1",children:[t.jsx(Re,{to:"/sites",className:"hover:text-white",children:"Sites"}),t.jsx("span",{children:"/"}),t.jsx(Re,{to:`/sites/${e}`,className:"hover:text-white",children:e}),t.jsx("span",{children:"/"}),t.jsx(Re,{to:`/sites/${e}/integrations`,className:"hover:text-white",children:"Integrations"}),t.jsx("span",{children:"/"}),t.jsx("span",{className:"text-white",children:(h==null?void 0:h.name)||s})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(h==null?void 0:h.name)||"Loading...",C&&t.jsx("span",{className:"text-sm font-normal px-2 py-0.5 rounded",style:{backgroundColor:C.color+"20",color:C.color},children:C.name})]}),t.jsxs("p",{className:"text-gray-400 mt-1",children:[N," resources collected"]})]}),t.jsxs(Re,{to:`/sites/${e}/integrations`,className:"text-gray-400 hover:text-white flex items-center gap-1",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Integrations"]})]})]}),h&&t.jsx("div",{className:"mb-6",children:t.jsx(tb,{lastSync:h.last_sync,onSync:f,syncing:_})}),t.jsx(rb,{total:N,byRisk:k}),t.jsx(sb,{resourceTypes:S,selectedType:r,onTypeChange:R=>{n(R),c(0)},selectedRisk:a,onRiskChange:R=>{l(R),c(0)}}),(m||p)&&t.jsx("div",{className:"flex items-center justify-center p-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),!p&&y.length>0&&t.jsx("div",{className:"space-y-3",children:y.map(R=>t.jsx(eb,{resource:R},R.id))}),!p&&y.length===0&&t.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 border border-gray-700 text-center",children:[t.jsx("p",{className:"text-gray-400",children:r||a?"No resources match the current filters":"No resources have been collected yet"}),!r&&!a&&t.jsx("button",{onClick:f,disabled:_,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Run Initial Sync"})]}),N>u&&t.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-gray-400",children:["Showing ",i*u+1," - ",Math.min((i+1)*u,N)," of ",N]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>c(R=>Math.max(0,R-1)),disabled:i===0,className:"px-3 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 disabled:opacity-50",children:"Previous"}),t.jsx("button",{onClick:()=>c(R=>R+1),disabled:(i+1)*u>=N,className:"px-3 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 disabled:opacity-50",children:"Next"})]})]})]})}function ab(){const e=Ce(),[s]=la(),r=s.get("token"),[n,a]=v.useState(!0),[l,i]=v.useState(null),[c,o]=v.useState(""),[d,u]=v.useState(""),[h,m]=v.useState(!1),[g,p]=v.useState(null),[j,w]=v.useState(!1);v.useEffect(()=>{if(!r){a(!1),i({valid:!1,error:"No invite token provided"});return}mt.validateInvite(r).then(N=>{i(N)}).catch(()=>{i({valid:!1,error:"Failed to validate invite"})}).finally(()=>{a(!1)})},[r]);const x=async N=>{if(N.preventDefault(),!(!r||!(l!=null&&l.valid))){if(c!==d){p("Passwords do not match");return}if(c.length<8){p("Password must be at least 8 characters");return}m(!0),p(null);try{await mt.acceptInvite({token:r,password:c,confirm_password:d}),w(!0),setTimeout(()=>{e("/")},3e3)}catch(k){p(k instanceof Error?k.message:"Failed to set password")}finally{m(!1)}}},f=c===d,y=c.length>=8;return n?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:t.jsxs(P,{className:"w-full max-w-md text-center py-12",children:[t.jsx(ke,{}),t.jsx("p",{className:"mt-4 text-label-secondary",children:"Validating invite..."})]})}):l!=null&&l.valid?j?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:t.jsxs(P,{className:"w-full max-w-md text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-green-500/20 flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),t.jsx("h1",{className:"text-2xl font-bold text-label-primary mb-2",children:"Account Created!"}),t.jsx("p",{className:"text-label-tertiary mb-6",children:"Your password has been set. Redirecting to login..."}),t.jsx(ke,{})]})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:t.jsxs(P,{className:"w-full max-w-md",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-accent-primary/20 flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),t.jsx("h1",{className:"text-2xl font-bold text-label-primary",children:"Set Your Password"}),t.jsx("p",{className:"text-label-tertiary mt-2",children:"Welcome to Central Command! Set your password to activate your account."})]}),t.jsx("div",{className:"bg-fill-secondary rounded-lg p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-label-tertiary",children:"Email:"}),t.jsx("p",{className:"text-label-primary font-medium",children:l.email})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-label-tertiary",children:"Role:"}),t.jsx("p",{className:"text-label-primary font-medium capitalize",children:l.role})]})]})}),t.jsxs("form",{onSubmit:x,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Password"}),t.jsx("input",{type:"password",value:c,onChange:N=>o(N.target.value),className:"w-full px-4 py-3 bg-fill-secondary border border-separator-default rounded-lg text-label-primary focus:outline-none focus:border-accent-primary",placeholder:"Minimum 8 characters",required:!0}),c&&!y&&t.jsx("p",{className:"text-xs text-red-400 mt-1",children:"Password must be at least 8 characters"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-label-secondary mb-1",children:"Confirm Password"}),t.jsx("input",{type:"password",value:d,onChange:N=>u(N.target.value),className:"w-full px-4 py-3 bg-fill-secondary border border-separator-default rounded-lg text-label-primary focus:outline-none focus:border-accent-primary",placeholder:"Re-enter your password",required:!0}),d&&!f&&t.jsx("p",{className:"text-xs text-red-400 mt-1",children:"Passwords do not match"})]}),g&&t.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm",children:g}),t.jsx("button",{type:"submit",disabled:h||!y||!f,className:"w-full py-3 bg-accent-primary text-white rounded-lg font-medium hover:bg-accent-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?t.jsx(ke,{size:"sm"}):"Create Account"})]}),t.jsxs("p",{className:"text-center text-label-tertiary text-sm mt-6",children:["Already have an account?"," ",t.jsx("button",{onClick:()=>e("/"),className:"text-accent-primary hover:underline",children:"Sign in"})]})]})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:t.jsxs(P,{className:"w-full max-w-md text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/20 flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsx("h1",{className:"text-2xl font-bold text-label-primary mb-2",children:"Invalid Invite"}),t.jsx("p",{className:"text-label-tertiary mb-6",children:(l==null?void 0:l.error)||"This invite link is invalid or has expired."}),t.jsx("button",{onClick:()=>e("/"),className:"px-6 py-2 bg-accent-primary text-white rounded-lg hover:bg-accent-primary/90 transition-colors",children:"Go to Login"})]})})}const La=({label:e,value:s,unit:r,status:n,description:a})=>{const l={pass:"text-green-600",warn:"text-orange-500",fail:"text-red-600"},i={pass:"bg-green-50 border-green-200",warn:"bg-orange-50 border-orange-200",fail:"bg-red-50 border-red-200"},c={pass:"On target",warn:"Review suggested",fail:"Attention recommended"};return t.jsxs("div",{className:`rounded-xl border p-6 ${i[n]}`,children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:`text-4xl font-bold ${l[n]}`,children:[typeof s=="number"?s.toFixed(s%1===0?0:1):s,r]}),t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${n==="pass"?"bg-green-100 text-green-700":n==="warn"?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:c[n]})]}),t.jsx("div",{className:"text-gray-800 font-medium mt-2",children:e}),a&&t.jsx("div",{className:"text-gray-500 text-xs mt-1",children:a})]})},lb=({control:e})=>{const[s,r]=v.useState(!1),n={pass:{border:"border-green-400",bg:"bg-green-50",icon:"",iconColor:"text-green-600",label:"EXPECTED",labelBg:"bg-green-100 text-green-800"},warn:{border:"border-orange-400",bg:"bg-orange-50",icon:"",iconColor:"text-orange-600",label:"REVIEW",labelBg:"bg-orange-100 text-orange-800"},fail:{border:"border-red-400",bg:"bg-red-50",icon:"",iconColor:"text-red-600",label:"DRIFT DETECTED",labelBg:"bg-red-100 text-red-800"}},a=n[e.status]||n.pass,l=e.plain_english||e.name;return t.jsxs("div",{className:`border-2 rounded-xl p-4 ${a.border} ${a.bg} cursor-pointer transition-all hover:shadow-md`,onClick:()=>r(!s),children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsxs("div",{className:"flex-1 pr-2",children:[t.jsx("h3",{className:"font-semibold text-gray-900 text-sm leading-tight",children:l}),e.plain_english&&t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:e.name})]}),t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${a.labelBg}`,children:a.label})]}),e.status!=="pass"&&e.consequence&&t.jsx("div",{className:"mt-2 p-2 bg-white/60 rounded-lg",children:t.jsxs("p",{className:"text-xs text-gray-700",children:[t.jsx("span",{className:"font-medium text-red-700",children:"Risk: "}),e.consequence]})}),s&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200/50 space-y-2",children:[e.why_it_matters&&t.jsxs("div",{className:"text-xs",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Why it matters: "}),t.jsx("span",{className:"text-gray-600",children:e.why_it_matters})]}),e.what_we_check&&t.jsxs("div",{className:"text-xs",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"What we check: "}),t.jsx("span",{className:"text-gray-600",children:e.what_we_check})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[t.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-blue-50 text-blue-700 border border-blue-200",children:e.hipaa_section||e.hipaa_controls.join(", ")}),t.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs ${e.severity==="critical"?"bg-red-50 text-red-700 border border-red-200":e.severity==="high"?"bg-orange-50 text-orange-700 border border-orange-200":e.severity==="medium"?"bg-yellow-50 text-yellow-700 border border-yellow-200":"bg-gray-50 text-gray-700 border border-gray-200"}`,children:[e.severity.toUpperCase()," priority"]})]}),t.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["HIPAA: ",e.hipaa_controls.join(", ")]})]}),e.auto_fix_triggered&&t.jsxs("div",{className:"mt-3 text-xs text-green-700 bg-green-100 rounded-lg px-2 py-1.5 flex items-center gap-1",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["Remediation attempted (",e.fix_duration_sec??0,"s)"]})]}),e.exception_applied&&t.jsxs("div",{className:"mt-2 text-xs text-orange-700 bg-orange-100 rounded-lg px-2 py-1.5 flex items-center gap-1",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["Exception: ",e.exception_reason||"Active"]})]}),t.jsxs("div",{className:"mt-3 flex justify-between items-center text-xs text-gray-400",children:[t.jsx("span",{children:e.checked_at?`Checked ${new Date(e.checked_at).toLocaleString()}`:"Pending check"}),t.jsx("span",{className:"text-gray-300",children:s?" less":" more"})]})]})},ib=({controls:e})=>{const s={critical:0,high:1,medium:2,low:3},r=[...e].sort((n,a)=>{const l=s[n.severity]??4,i=s[a.severity]??4;if(l!==i)return l-i;const c={fail:0,warn:1,pass:2};return(c[n.status]??3)-(c[a.status]??3)});return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:r.map(n=>t.jsx(lb,{control:n},n.rule_id))})},ob=({incidents:e})=>{const s={critical:"bg-red-100 text-red-800",high:"bg-orange-100 text-orange-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-blue-100 text-blue-800"},r=a=>a.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase()),n=a=>a?a<60?`${a}s`:a<3600?`${Math.floor(a/60)}m`:`${Math.floor(a/3600)}h ${Math.floor(a%3600/60)}m`:"-";return e.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[t.jsx("div",{className:"text-4xl mb-3",children:""}),t.jsx("p",{className:"text-gray-600",children:"No recent incidents"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Your systems are running smoothly"})]}):t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 divide-y divide-gray-100",children:e.map(a=>t.jsx("div",{className:"p-4 hover:bg-gray-50",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${s[a.severity]||s.medium}`,children:a.severity.toUpperCase()}),t.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:r(a.incident_type)})]}),t.jsx("p",{className:"text-xs text-gray-500",children:new Date(a.created_at).toLocaleString()})]}),t.jsxs("div",{className:"flex flex-col items-end gap-1",children:[a.auto_fixed?t.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-green-700 bg-green-100 px-2 py-1 rounded-full",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Auto-fixed"})]}):a.resolved_at?t.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-blue-700 bg-blue-100 px-2 py-1 rounded-full",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Resolved"})]}):t.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-orange-700 bg-orange-100 px-2 py-1 rounded-full",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"In Progress"})]}),a.resolution_time_sec&&t.jsx("span",{className:"text-xs text-gray-400",children:n(a.resolution_time_sec)})]})]})},a.incident_id))})},cb=({bundles:e,siteId:s,token:r})=>{const[n,a]=v.useState(null),l=d=>{if(d===0)return"0 B";const u=1024,h=["B","KB","MB","GB"],m=Math.floor(Math.log(d)/Math.log(u));return`${parseFloat((d/Math.pow(u,m)).toFixed(1))} ${h[m]}`},i=d=>({icon:{daily:"",weekly:"",monthly:""}[d]||"",label:d.charAt(0).toUpperCase()+d.slice(1)}),c=async d=>{a(d);try{const h=await(await fetch(`/api/portal/site/${s}/evidence/${d}/download?token=${r}`)).json();h.download_url&&window.open(h.download_url,"_blank")}catch(u){console.error("Download failed:",u)}finally{a(null)}};if(e.length===0)return t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[t.jsx("div",{className:"text-4xl mb-3",children:""}),t.jsx("p",{className:"text-gray-600",children:"No evidence bundles yet"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Bundles will appear after first compliance check"})]});const o=e.reduce((d,u)=>{const h=u.bundle_type;return d[h]||(d[h]=[]),d[h].push(u),d},{});return t.jsxs("div",{className:"space-y-4",children:[Object.entries(o).map(([d,u])=>{const{icon:h,label:m}=i(d);return t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[t.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center gap-2",children:[t.jsx("span",{children:h}),t.jsxs("span",{className:"font-medium text-gray-900",children:[m," Reports"]}),t.jsxs("span",{className:"text-xs text-gray-400",children:["(",u.length,")"]})]}),t.jsx("div",{className:"divide-y divide-gray-100",children:u.slice(0,5).map(g=>t.jsxs("div",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-50",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.bundle_id}),t.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(g.generated_at).toLocaleDateString(),"  ",l(g.size_bytes)]})]}),t.jsx("button",{onClick:()=>c(g.bundle_id),disabled:n===g.bundle_id,className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg disabled:opacity-50 disabled:cursor-wait",children:n===g.bundle_id?"Loading...":"Download"})]},g.bundle_id))})]},d)}),t.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 p-4",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Monthly Compliance Packet"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"PDF report with full compliance summary, incident log, and evidence index"})]}),t.jsx("a",{href:`/api/portal/site/${s}/report/monthly?token=${r}`,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 whitespace-nowrap",children:"Download PDF"})]})})]})},db=()=>t.jsxs("div",{className:"min-h-screen bg-gray-50 animate-pulse",children:[t.jsx("div",{className:"bg-white border-b px-6 py-4",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsx("div",{className:"h-8 w-64 bg-gray-200 rounded mb-2"}),t.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded"})]})}),t.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-8",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(e=>t.jsx("div",{className:"h-24 bg-gray-200 rounded-xl"},e))}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4,5,6,7,8].map(e=>t.jsx("div",{className:"h-48 bg-gray-200 rounded-xl"},e))})]})]}),ub=({message:e})=>t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:t.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("span",{className:"text-3xl",children:""})}),t.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),t.jsx("p",{className:"text-gray-600 mb-6",children:e}),t.jsx("p",{className:"text-sm text-gray-400",children:"If you believe this is an error, please contact your administrator."})]})}),hb=()=>{const[e]=la(),s=Ce(),{siteId:r}=Yt(),n=e.get("token"),[a,l]=v.useState(null),[i,c]=v.useState(!0),[o,d]=v.useState(null);v.useEffect(()=>{if(!r){d("Invalid portal URL."),c(!1);return}const m=n?`/api/portal/site/${r}?token=${n}`:`/api/portal/site/${r}`;fetch(m,{credentials:"include"}).then(g=>{if(g.status===403)throw s(`/portal/site/${r}/login`,{replace:!0}),new Error("redirect");if(!g.ok)throw new Error("Failed to load dashboard. Please try again.");return g.json()}).then(l).catch(g=>{g.message!=="redirect"&&d(g.message)}).finally(()=>c(!1))},[r,n,s]);const u=async()=>{try{await fetch("/api/portal/auth/logout",{method:"POST",credentials:"include"})}catch{}s(`/portal/site/${r}/login`,{replace:!0})};if(i)return t.jsx(db,{});if(o)return t.jsx(ub,{message:o});if(!a)return null;const h=(m,g)=>m>=g.pass?"pass":m>=g.warn?"warn":"fail";return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white border-b shadow-sm",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a.site.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:["HIPAA Monitoring Dashboard  Last updated:"," ",a.site.last_checkin?new Date(a.site.last_checkin).toLocaleString():"Never"]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`px-3 py-1.5 rounded-full text-sm font-medium ${a.site.status==="online"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.site.status==="online"?" Online":" Offline"}),t.jsx("button",{onClick:u,className:"px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition",children:"Log out"})]})]})}),t.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-8",children:[t.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[t.jsx(La,{label:"Control Coverage",value:a.kpis.compliance_pct??0,unit:"%",status:h(a.kpis.compliance_pct??0,{pass:95,warn:80}),description:"Percentage of monitored controls in expected state"}),t.jsx(La,{label:"Security Update Speed",value:a.kpis.patch_mttr_hours??0,unit:" hrs",status:(a.kpis.patch_mttr_hours??0)<24?"pass":(a.kpis.patch_mttr_hours??0)<72?"warn":"fail",description:"Average time to apply critical security patches"}),t.jsx(La,{label:"Two-Factor Auth",value:a.kpis.mfa_coverage_pct??0,unit:"%",status:(a.kpis.mfa_coverage_pct??0)===100?"pass":"warn",description:"Accounts with MFA enabled"}),t.jsx(La,{label:"Remediation Actions",value:a.kpis.auto_fixes_24h??0,unit:"",status:"pass",description:"Automated remediation actions attempted in last 24h"})]}),t.jsx("section",{className:"mb-6",children:t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),t.jsxs("span",{className:"text-sm text-gray-600",children:[t.jsx("strong",{className:"text-gray-900",children:a.kpis.controls_passing??0})," Passing"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-3 h-3 rounded-full bg-orange-500"}),t.jsxs("span",{className:"text-sm text-gray-600",children:[t.jsx("strong",{className:"text-gray-900",children:a.kpis.controls_warning??0})," Warning"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-3 h-3 rounded-full bg-red-500"}),t.jsxs("span",{className:"text-sm text-gray-600",children:[t.jsx("strong",{className:"text-gray-900",children:a.kpis.controls_failing??0})," Failing"]})]})]}),t.jsx("span",{className:"text-sm text-gray-400",children:"8 Core HIPAA Controls"})]})}),t.jsxs("section",{className:"mb-8",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Control Status"}),t.jsx(ib,{controls:a.controls})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("section",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Recent Activity"}),t.jsx(ob,{incidents:a.incidents})]}),t.jsxs("section",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Evidence & Reports"}),t.jsxs("button",{onClick:()=>{const m=n?`/portal/site/${r}/verify?token=${n}`:`/portal/site/${r}/verify`;s(m)},className:"text-sm text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-1",children:[t.jsx("span",{children:"Verify Chain"}),t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})]})]}),t.jsx(cb,{bundles:a.evidence_bundles,siteId:r,token:n})]})]}),t.jsxs("footer",{className:"mt-12 pt-8 border-t border-gray-200 text-center",children:[t.jsx("p",{className:"text-sm text-gray-500 max-w-2xl mx-auto",children:"This report contains system metadata only. No Protected Health Information (PHI) is processed, stored, or transmitted by the monitoring system."}),t.jsx("div",{className:"mt-4 p-4 bg-gray-100 rounded-lg max-w-2xl mx-auto",children:t.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed",children:[t.jsx("strong",{children:"Important:"})," This system monitors configuration states and reports observations. OsirisCare does not certify HIPAA compliance. Compliance determinations require qualified assessment by authorized personnel. Contact your compliance officer for official guidance. All metrics represent point-in-time observations, not guarantees of security or compliance status."]})}),t.jsxs("p",{className:"mt-4 text-sm text-gray-400",children:["Questions?"," ",t.jsx("a",{href:"mailto:support@osiriscare.net",className:"text-blue-600 hover:underline",children:"support@osiriscare.net"})]}),t.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-300",children:"Powered by"}),t.jsx("span",{className:"text-sm font-semibold text-gray-500",children:"OsirisCare"})]})]})]})]})},_u=()=>{const[e]=la(),s=Ce(),{siteId:r}=Yt(),[n,a]=v.useState(""),[l,i]=v.useState({status:"idle"}),c=e.get("magic"),o=e.get("token");v.useEffect(()=>{c&&r?d(c):o&&r&&s(`/portal/site/${r}/dashboard?token=${o}`,{replace:!0})},[c,o,r]);const d=async h=>{i({status:"validating",message:"Validating your access..."});try{const m=await fetch(`/api/portal/auth/validate?magic=${h}`);if(m.ok){const g=await m.json();s(`/portal/site/${g.site_id}/dashboard`,{replace:!0})}else{const g=await m.json();i({status:"error",message:g.detail||"Invalid or expired link. Please request a new one."})}}catch{i({status:"error",message:"Failed to validate access link. Please try again."})}},u=async h=>{if(h.preventDefault(),!(!n||!r)){i({status:"loading"});try{(await fetch(`/api/portal/sites/${r}/request-access`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})})).ok?i({status:"sent",message:"Check your email for the access link."}):i({status:"error",message:"Failed to send access link. Please try again."})}catch{i({status:"error",message:"Network error. Please check your connection."})}}};return l.status==="validating"?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:t.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"})}),t.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Validating Access"}),t.jsx("p",{className:"text-gray-600",children:l.message})]})}):l.status==="sent"?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:t.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),t.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Check Your Email"}),t.jsx("p",{className:"text-gray-600 mb-6",children:l.message}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Didn't receive it? Check your spam folder or"," ",t.jsx("button",{onClick:()=>i({status:"idle"}),className:"text-blue-600 hover:underline",children:"try again"})]})]})}):l.status==="error"?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:t.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),t.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Error"}),t.jsx("p",{className:"text-gray-600 mb-6",children:l.message}),t.jsx("button",{onClick:()=>i({status:"idle"}),className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700",children:"Try Again"})]})}):t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:t.jsxs("div",{className:"max-w-md w-full",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"OsirisCare"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"HIPAA Monitoring Portal"})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2 text-center",children:"Access Your Dashboard"}),t.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Enter your email to receive a secure login link."}),t.jsxs("form",{onSubmit:u,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),t.jsx("input",{type:"email",id:"email",value:n,onChange:h=>a(h.target.value),placeholder:"you@company.com",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"})]}),t.jsx("button",{type:"submit",disabled:l.status==="loading"||!n,className:"w-full py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:l.status==="loading"?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Sending..."]}):"Send Login Link"})]}),t.jsx("p",{className:"mt-6 text-center text-sm text-gray-400",children:"No password required. We'll send you a secure link."})]}),t.jsxs("p",{className:"mt-8 text-center text-sm text-gray-400",children:["Questions?"," ",t.jsx("a",{href:"mailto:support@osiriscare.net",className:"text-blue-600 hover:underline",children:"Contact Support"})]}),t.jsx("p",{className:"mt-4 text-center text-xs text-gray-300 max-w-sm mx-auto",children:"This portal provides monitoring data only. OsirisCare does not certify compliance."})]})})},mb=({status:e})=>{const s={valid:"bg-green-100 text-green-800 border-green-200",verified:"bg-green-100 text-green-800 border-green-200",invalid:"bg-red-100 text-red-800 border-red-200",broken:"bg-red-100 text-red-800 border-red-200",signature_invalid:"bg-orange-100 text-orange-800 border-orange-200",empty:"bg-gray-100 text-gray-800 border-gray-200",error:"bg-red-100 text-red-800 border-red-200"},r={valid:"Chain Valid",verified:"Chain Verified",invalid:"Chain Invalid",broken:"Chain Broken",signature_invalid:"Signature Invalid",empty:"No Evidence",error:"Error"},n={valid:"",verified:"",invalid:"",broken:"",signature_invalid:"",empty:"",error:"!"};return t.jsxs("span",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium border ${s[e]||s.error}`,children:[t.jsx("span",{className:"text-lg",children:n[e]||"?"}),r[e]||e]})},Pu=({label:e,hash:s,isGenesis:r})=>t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:e}),t.jsx("code",{className:`text-xs font-mono break-all ${r?"text-gray-400":"text-gray-700"}`,children:r?"(genesis - all zeros)":s})]}),xb=({bundles:e})=>e.length===0?null:t.jsx("div",{className:"space-y-4",children:e.map((s,r)=>{const n=s.prev_hash==="0".repeat(64);return t.jsxs("div",{className:"relative pl-8",children:[r<e.length-1&&t.jsx("div",{className:"absolute left-3 top-8 bottom-0 w-0.5 bg-gray-200"}),t.jsx("div",{className:`absolute left-0 top-2 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold
              ${n?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:n?"G":e.length-r}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-sm transition",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:s.bundle_id}),t.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleString()})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[s.is_signed&&t.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded flex items-center gap-1",title:`Signed by: ${s.signed_by}`,children:[t.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Signed"]}),t.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:[s.checks_count," checks"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[t.jsx(Pu,{label:"Previous Hash",hash:s.prev_hash,isGenesis:n}),t.jsx(Pu,{label:"Bundle Hash",hash:s.bundle_hash})]}),!n&&t.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[t.jsxs("span",{className:"font-mono",children:[s.prev_hash.substring(0,8),"..."]}),t.jsx("span",{children:"links to previous bundle"})]})]})]},s.bundle_id)})}),pb=()=>{var g;const[e]=la(),s=Ce(),{siteId:r}=Yt(),n=e.get("token"),[a,l]=v.useState(null),[i,c]=v.useState([]),[o,d]=v.useState(!0),[u,h]=v.useState(null);v.useEffect(()=>{if(!r){h("Invalid site ID"),d(!1);return}const p={};n&&(p.Authorization=`Bearer ${n}`),Promise.all([fetch(`/api/evidence/sites/${r}/verify`,{credentials:"include",headers:p}).then(j=>j.json()),fetch(`/api/evidence/sites/${r}/bundles?limit=20`,{credentials:"include",headers:p}).then(j=>j.json())]).then(([j,w])=>{l(j),c(w.bundles||[])}).catch(j=>{h(j.message||"Failed to load verification data")}).finally(()=>d(!1))},[r,n]);const m=()=>{const p=n?`/portal/site/${r}/dashboard?token=${n}`:`/portal/site/${r}/dashboard`;s(p)};return o?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Verifying evidence chain..."})]})}):u?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:t.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("span",{className:"text-3xl",children:"!"})}),t.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Verification Error"}),t.jsx("p",{className:"text-gray-600 mb-6",children:u}),t.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition",children:"Back to Dashboard"})]})}):t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white border-b shadow-sm",children:t.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-4 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Evidence Chain Verification"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Cryptographic proof of compliance evidence integrity"})]}),t.jsx("button",{onClick:m,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition",children:"Back to Dashboard"})]})}),t.jsxs("main",{className:"max-w-5xl mx-auto px-6 py-8",children:[t.jsxs("section",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-8 mb-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Chain Integrity Status"}),a&&t.jsx(mb,{status:a.status})]}),((a==null?void 0:a.status)==="valid"||(a==null?void 0:a.status)==="verified")&&t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6",children:t.jsxs("p",{className:"text-green-800",children:["All ",a.chain_length," evidence bundles form a valid cryptographic chain. Each bundle's hash correctly references its predecessor, ensuring no tampering has occurred.",a.signatures_total!==null&&a.signatures_total>0&&t.jsxs("span",{className:"block mt-2",children:[t.jsx("strong",{children:a.signatures_valid})," of ",t.jsx("strong",{children:a.signatures_total})," bundles have valid Ed25519 signatures."]})]})}),((a==null?void 0:a.status)==="invalid"||(a==null?void 0:a.status)==="broken")&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:t.jsxs("p",{className:"text-red-800",children:["Chain integrity verification failed at bundle: ",t.jsx("code",{className:"font-mono",children:a.bundle_id}),t.jsx("br",{}),t.jsx("span",{className:"text-sm",children:a.error})]})}),(a==null?void 0:a.status)==="signature_invalid"&&t.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4 mb-6",children:t.jsxs("p",{className:"text-orange-800",children:["Ed25519 signature verification failed at bundle: ",t.jsx("code",{className:"font-mono",children:a.bundle_id}),t.jsx("br",{}),t.jsx("span",{className:"text-sm",children:a.error}),t.jsx("br",{}),t.jsxs("span",{className:"text-sm mt-2 block",children:["Chain valid: ",a.chain_length," bundles | Signatures: ",a.signatures_valid,"/",a.signatures_total," valid"]})]})}),(a==null?void 0:a.status)==="empty"&&t.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4 mb-6",children:t.jsx("p",{className:"text-gray-600",children:"No compliance evidence bundles have been recorded yet for this site. Evidence will appear here after the first compliance scan."})}),a&&a.status!=="empty"&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[t.jsx("span",{className:"text-3xl font-bold text-gray-900",children:a.chain_length}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Total Bundles"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[t.jsx("span",{className:"text-3xl font-bold text-green-600",children:a.signatures_valid??0}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Signed Bundles"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[t.jsxs("span",{className:"text-sm font-mono text-gray-700",children:[(g=a.first_bundle)==null?void 0:g.substring(0,12),"..."]}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Genesis Bundle"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[t.jsx("span",{className:"text-sm text-gray-700",children:a.first_timestamp&&new Date(a.first_timestamp).toLocaleDateString()}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"First Evidence"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[t.jsx("span",{className:"text-sm text-gray-700",children:a.last_timestamp&&new Date(a.last_timestamp).toLocaleDateString()}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Latest Evidence"})]})]})]}),i.length>0&&t.jsxs("section",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-8",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Evidence Bundle Timeline"}),t.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Each bundle contains a cryptographic hash linking it to the previous bundle, forming an immutable chain. The genesis bundle (G) starts the chain with an all-zeros previous hash."}),t.jsx(xb,{bundles:i})]}),t.jsxs("section",{className:"mt-8 bg-blue-50 rounded-2xl border border-blue-200 p-8",children:[t.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4",children:"How Evidence Verification Works"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 text-sm text-blue-800",children:[t.jsxs("div",{children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold mb-3",children:"1"}),t.jsx("h3",{className:"font-semibold mb-1",children:"Bundle Creation"}),t.jsx("p",{className:"text-blue-700",children:"Each compliance scan generates an evidence bundle containing check results, timestamps, and metadata."})]}),t.jsxs("div",{children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold mb-3",children:"2"}),t.jsx("h3",{className:"font-semibold mb-1",children:"Hash Linking"}),t.jsx("p",{className:"text-blue-700",children:"The bundle is hashed using SHA-256, and includes the previous bundle's hash, creating a chain."})]}),t.jsxs("div",{children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold mb-3",children:"3"}),t.jsx("h3",{className:"font-semibold mb-1",children:"Ed25519 Signing"}),t.jsx("p",{className:"text-blue-700",children:"Each bundle hash is signed with the server's Ed25519 private key, proving authenticity and origin."})]}),t.jsxs("div",{children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold mb-3",children:"4"}),t.jsx("h3",{className:"font-semibold mb-1",children:"Tamper Detection"}),t.jsx("p",{className:"text-blue-700",children:"Any modification breaks the chain hash or invalidates the signature, revealing tampering."})]})]})]}),t.jsxs("footer",{className:"mt-12 pt-8 border-t border-gray-200 text-center",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"This verification page provides cryptographic proof of evidence integrity for HIPAA auditors."}),t.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-300",children:"Powered by"}),t.jsx("span",{className:"text-sm font-semibold text-gray-500",children:"OsirisCare"})]})]})]})]})},$x=v.createContext(void 0),Aa="partner_api_key",fb=({children:e})=>{const[s,r]=v.useState(null),[n,a]=v.useState(null),[l,i]=v.useState(!0),[c,o]=v.useState(null);v.useEffect(()=>{const m=localStorage.getItem(Aa);m?d(m):i(!1)},[]);const d=async m=>{i(!0),o(null);try{const g=await fetch("/api/partners/me",{headers:{"X-API-Key":m}});if(g.ok){const p=await g.json();r(p),a(m),localStorage.setItem(Aa,m)}else localStorage.removeItem(Aa),o("Invalid or expired API key"),r(null),a(null)}catch{o("Failed to connect to server")}finally{i(!1)}},u=async m=>(await d(m),s!==null),h=()=>{localStorage.removeItem(Aa),r(null),a(null),o(null)};return t.jsx($x.Provider,{value:{partner:s,apiKey:n,isAuthenticated:s!==null,isLoading:l,error:c,login:u,logout:h},children:e})},Ux=()=>{const e=v.useContext($x);if(e===void 0)throw new Error("usePartner must be used within a PartnerProvider");return e},Eu=()=>{const[e]=la(),s=Ce(),{login:r,isAuthenticated:n,isLoading:a,error:l}=Ux(),[i,c]=v.useState(""),[o,d]=v.useState("idle"),[u,h]=v.useState(null),m=e.get("token");v.useEffect(()=>{m&&g(m)},[m]),v.useEffect(()=>{n&&!a&&s("/partner/dashboard",{replace:!0})},[n,a,s]);const g=async j=>{d("loading"),h(null);try{const w=await fetch(`/api/partners/auth/magic?token=${j}`);if(w.ok){const x=await w.json();x.api_key&&await r(x.api_key)}else{const x=await w.json();h(x.detail||"Invalid or expired magic link"),d("error")}}catch{h("Failed to validate magic link"),d("error")}},p=async j=>{if(j.preventDefault(),!i.trim())return;d("loading"),h(null),await r(i.trim())||(h(l||"Invalid API key"),d("error"))};return a||o==="loading"?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 flex items-center justify-center p-6",children:t.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent"})}),t.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:m?"Validating Access":"Loading"}),t.jsx("p",{className:"text-gray-600",children:"Please wait..."})]})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 flex items-center justify-center p-6",children:t.jsxs("div",{className:"max-w-md w-full",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-lg mx-auto mb-4 flex items-center justify-center",children:t.jsx("svg",{className:"w-10 h-10 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),t.jsx("h1",{className:"text-3xl font-bold text-white",children:"Partner Portal"}),t.jsx("p",{className:"text-indigo-200 mt-2",children:"OsirisCare Reseller Dashboard"})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2 text-center",children:"Partner Login"}),t.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Enter your API key to access your dashboard."}),(u||o==="error")&&t.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-red-700 text-sm",children:u||"Authentication failed"})}),t.jsxs("form",{onSubmit:p,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key"}),t.jsx("input",{type:"password",id:"apiKey",value:i,onChange:j=>c(j.target.value),placeholder:"Enter your partner API key",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition font-mono text-sm"})]}),t.jsx("button",{type:"submit",disabled:!i.trim(),className:"w-full py-3 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Sign In"})]}),t.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:t.jsxs("p",{className:"text-center text-sm text-gray-500",children:["Don't have an API key?"," ",t.jsx("a",{href:"mailto:partners@osiriscare.net",className:"text-indigo-600 hover:underline",children:"Contact us"})]})})]}),t.jsx("p",{className:"mt-8 text-center text-sm text-indigo-300",children:"Powered by OsirisCare HIPAA Compliance Platform"})]})})};var gb=Object.defineProperty,Nl=Object.getOwnPropertySymbols,Bx=Object.prototype.hasOwnProperty,Hx=Object.prototype.propertyIsEnumerable,Lu=(e,s,r)=>s in e?gb(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,Do=(e,s)=>{for(var r in s||(s={}))Bx.call(s,r)&&Lu(e,r,s[r]);if(Nl)for(var r of Nl(s))Hx.call(s,r)&&Lu(e,r,s[r]);return e},Fo=(e,s)=>{var r={};for(var n in e)Bx.call(e,n)&&s.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Nl)for(var n of Nl(e))s.indexOf(n)<0&&Hx.call(e,n)&&(r[n]=e[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ir;(e=>{const s=class H{constructor(o,d,u,h){if(this.version=o,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],o<H.MIN_VERSION||o>H.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let m=[];for(let p=0;p<this.size;p++)m.push(!1);for(let p=0;p<this.size;p++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const g=this.addEccAndInterleave(u);if(this.drawCodewords(g),h==-1){let p=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const w=this.getPenaltyScore();w<p&&(h=j,p=w),this.applyMask(j)}}a(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(o,d){const u=e.QrSegment.makeSegments(o);return H.encodeSegments(u,d)}static encodeBinary(o,d){const u=e.QrSegment.makeBytes(o);return H.encodeSegments([u],d)}static encodeSegments(o,d,u=1,h=40,m=-1,g=!0){if(!(H.MIN_VERSION<=u&&u<=h&&h<=H.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let p,j;for(p=u;;p++){const y=H.getNumDataCodewords(p,d)*8,N=i.getTotalBits(o,p);if(N<=y){j=N;break}if(p>=h)throw new RangeError("Data too long")}for(const y of[H.Ecc.MEDIUM,H.Ecc.QUARTILE,H.Ecc.HIGH])g&&j<=H.getNumDataCodewords(p,y)*8&&(d=y);let w=[];for(const y of o){r(y.mode.modeBits,4,w),r(y.numChars,y.mode.numCharCountBits(p),w);for(const N of y.getData())w.push(N)}a(w.length==j);const x=H.getNumDataCodewords(p,d)*8;a(w.length<=x),r(0,Math.min(4,x-w.length),w),r(0,(8-w.length%8)%8,w),a(w.length%8==0);for(let y=236;w.length<x;y^=253)r(y,8,w);let f=[];for(;f.length*8<w.length;)f.push(0);return w.forEach((y,N)=>f[N>>>3]|=y<<7-(N&7)),new H(p,d,f,m)}getModule(o,d){return 0<=o&&o<this.size&&0<=d&&d<this.size&&this.modules[d][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const o=this.getAlignmentPatternPositions(),d=o.length;for(let u=0;u<d;u++)for(let h=0;h<d;h++)u==0&&h==0||u==0&&h==d-1||u==d-1&&h==0||this.drawAlignmentPattern(o[u],o[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){const d=this.errorCorrectionLevel.formatBits<<3|o;let u=d;for(let m=0;m<10;m++)u=u<<1^(u>>>9)*1335;const h=(d<<10|u)^21522;a(h>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,n(h,m));this.setFunctionModule(8,7,n(h,6)),this.setFunctionModule(8,8,n(h,7)),this.setFunctionModule(7,8,n(h,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,n(h,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,n(h,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,n(h,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let u=0;u<12;u++)o=o<<1^(o>>>11)*7973;const d=this.version<<12|o;a(d>>>18==0);for(let u=0;u<18;u++){const h=n(d,u),m=this.size-11+u%3,g=Math.floor(u/3);this.setFunctionModule(m,g,h),this.setFunctionModule(g,m,h)}}drawFinderPattern(o,d){for(let u=-4;u<=4;u++)for(let h=-4;h<=4;h++){const m=Math.max(Math.abs(h),Math.abs(u)),g=o+h,p=d+u;0<=g&&g<this.size&&0<=p&&p<this.size&&this.setFunctionModule(g,p,m!=2&&m!=4)}}drawAlignmentPattern(o,d){for(let u=-2;u<=2;u++)for(let h=-2;h<=2;h++)this.setFunctionModule(o+h,d+u,Math.max(Math.abs(h),Math.abs(u))!=1)}setFunctionModule(o,d,u){this.modules[d][o]=u,this.isFunction[d][o]=!0}addEccAndInterleave(o){const d=this.version,u=this.errorCorrectionLevel;if(o.length!=H.getNumDataCodewords(d,u))throw new RangeError("Invalid argument");const h=H.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][d],m=H.ECC_CODEWORDS_PER_BLOCK[u.ordinal][d],g=Math.floor(H.getNumRawDataModules(d)/8),p=h-g%h,j=Math.floor(g/h);let w=[];const x=H.reedSolomonComputeDivisor(m);for(let y=0,N=0;y<h;y++){let k=o.slice(N,N+j-m+(y<p?0:1));N+=k.length;const S=H.reedSolomonComputeRemainder(k,x);y<p&&k.push(0),w.push(k.concat(S))}let f=[];for(let y=0;y<w[0].length;y++)w.forEach((N,k)=>{(y!=j-m||k>=p)&&f.push(N[y])});return a(f.length==g),f}drawCodewords(o){if(o.length!=Math.floor(H.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let h=0;h<this.size;h++)for(let m=0;m<2;m++){const g=u-m,j=(u+1&2)==0?this.size-1-h:h;!this.isFunction[j][g]&&d<o.length*8&&(this.modules[j][g]=n(o[d>>>3],7-(d&7)),d++)}}a(d==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let u=0;u<this.size;u++){let h;switch(o){case 0:h=(u+d)%2==0;break;case 1:h=d%2==0;break;case 2:h=u%3==0;break;case 3:h=(u+d)%3==0;break;case 4:h=(Math.floor(u/3)+Math.floor(d/2))%2==0;break;case 5:h=u*d%2+u*d%3==0;break;case 6:h=(u*d%2+u*d%3)%2==0;break;case 7:h=((u+d)%2+u*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][u]&&h&&(this.modules[d][u]=!this.modules[d][u])}}getPenaltyScore(){let o=0;for(let m=0;m<this.size;m++){let g=!1,p=0,j=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[m][w]==g?(p++,p==5?o+=H.PENALTY_N1:p>5&&o++):(this.finderPenaltyAddHistory(p,j),g||(o+=this.finderPenaltyCountPatterns(j)*H.PENALTY_N3),g=this.modules[m][w],p=1);o+=this.finderPenaltyTerminateAndCount(g,p,j)*H.PENALTY_N3}for(let m=0;m<this.size;m++){let g=!1,p=0,j=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[w][m]==g?(p++,p==5?o+=H.PENALTY_N1:p>5&&o++):(this.finderPenaltyAddHistory(p,j),g||(o+=this.finderPenaltyCountPatterns(j)*H.PENALTY_N3),g=this.modules[w][m],p=1);o+=this.finderPenaltyTerminateAndCount(g,p,j)*H.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let g=0;g<this.size-1;g++){const p=this.modules[m][g];p==this.modules[m][g+1]&&p==this.modules[m+1][g]&&p==this.modules[m+1][g+1]&&(o+=H.PENALTY_N2)}let d=0;for(const m of this.modules)d=m.reduce((g,p)=>g+(p?1:0),d);const u=this.size*this.size,h=Math.ceil(Math.abs(d*20-u*10)/u)-1;return a(0<=h&&h<=9),o+=h*H.PENALTY_N4,a(0<=o&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{const o=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2;let u=[6];for(let h=this.size-7;u.length<o;h-=d)u.splice(1,0,h);return u}}static getNumRawDataModules(o){if(o<H.MIN_VERSION||o>H.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*o+128)*o+64;if(o>=2){const u=Math.floor(o/7)+2;d-=(25*u-10)*u-55,o>=7&&(d-=36)}return a(208<=d&&d<=29648),d}static getNumDataCodewords(o,d){return Math.floor(H.getNumRawDataModules(o)/8)-H.ECC_CODEWORDS_PER_BLOCK[d.ordinal][o]*H.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let d=[];for(let h=0;h<o-1;h++)d.push(0);d.push(1);let u=1;for(let h=0;h<o;h++){for(let m=0;m<d.length;m++)d[m]=H.reedSolomonMultiply(d[m],u),m+1<d.length&&(d[m]^=d[m+1]);u=H.reedSolomonMultiply(u,2)}return d}static reedSolomonComputeRemainder(o,d){let u=d.map(h=>0);for(const h of o){const m=h^u.shift();u.push(0),d.forEach((g,p)=>u[p]^=H.reedSolomonMultiply(g,m))}return u}static reedSolomonMultiply(o,d){if(o>>>8||d>>>8)throw new RangeError("Byte out of range");let u=0;for(let h=7;h>=0;h--)u=u<<1^(u>>>7)*285,u^=(d>>>h&1)*o;return a(u>>>8==0),u}finderPenaltyCountPatterns(o){const d=o[1];a(d<=this.size*3);const u=d>0&&o[2]==d&&o[3]==d*3&&o[4]==d&&o[5]==d;return(u&&o[0]>=d*4&&o[6]>=d?1:0)+(u&&o[6]>=d*4&&o[0]>=d?1:0)}finderPenaltyTerminateAndCount(o,d,u){return o&&(this.finderPenaltyAddHistory(d,u),d=0),d+=this.size,this.finderPenaltyAddHistory(d,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(o,d){d[0]==0&&(o+=this.size),d.pop(),d.unshift(o)}};s.MIN_VERSION=1,s.MAX_VERSION=40,s.PENALTY_N1=3,s.PENALTY_N2=3,s.PENALTY_N3=40,s.PENALTY_N4=10,s.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],s.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=s;function r(c,o,d){if(o<0||o>31||c>>>o)throw new RangeError("Value out of range");for(let u=o-1;u>=0;u--)d.push(c>>>u&1)}function n(c,o){return(c>>>o&1)!=0}function a(c){if(!c)throw new Error("Assertion error")}const l=class oe{constructor(o,d,u){if(this.mode=o,this.numChars=d,this.bitData=u,d<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(o){let d=[];for(const u of o)r(u,8,d);return new oe(oe.Mode.BYTE,o.length,d)}static makeNumeric(o){if(!oe.isNumeric(o))throw new RangeError("String contains non-numeric characters");let d=[];for(let u=0;u<o.length;){const h=Math.min(o.length-u,3);r(parseInt(o.substring(u,u+h),10),h*3+1,d),u+=h}return new oe(oe.Mode.NUMERIC,o.length,d)}static makeAlphanumeric(o){if(!oe.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],u;for(u=0;u+2<=o.length;u+=2){let h=oe.ALPHANUMERIC_CHARSET.indexOf(o.charAt(u))*45;h+=oe.ALPHANUMERIC_CHARSET.indexOf(o.charAt(u+1)),r(h,11,d)}return u<o.length&&r(oe.ALPHANUMERIC_CHARSET.indexOf(o.charAt(u)),6,d),new oe(oe.Mode.ALPHANUMERIC,o.length,d)}static makeSegments(o){return o==""?[]:oe.isNumeric(o)?[oe.makeNumeric(o)]:oe.isAlphanumeric(o)?[oe.makeAlphanumeric(o)]:[oe.makeBytes(oe.toUtf8ByteArray(o))]}static makeEci(o){let d=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)r(o,8,d);else if(o<16384)r(2,2,d),r(o,14,d);else if(o<1e6)r(6,3,d),r(o,21,d);else throw new RangeError("ECI assignment value out of range");return new oe(oe.Mode.ECI,0,d)}static isNumeric(o){return oe.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return oe.ALPHANUMERIC_REGEX.test(o)}getData(){return this.bitData.slice()}static getTotalBits(o,d){let u=0;for(const h of o){const m=h.mode.numCharCountBits(d);if(h.numChars>=1<<m)return 1/0;u+=4+m+h.bitData.length}return u}static toUtf8ByteArray(o){o=encodeURI(o);let d=[];for(let u=0;u<o.length;u++)o.charAt(u)!="%"?d.push(o.charCodeAt(u)):(d.push(parseInt(o.substring(u+1,u+3),16)),u+=2);return d}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let i=l;e.QrSegment=l})(ir||(ir={}));(e=>{(s=>{const r=class{constructor(a,l){this.ordinal=a,this.formatBits=l}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),s.Ecc=r})(e.QrCode||(e.QrCode={}))})(ir||(ir={}));(e=>{(s=>{const r=class{constructor(a,l){this.modeBits=a,this.numBitsCharCount=l}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),s.Mode=r})(e.QrSegment||(e.QrSegment={}))})(ir||(ir={}));var Sr=ir;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var yb={L:Sr.QrCode.Ecc.LOW,M:Sr.QrCode.Ecc.MEDIUM,Q:Sr.QrCode.Ecc.QUARTILE,H:Sr.QrCode.Ecc.HIGH},Wx=128,Vx="L",Qx="#FFFFFF",Kx="#000000",qx=!1,Gx=1,vb=4,jb=0,bb=.1;function Xx(e,s=0){const r=[];return e.forEach(function(n,a){let l=null;n.forEach(function(i,c){if(!i&&l!==null){r.push(`M${l+s} ${a+s}h${c-l}v1H${l+s}z`),l=null;return}if(c===n.length-1){if(!i)return;l===null?r.push(`M${c+s},${a+s} h1v1H${c+s}z`):r.push(`M${l+s},${a+s} h${c+1-l}v1H${l+s}z`);return}i&&l===null&&(l=c)})}),r.join("")}function Yx(e,s){return e.slice().map((r,n)=>n<s.y||n>=s.y+s.h?r:r.map((a,l)=>l<s.x||l>=s.x+s.w?a:!1))}function Nb(e,s,r,n){if(n==null)return null;const a=e.length+r*2,l=Math.floor(s*bb),i=a/s,c=(n.width||l)*i,o=(n.height||l)*i,d=n.x==null?e.length/2-c/2:n.x*i,u=n.y==null?e.length/2-o/2:n.y*i,h=n.opacity==null?1:n.opacity;let m=null;if(n.excavate){let p=Math.floor(d),j=Math.floor(u),w=Math.ceil(c+d-p),x=Math.ceil(o+u-j);m={x:p,y:j,w,h:x}}const g=n.crossOrigin;return{x:d,y:u,h:o,w:c,excavation:m,opacity:h,crossOrigin:g}}function wb(e,s){return s!=null?Math.max(Math.floor(s),0):e?vb:jb}function Jx({value:e,level:s,minVersion:r,includeMargin:n,marginSize:a,imageSettings:l,size:i,boostLevel:c}){let o=ne.useMemo(()=>{const p=(Array.isArray(e)?e:[e]).reduce((j,w)=>(j.push(...Sr.QrSegment.makeSegments(w)),j),[]);return Sr.QrCode.encodeSegments(p,yb[s],r,void 0,void 0,c)},[e,s,r,c]);const{cells:d,margin:u,numCells:h,calculatedImageSettings:m}=ne.useMemo(()=>{let g=o.getModules();const p=wb(n,a),j=g.length+p*2,w=Nb(g,i,p,l);return{cells:g,margin:p,numCells:j,calculatedImageSettings:w}},[o,i,l,n,a]);return{qrcode:o,margin:u,cells:d,numCells:h,calculatedImageSettings:m}}var kb=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Cb=ne.forwardRef(function(s,r){const n=s,{value:a,size:l=Wx,level:i=Vx,bgColor:c=Qx,fgColor:o=Kx,includeMargin:d=qx,minVersion:u=Gx,boostLevel:h,marginSize:m,imageSettings:g}=n,j=Fo(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:w}=j,x=Fo(j,["style"]),f=g==null?void 0:g.src,y=ne.useRef(null),N=ne.useRef(null),k=ne.useCallback(U=>{y.current=U,typeof r=="function"?r(U):r&&(r.current=U)},[r]),[S,C]=ne.useState(!1),{margin:_,cells:R,numCells:L,calculatedImageSettings:D}=Jx({value:a,level:i,minVersion:u,boostLevel:h,includeMargin:d,marginSize:m,imageSettings:g,size:l});ne.useEffect(()=>{if(y.current!=null){const U=y.current,te=U.getContext("2d");if(!te)return;let Jt=R;const Ie=N.current,T=D!=null&&Ie!==null&&Ie.complete&&Ie.naturalHeight!==0&&Ie.naturalWidth!==0;T&&D.excavation!=null&&(Jt=Yx(R,D.excavation));const z=window.devicePixelRatio||1;U.height=U.width=l*z;const $=l/L*z;te.scale($,$),te.fillStyle=c,te.fillRect(0,0,L,L),te.fillStyle=o,kb?te.fill(new Path2D(Xx(Jt,_))):R.forEach(function(re,xe){re.forEach(function(ur,Mt){ur&&te.fillRect(Mt+_,xe+_,1,1)})}),D&&(te.globalAlpha=D.opacity),T&&te.drawImage(Ie,D.x+_,D.y+_,D.w,D.h)}}),ne.useEffect(()=>{C(!1)},[f]);const F=Do({height:l,width:l},w);let E=null;return f!=null&&(E=ne.createElement("img",{src:f,key:f,style:{display:"none"},onLoad:()=>{C(!0)},ref:N,crossOrigin:D==null?void 0:D.crossOrigin})),ne.createElement(ne.Fragment,null,ne.createElement("canvas",Do({style:F,height:l,width:l,ref:k,role:"img"},x)),E)});Cb.displayName="QRCodeCanvas";var Zx=ne.forwardRef(function(s,r){const n=s,{value:a,size:l=Wx,level:i=Vx,bgColor:c=Qx,fgColor:o=Kx,includeMargin:d=qx,minVersion:u=Gx,boostLevel:h,title:m,marginSize:g,imageSettings:p}=n,j=Fo(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:w,cells:x,numCells:f,calculatedImageSettings:y}=Jx({value:a,level:i,minVersion:u,boostLevel:h,includeMargin:d,marginSize:g,imageSettings:p,size:l});let N=x,k=null;p!=null&&y!=null&&(y.excavation!=null&&(N=Yx(x,y.excavation)),k=ne.createElement("image",{href:p.src,height:y.h,width:y.w,x:y.x+w,y:y.y+w,preserveAspectRatio:"none",opacity:y.opacity,crossOrigin:y.crossOrigin}));const S=Xx(N,w);return ne.createElement("svg",Do({height:l,width:l,viewBox:`0 0 ${f} ${f}`,ref:r,role:"img"},j),!!m&&ne.createElement("title",null,m),ne.createElement("path",{fill:c,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),ne.createElement("path",{fill:o,d:S,shapeRendering:"crispEdges"}),k)});Zx.displayName="QRCodeSVG";const Sb=()=>{const e=Ce(),{partner:s,apiKey:r,isAuthenticated:n,isLoading:a,logout:l}=Ux(),[i,c]=v.useState("sites"),[o,d]=v.useState([]),[u,h]=v.useState([]),[m,g]=v.useState(!0),[p,j]=v.useState(!1),[w,x]=v.useState(""),[f,y]=v.useState(!1),[N,k]=v.useState(null);v.useEffect(()=>{!a&&!n&&e("/partner/login",{replace:!0})},[n,a,e]),v.useEffect(()=>{n&&r&&S()},[n,r]);const S=async()=>{if(r){g(!0);try{const[E,U]=await Promise.all([fetch("/api/partners/me/sites",{headers:{"X-API-Key":r}}),fetch("/api/partners/me/provisions",{headers:{"X-API-Key":r}})]);if(E.ok){const te=await E.json();d(te.sites||[])}if(U.ok){const te=await U.json();h(te.provisions||[])}}catch(E){console.error("Failed to load data",E)}finally{g(!1)}}},C=async()=>{if(!(!r||!w.trim())){y(!0);try{(await fetch("/api/partners/me/provisions",{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":r},body:JSON.stringify({target_client_name:w.trim(),expires_days:30})})).ok&&(x(""),j(!1),S())}catch(E){console.error("Failed to create provision",E)}finally{y(!1)}}},_=async E=>{if(!(!r||!confirm("Revoke this provision code?")))try{await fetch(`/api/partners/me/provisions/${E}`,{method:"DELETE",headers:{"X-API-Key":r}}),S()}catch(U){console.error("Failed to revoke",U)}},R=E=>{switch(E){case"online":case"active":case"claimed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"offline":case"expired":case"revoked":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},L=E=>E?new Date(E).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-",D=E=>{if(!E)return"Never";const U=new Date(E),Jt=new Date().getTime()-U.getTime(),Ie=Math.floor(Jt/6e4);return Ie<1?"Just now":Ie<60?`${Ie}m ago`:Ie<1440?`${Math.floor(Ie/60)}h ago`:L(E)};if(a||m)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent"})});if(!s)return null;const F=s.primary_color||"#4F46E5";return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white shadow-sm border-b",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[s.logo_url?t.jsx("img",{src:s.logo_url,alt:s.brand_name,className:"h-10"}):t.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold",style:{backgroundColor:F},children:s.brand_name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:s.brand_name}),t.jsx("p",{className:"text-sm text-gray-500",children:"Partner Dashboard"})]})]}),t.jsx("button",{onClick:()=>{l(),e("/partner/login")},className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition",children:"Sign Out"})]})}),t.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Total Sites"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.site_count})]}),t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Pending Provisions"}),t.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:s.provisions.pending})]}),t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Claimed Provisions"}),t.jsx("p",{className:"text-3xl font-bold text-green-600",children:s.provisions.claimed})]}),t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Revenue Share"}),t.jsxs("p",{className:"text-3xl font-bold",style:{color:F},children:[s.revenue_share_percent,"%"]})]})]})}),t.jsx("div",{className:"max-w-7xl mx-auto px-6",children:t.jsxs("div",{className:"flex gap-4 border-b",children:[t.jsxs("button",{onClick:()=>c("sites"),className:`px-4 py-3 font-medium transition border-b-2 -mb-px ${i==="sites"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Sites (",o.length,")"]}),t.jsxs("button",{onClick:()=>c("provisions"),className:`px-4 py-3 font-medium transition border-b-2 -mb-px ${i==="provisions"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Provision Codes (",u.length,")"]})]})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[i==="sites"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:o.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Sites Yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Create a provision code and use it to onboard your first client."}),t.jsx("button",{onClick:()=>{c("provisions"),j(!0)},className:"px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition",children:"Create Provision Code"})]}):t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Site"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tier"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Appliances"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Check-in"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:o.map(E=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:E.clinic_name}),t.jsx("p",{className:"text-sm text-gray-500",children:E.site_id})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R(E.status)}`,children:E.status})}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 capitalize",children:E.tier}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:E.appliance_count}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:D(E.last_checkin)})]},E.site_id))})]})}),i==="provisions"&&t.jsxs("div",{children:[t.jsx("div",{className:"mb-4 flex justify-end",children:t.jsxs("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Provision Code"]})}),p&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-xl",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create Provision Code"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name"}),t.jsx("input",{type:"text",value:w,onChange:E=>x(E.target.value),placeholder:"e.g., Scranton Family Practice",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be the default name when the appliance claims this code."})]}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx("button",{onClick:()=>{j(!1),x("")},className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition",children:"Cancel"}),t.jsx("button",{onClick:C,disabled:f||!w.trim(),className:"px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition",children:f?"Creating...":"Create Code"})]})]})}),N&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-white rounded-2xl p-8 w-full max-w-md shadow-xl",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Provision QR Code"}),t.jsx("p",{className:"text-sm text-gray-500 mb-6",children:N.target_client_name||"New Appliance"}),t.jsx("div",{className:"bg-white p-4 rounded-xl border-2 border-gray-200 inline-block mb-6",children:t.jsx(Zx,{value:N.qr_content,size:200,level:"M",includeMargin:!0})}),t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Manual Entry Code"}),t.jsx("code",{className:"px-4 py-2 bg-gray-100 rounded-lg text-lg font-mono font-bold tracking-wider",children:N.provision_code})]}),t.jsxs("div",{className:"text-left bg-gray-50 rounded-lg p-4 mb-6",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"To provision an appliance:"}),t.jsxs("ol",{className:"text-sm text-gray-600 space-y-1 list-decimal list-inside",children:[t.jsx("li",{children:"Boot the OsirisCare appliance"}),t.jsx("li",{children:"Scan this QR code or enter the code manually"}),t.jsx("li",{children:"The appliance will register automatically"})]})]}),t.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:["Expires: ",L(N.expires_at)]}),t.jsxs("div",{className:"flex gap-3 justify-center",children:[t.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(N.provision_code)},className:"px-4 py-2 text-indigo-600 hover:text-indigo-800 font-medium transition flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Code"]}),t.jsx("button",{onClick:()=>k(null),className:"px-4 py-2 bg-gray-900 text-white font-medium rounded-lg hover:bg-gray-800 transition",children:"Done"})]})]})})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:u.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Provision Codes"}),t.jsx("p",{className:"text-gray-500",children:"Create a provision code to onboard new appliances."})]}):t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expires"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(E=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("code",{className:"px-2 py-1 bg-gray-100 rounded text-sm font-mono",children:E.provision_code})}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:E.target_client_name||"-"}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R(E.status)}`,children:E.status})}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:L(E.created_at)}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:L(E.expires_at)}),t.jsx("td",{className:"px-6 py-4 text-right",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[E.status==="pending"&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>k(E),className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"QR"]}),t.jsx("button",{onClick:()=>_(E.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Revoke"})]}),E.status==="claimed"&&t.jsx("span",{className:"text-sm text-gray-500",children:E.claimed_by_mac})]})})]},E.id))})]})})]})]})]})},_b=new r0({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}}),Pb={"/":"Dashboard","/sites":"Sites","/notifications":"Notifications","/notification-settings":"Notification Settings","/incidents":"Incidents","/onboarding":"Onboarding Pipeline","/partners":"Partners","/users":"User Management","/runbooks":"Runbook Library","/runbook-config":"Runbook Configuration","/learning":"Learning Loop","/reports":"Reports","/audit-logs":"Audit Logs","/docs":"Documentation"},Eb=()=>{const e=Ce(),s=dr(),{user:r,logout:n}=Ql(),[a,l]=v.useState(null),[i,c]=v.useState(new Date),[o,d]=v.useState(!1),[u,h]=v.useState(!1),{data:m=[],dataUpdatedAt:g}=Px(),p=C0();G0(()=>h(!0)),v.useEffect(()=>{g&&c(new Date(g))},[g]);const j=y=>{l(y),e(`/client/${y}`)},w=async()=>{d(!0),p(),setTimeout(()=>{d(!1),c(new Date)},1e3)},x=async()=>{await n(),e("/")},f=()=>s.pathname.startsWith("/client/")?s.pathname.replace("/client/","").replace(/-/g," ").replace(/\b\w/g,N=>N.toUpperCase()):Pb[s.pathname]||"Central Command";return t.jsxs("div",{className:"min-h-screen bg-background-primary",children:[t.jsx(hv,{clients:m,onClientSelect:j,selectedClient:a,user:r,onLogout:x}),t.jsxs("div",{className:"ml-64",children:[t.jsx(mv,{title:f(),onRefresh:w,refreshing:o,lastUpdated:i,user:r}),t.jsx("main",{className:"p-6",children:t.jsxs(vo,{children:[t.jsx(q,{path:"/",element:t.jsx(Lv,{})}),t.jsx(q,{path:"/sites",element:t.jsx(dj,{})}),t.jsx(q,{path:"/sites/:siteId",element:t.jsx(gj,{})}),t.jsx(q,{path:"/sites/:siteId/frameworks",element:t.jsx(Uj,{})}),t.jsx(q,{path:"/sites/:siteId/integrations",element:t.jsx(Kj,{})}),t.jsx(q,{path:"/sites/:siteId/integrations/setup",element:t.jsx(Yj,{})}),t.jsx(q,{path:"/sites/:siteId/integrations/:integrationId",element:t.jsx(nb,{})}),t.jsx(q,{path:"/notifications",element:t.jsx(_j,{})}),t.jsx(q,{path:"/incidents",element:t.jsx(Lj,{})}),t.jsx(q,{path:"/notification-settings",element:t.jsx(Ej,{})}),t.jsx(q,{path:"/onboarding",element:t.jsx(Zv,{})}),t.jsx(q,{path:"/partners",element:t.jsx(wj,{})}),t.jsx(q,{path:"/users",element:t.jsx(Oj,{})}),t.jsx(q,{path:"/runbooks",element:t.jsx(Iv,{})}),t.jsx(q,{path:"/runbook-config",element:t.jsx($v,{})}),t.jsx(q,{path:"/learning",element:t.jsx(Hv,{})}),t.jsx(q,{path:"/audit-logs",element:t.jsx(aj,{})}),t.jsx(q,{path:"/docs",element:t.jsx(yj,{})}),t.jsx(q,{path:"/client/:siteId",element:t.jsx(ej,{})}),t.jsx(q,{path:"/reports",element:t.jsx(Lb,{title:"Reports"})})]})})]}),t.jsx(xv,{isOpen:u,onClose:()=>h(!1)})]})},Lb=({title:e})=>t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center",children:[t.jsx("h1",{className:"text-2xl font-semibold text-label-primary mb-2",children:e}),t.jsx("p",{className:"text-label-tertiary",children:"Coming soon in a future phase."})]}),Ab=()=>{const{isAuthenticated:e,isLoading:s}=Ql();return s?t.jsx("div",{className:"min-h-screen bg-background-primary flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 border-2 border-accent-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-label-tertiary",children:"Loading..."})]})}):e?t.jsx(Eb,{}):t.jsx(sj,{onSuccess:()=>{}})},Rb=()=>t.jsx(n0,{client:_b,children:t.jsx(tj,{children:t.jsx(_y,{children:t.jsxs(vo,{children:[t.jsx(q,{path:"/set-password",element:t.jsx(ab,{})}),t.jsx(q,{path:"/portal/site/:siteId",element:t.jsx(_u,{})}),t.jsx(q,{path:"/portal/site/:siteId/dashboard",element:t.jsx(hb,{})}),t.jsx(q,{path:"/portal/site/:siteId/verify",element:t.jsx(pb,{})}),t.jsx(q,{path:"/portal/site/:siteId/login",element:t.jsx(_u,{})}),t.jsx(q,{path:"/partner/*",element:t.jsx(fb,{children:t.jsxs(vo,{children:[t.jsx(q,{path:"login",element:t.jsx(Eu,{})}),t.jsx(q,{path:"dashboard",element:t.jsx(Sb,{})}),t.jsx(q,{path:"*",element:t.jsx(Eu,{})})]})})}),t.jsx(q,{path:"/*",element:t.jsx(Ab,{})})]})})})});wi.createRoot(document.getElementById("root")).render(t.jsx(ne.StrictMode,{children:t.jsx(Rb,{})}));
//# sourceMappingURL=index-DUHCrfow.js.map
